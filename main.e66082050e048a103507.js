var eP=Object.defineProperty,tP=Object.defineProperties,nP=Object.getOwnPropertyDescriptors,RN=Object.getOwnPropertySymbols,rP=Object.prototype.hasOwnProperty,iP=Object.prototype.propertyIsEnumerable,MN=(Ze,me,F)=>me in Ze?eP(Ze,me,{enumerable:!0,configurable:!0,writable:!0,value:F}):Ze[me]=F,NN=(Ze,me)=>{for(var F in me||(me={}))rP.call(me,F)&&MN(Ze,F,me[F]);if(RN)for(var F of RN(me))iP.call(me,F)&&MN(Ze,F,me[F]);return Ze},ON=(Ze,me)=>tP(Ze,nP(me));(self.webpackChunkpopmovies=self.webpackChunkpopmovies||[]).push([[179],{8255:Ze=>{function me(F){return Promise.resolve().then(()=>{var f=new Error("Cannot find module '"+F+"'");throw f.code="MODULE_NOT_FOUND",f})}me.keys=()=>[],me.resolve=me,me.id=8255,Ze.exports=me},8720:(Ze,me,F)=>{"use strict";F.d(me,{deG:()=>Td,tb:()=>u0,AFp:()=>a0,ip1:()=>Qt,CZH:()=>Jl,hGG:()=>XD,z2F:()=>Rg,sBO:()=>pS,Sil:()=>Ls,_Vd:()=>ql,EJc:()=>c0,SBq:()=>Go,qLn:()=>so,vpe:()=>fo,gxx:()=>fc,tBr:()=>ko,XFs:()=>Xe,OlP:()=>Dn,zs3:()=>zn,ZZ4:()=>_y,aQg:()=>vy,soG:()=>Dg,YKP:()=>Rc,v3s:()=>Rx,h0i:()=>Ps,PXZ:()=>Iu,R0b:()=>Vs,FiY:()=>As,Lbi:()=>zo,g9A:()=>yi,Qsj:()=>sS,FYo:()=>eg,JOm:()=>Ti,Tiy:()=>XE,q3G:()=>Yt,tp0:()=>ds,EAV:()=>GD,Rgc:()=>kh,dDg:()=>s_,DyG:()=>rc,q4F:()=>gi,GfV:()=>ew,s_b:()=>Fh,ifc:()=>sn,eFA:()=>Cu,G48:()=>LD,Gpc:()=>Pe,X6Q:()=>bu,_c5:()=>Ux,VLi:()=>Cx,c2e:()=>Cg,zSh:()=>Jd,wAp:()=>mt,vHH:()=>Ae,EiD:()=>ct,mCW:()=>ga,qzn:()=>tu,JVY:()=>em,pB0:()=>$f,eBb:()=>tm,L6k:()=>L_,LAX:()=>V_,cg1:()=>_u,Tjo:()=>Lx,kL8:()=>Eh,yhl:()=>Fd,dqk:()=>ut,sIi:()=>gc,CqO:()=>Mp,QGY:()=>wc,F4k:()=>pu,RDi:()=>Xc,AaK:()=>V,z3N:()=>Ss,qOj:()=>rh,TTD:()=>Gs,_Bn:()=>fy,xp6:()=>sp,uIk:()=>iE,ekj:()=>kp,Suo:()=>Wy,Xpm:()=>ue,lG2:()=>Cn,Yz7:()=>dn,cJS:()=>Jt,oAB:()=>bt,Yjl:()=>ar,Y36:()=>fh,_UZ:()=>RI,qZA:()=>vE,TgZ:()=>xp,EpF:()=>Br,n5z:()=>$i,Ikx:()=>ry,LFG:()=>vn,$8M:()=>Wa,NdJ:()=>EE,CRH:()=>zy,Q6J:()=>Ec,s9C:()=>xe,DdM:()=>jy,iGM:()=>lD,MAs:()=>Bm,CHM:()=>ta,LSH:()=>di,kYT:()=>yt,YNc:()=>lE,_uU:()=>ei,Oqu:()=>En});var f=F(9765),j=F(5319),O=F(7574),re=F(6682),te=F(4458),oe=F(1307);function ce(){return new f.xQ}function G(i){for(let s in i)if(i[s]===G)return s;throw Error("Could not find renamed property on target object.")}function L(i,s){for(const o in s)s.hasOwnProperty(o)&&!i.hasOwnProperty(o)&&(i[o]=s[o])}function V(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(V).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function ne(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const pe=G({__forward_ref__:G});function Pe(i){return i.__forward_ref__=Pe,i.toString=function(){return V(this())},i}function de(i){return we(i)?i():i}function we(i){return"function"==typeof i&&i.hasOwnProperty(pe)&&i.__forward_ref__===Pe}class Ae extends Error{constructor(s,o){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,o)),this.code=s}}function Ce(i){return"string"==typeof i?i:null==i?"":String(i)}function Qe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ce(i)}function Me(i,s){const o=s?` in ${s}`:"";throw new Ae("201",`No provider for ${Qe(i)} found${o}`)}function An(i,s){null==i&&function(i,s,o,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function dn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Jt(i){return{providers:i.providers||[],imports:i.imports||[]}}function br(i){return Wr(i,Un)||Wr(i,Zt)}function Wr(i,s){return i.hasOwnProperty(s)?i[s]:null}function Gn(i){return i&&(i.hasOwnProperty(Pr)||i.hasOwnProperty(wn))?i[Pr]:null}const Un=G({\u0275prov:G}),Pr=G({\u0275inj:G}),Zt=G({ngInjectableDef:G}),wn=G({ngInjectorDef:G});var Xe=(()=>((Xe=Xe||{})[Xe.Default=0]="Default",Xe[Xe.Host=1]="Host",Xe[Xe.Self=2]="Self",Xe[Xe.SkipSelf=4]="SkipSelf",Xe[Xe.Optional=8]="Optional",Xe))();let qn;function Pn(i){const s=qn;return qn=i,s}function gr(i,s,o){const u=br(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Xe.Optional?null:void 0!==s?s:void Me(V(i),"Injector")}function Bt(i){return{toString:i}.toString()}var Ye=(()=>((Ye=Ye||{})[Ye.OnPush=0]="OnPush",Ye[Ye.Default=1]="Default",Ye))(),sn=(()=>((sn=sn||{})[sn.Emulated=0]="Emulated",sn[sn.None=2]="None",sn[sn.ShadowDom=3]="ShadowDom",sn))();const Wt="undefined"!=typeof globalThis&&globalThis,cn="undefined"!=typeof window&&window,Kn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ut=Wt||"undefined"!=typeof global&&global||cn||Kn,J={},W=[],B=G({\u0275cmp:G}),ve=G({\u0275dir:G}),Ve=G({\u0275pipe:G}),rt=G({\u0275mod:G}),Dt=G({\u0275loc:G}),Nt=G({\u0275fac:G}),an=G({__NG_ELEMENT_ID__:G});let jt=0;function ue(i){return Bt(()=>{const o={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Ye.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||W,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||sn.Emulated,id:"c",styles:i.styles||W,_:null,setInput:null,schemas:i.schemas||null,tView:null},l=i.directives,d=i.features,g=i.pipes;return u.id+=jt++,u.inputs=Xt(i.inputs,o),u.outputs=Xt(i.outputs),d&&d.forEach(_=>_(u)),u.directiveDefs=l?()=>("function"==typeof l?l():l).map(q):null,u.pipeDefs=g?()=>("function"==typeof g?g():g).map(be):null,u})}function q(i){return gn(i)||function(i){return i[ve]||null}(i)}function be(i){return function(i){return i[Ve]||null}(i)}const Be={};function bt(i){return Bt(()=>{const s={type:i.type,bootstrap:i.bootstrap||W,declarations:i.declarations||W,imports:i.imports||W,exports:i.exports||W,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Be[i.id]=i.type),s})}function yt(i,s){return Bt(()=>{const o=kr(i,!0);o.declarations=s.declarations||W,o.imports=s.imports||W,o.exports=s.exports||W})}function Xt(i,s){if(null==i)return J;const o={};for(const u in i)if(i.hasOwnProperty(u)){let l=i[u],d=l;Array.isArray(l)&&(d=l[1],l=l[0]),o[l]=u,s&&(s[l]=d)}return o}const Cn=ue;function ar(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function gn(i){return i[B]||null}function kr(i,s){const o=i[rt]||null;if(!o&&!0===s)throw new Error(`Type ${V(i)} does not have '\u0275mod' property.`);return o}function is(i){return Array.isArray(i)&&"object"==typeof i[1]}function vi(i){return Array.isArray(i)&&!0===i[1]}function od(i){return 0!=(8&i.flags)}function Lr(i){return 2==(2&i.flags)}function Ru(i){return 1==(1&i.flags)}function Dr(i){return null!==i.template}function ad(i){return 0!=(512&i[2])}function Tr(i,s){return i.hasOwnProperty(Nt)?i[Nt]:null}class Jc{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Gs(){return Jn}function Jn(i){return i.type.prototype.ngOnChanges&&(i.setInput=Jo),pd}function pd(){const i=Pu(this),s=null==i?void 0:i.current;if(s){const o=i.previous;if(o===J)i.previous=s;else for(let u in s)o[u]=s[u];i.current=null,this.ngOnChanges(s)}}function Jo(i,s,o,u){const l=Pu(i)||function(i,s){return i[Cf]=s}(i,{previous:J,current:null}),d=l.current||(l.current={}),g=l.previous,_=this.declaredInputs[o],w=g[_];d[_]=new Jc(w&&w.currentValue,s,g===J),i[u]=s}Gs.ngInherit=!0;const Cf="__ngSimpleChanges__";function Pu(i){return i[Cf]||null}let Oa;function Xc(i){Oa=i}function _n(i){return!!i.listen}const Io={createRenderer:(i,s)=>void 0!==Oa?Oa:"undefined"!=typeof document?document:void 0};function kn(i){for(;Array.isArray(i);)i=i[0];return i}function Fu(i,s){return kn(s[i])}function Xn(i,s){return kn(s[i.index])}function Co(i,s){return i.data[s]}function er(i,s){const o=s[i];return is(o)?o:o[0]}function ka(i){return 4==(4&i[2])}function Ar(i){return 128==(128&i[2])}function Is(i,s){return null==s?null:i[s]}function Fa(i){i[18]=0}function ea(i,s){i[5]+=s;let o=i,u=i[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const ft={lFrame:ja(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function zs(){return ft.bindingsEnabled}function Ie(){return ft.lFrame.lView}function Vt(){return ft.lFrame.tView}function ta(i){return ft.lFrame.contextLView=i,i[8]}function Sn(){let i=na();for(;null!==i&&64===i.type;)i=i.parent;return i}function na(){return ft.lFrame.currentTNode}function Vi(i,s){const o=ft.lFrame;o.currentTNode=i,o.isParent=s}function ra(){return ft.lFrame.isParent}function Ys(){return ft.isInCheckNoChangesMode}function La(i){ft.isInCheckNoChangesMode=i}function Ui(){return ft.lFrame.bindingIndex++}function Ua(i,s){const o=ft.lFrame;o.bindingIndex=o.bindingRootIndex=i,Do(s)}function Do(i){ft.lFrame.currentDirectiveIndex=i}function Ba(){return ft.lFrame.currentQueryIndex}function $u(i){ft.lFrame.currentQueryIndex=i}function nl(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function xf(i,s,o){if(o&Xe.SkipSelf){let l=s,d=i;for(;!(l=l.parent,null!==l||o&Xe.Host||(l=nl(d),null===l||(d=d[15],10&l.type))););if(null===l)return!1;s=l,i=d}const u=ft.lFrame=_d();return u.currentTNode=s,u.lView=i,!0}function ia(i){const s=_d(),o=i[1];ft.lFrame=s,s.currentTNode=o.firstChild,s.lView=i,s.tView=o,s.contextLView=i,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function _d(){const i=ft.lFrame,s=null===i?null:i.child;return null===s?ja(i):s}function ja(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Hu(){const i=ft.lFrame;return ft.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Gu=Hu;function $a(){const i=Hu();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function cr(){return ft.lFrame.selectedIndex}function sa(i){ft.lFrame.selectedIndex=i}function xn(){const i=ft.lFrame;return Co(i.tView,i.selectedIndex)}function Wn(i,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const d=i.data[o].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:_,ngAfterViewInit:w,ngAfterViewChecked:C,ngOnDestroy:A}=d;g&&(i.contentHooks||(i.contentHooks=[])).push(-o,g),_&&((i.contentHooks||(i.contentHooks=[])).push(o,_),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(o,_)),w&&(i.viewHooks||(i.viewHooks=[])).push(-o,w),C&&((i.viewHooks||(i.viewHooks=[])).push(o,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(o,C)),null!=A&&(i.destroyHooks||(i.destroyHooks=[])).push(o,A)}}function Ao(i,s,o){vd(i,s,3,o)}function zu(i,s,o,u){(3&i[2])===o&&vd(i,s,o,u)}function al(i,s){let o=i[2];(3&o)===s&&(o&=2047,o+=1,i[2]=o)}function vd(i,s,o,u){const d=null!=u?u:-1,g=s.length-1;let _=0;for(let w=void 0!==u?65535&i[18]:0;w<g;w++)if("number"==typeof s[w+1]){if(_=s[w],null!=u&&_>=u)break}else s[w]<0&&(i[18]+=65536),(_<d||-1==d)&&(Zu(i,o,s,w),i[18]=(4294901760&i[18])+w+2),w++}function Zu(i,s,o,u){const l=o[u]<0,d=o[u+1],_=i[l?-o[u]:o[u]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{d.call(_)}finally{}}}else try{d.call(_)}finally{}}class Ei{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Yu(i,s,o){const u=_n(i);let l=0;for(;l<o.length;){const d=o[l];if("number"==typeof d){if(0!==d)break;l++;const g=o[l++],_=o[l++],w=o[l++];u?i.setAttribute(s,_,w,g):s.setAttributeNS(g,_,w)}else{const g=d,_=o[++l];Qu(g)?u&&i.setProperty(s,g,_):u?i.setAttribute(s,g,_):s.setAttribute(g,_),l++}}return l}function Nf(i){return 3===i||4===i||6===i}function Qu(i){return 64===i.charCodeAt(0)}function aa(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?o=l:0===o||Wg(i,o,l,null,-1===o||2===o?s[++u]:null)}}return i}function Wg(i,s,o,u,l){let d=0,g=i.length;if(-1===s)g=-1;else for(;d<i.length;){const _=i[d++];if("number"==typeof _){if(_===s){g=-1;break}if(_>s){g=d-1;break}}}for(;d<i.length;){const _=i[d];if("number"==typeof _)break;if(_===o){if(null===u)return void(null!==l&&(i[d+1]=l));if(u===i[d+1])return void(i[d+2]=l)}d++,null!==u&&d++,null!==l&&d++}-1!==g&&(i.splice(g,0,s),d=g+1),i.splice(d++,0,o),null!==u&&i.splice(d++,0,u),null!==l&&i.splice(d++,0,l)}function wd(i){return-1!==i}function Js(i){return 32767&i}function So(i,s){let o=function(i){return i>>16}(i),u=s;for(;o>0;)u=u[15],o--;return u}let cl=!0;function ll(i){const s=cl;return cl=i,s}let Xu=0;function ln(i,s){const o=pt(i,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,Xs(u.data,i),Xs(s,null),Xs(u.blueprint,null));const l=xo(i,s),d=i.injectorIndex;if(wd(l)){const g=Js(l),_=So(l,s),w=_[1].data;for(let C=0;C<8;C++)s[d+C]=_[g+C]|w[g+C]}return s[d+8]=l,d}function Xs(i,s){i.push(0,0,0,0,0,0,0,0,s)}function pt(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function xo(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let o=0,u=null,l=s;for(;null!==l;){const d=l[1],g=d.type;if(u=2===g?d.declTNode:1===g?l[6]:null,null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function Ha(i,s,o){!function(i,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(an)&&(u=o[an]),null==u&&(u=o[an]=Xu++);const l=255&u;s.data[i+(l>>5)]|=1<<l}(i,s,o)}function eo(i,s,o){if(o&Xe.Optional)return i;Me(s,"NodeInjector")}function Ts(i,s,o,u){if(o&Xe.Optional&&void 0===u&&(u=null),0==(o&(Xe.Self|Xe.Host))){const l=i[9],d=Pn(void 0);try{return l?l.get(s,u,o&Xe.Optional):gr(s,u,o&Xe.Optional)}finally{Pn(d)}}return eo(u,s,o)}function bi(i,s,o,u=Xe.Default,l){if(null!==i){const d=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(an)?i[an]:void 0;return"number"==typeof s?s>=0?255&s:Id:s}(o);if("function"==typeof d){if(!xf(s,i,u))return u&Xe.Host?eo(l,o,u):Ts(s,o,u,l);try{const g=d(u);if(null!=g||u&Xe.Optional)return g;Me(o)}finally{Gu()}}else if("number"==typeof d){let g=null,_=pt(i,s),w=-1,C=u&Xe.Host?s[16][6]:null;for((-1===_||u&Xe.SkipSelf)&&(w=-1===_?xo(i,s):s[_+8],-1!==w&&qa(u,!1)?(g=s[1],_=Js(w),s=So(w,s)):_=-1);-1!==_;){const A=s[1];if(ji(d,_,A.data)){const N=Ga(_,s,o,g,u,C);if(N!==bd)return N}w=s[_+8],-1!==w&&qa(u,s[1].data[_+8]===C)&&ji(d,_,s)?(g=A,_=Js(w),s=So(w,s)):_=-1}}}return Ts(s,o,u,l)}const bd={};function Id(){return new Mn(Sn(),Ie())}function Ga(i,s,o,u,l,d){const g=s[1],_=g.data[i+8],A=ua(_,g,o,null==u?Lr(_)&&cl:u!=g&&0!=(3&_.type),l&Xe.Host&&d===_);return null!==A?Rn(s,g,A,_):bd}function ua(i,s,o,u,l){const d=i.providerIndexes,g=s.data,_=1048575&d,w=i.directiveStart,A=d>>20,k=l?_+A:i.directiveEnd;for(let H=u?_:_+A;H<k;H++){const Y=g[H];if(H<w&&o===Y||H>=w&&Y.type===o)return H}if(l){const H=g[w];if(H&&Dr(H)&&H.type===o)return w}return null}function Rn(i,s,o,u){let l=i[o];const d=s.data;if(function(i){return i instanceof Ei}(l)){const g=l;g.resolving&&function(i,s){throw new Ae("200",`Circular dependency in DI detected for ${i}`)}(Qe(d[o]));const _=ll(g.canSeeViewProviders);g.resolving=!0;const w=g.injectImpl?Pn(g.injectImpl):null;xf(i,u,Xe.Default);try{l=i[o]=g.factory(void 0,d,i,u),s.firstCreatePass&&o>=u.directiveStart&&function(i,s,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:d}=s.type.prototype;if(u){const g=Jn(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(i,g),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,g)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-i,l),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(i,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,d))}(o,d[o],s)}finally{null!==w&&Pn(w),ll(_),g.resolving=!1,Gu()}}return l}function ji(i,s,o){return!!(o[s+(i>>5)]&1<<i)}function qa(i,s){return!(i&Xe.Self||i&Xe.Host&&s)}class Mn{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return bi(this._tNode,this._lView,s,u,o)}}function $i(i){return Bt(()=>{const s=i.prototype.constructor,o=s[Nt]||hl(s),u=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==u;){const d=l[Nt]||hl(l);if(d&&d!==o)return d;l=Object.getPrototypeOf(l)}return d=>new d})}function hl(i){return we(i)?()=>{const s=hl(de(i));return s&&s()}:Tr(i)}function Wa(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const o=i.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const d=o[l];if(Nf(d))break;if(0===d)l+=2;else if("number"==typeof d)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(d===s)return o[l+1];l+=2}}}return null}(Sn(),i)}const os="__parameters__";function Ro(i,s,o){return Bt(()=>{const u=function(i){return function(...o){if(i){const u=i(...o);for(const l in u)this[l]=u[l]}}}(s);function l(...d){if(this instanceof l)return u.apply(this,d),this;const g=new l(...d);return _.annotation=g,_;function _(w,C,A){const N=w.hasOwnProperty(os)?w[os]:Object.defineProperty(w,os,{value:[]})[os];for(;N.length<=A;)N.push(null);return(N[A]=N[A]||[]).push(g),w}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class Dn{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=dn({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Td=new Dn("AnalyzeForEntryComponents"),rc=Function;function Sr(i,s){void 0===s&&(s=i);for(let o=0;o<i.length;o++){let u=i[o];Array.isArray(u)?(s===i&&(s=i.slice(0,o)),Sr(u,s)):s!==i&&s.push(u)}return s}function cs(i,s){i.forEach(o=>Array.isArray(o)?cs(o,s):s(o))}function No(i,s,o){s>=i.length?i.push(o):i.splice(s,0,o)}function ro(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Zr(i,s,o){let u=I(i,s);return u>=0?i[1|u]=o:(u=~u,function(i,s,o,u){let l=i.length;if(l==s)i.push(o,u);else if(1===l)i.push(u,i[0]),i[0]=o;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=o,i[s+1]=u}}(i,u,s,o)),u}function Ff(i,s){const o=I(i,s);if(o>=0)return i[1|o]}function I(i,s){return function(i,s,o){let u=0,l=i.length>>o;for(;l!==u;){const d=u+(l-u>>1),g=i[d<<o];if(s===g)return d<<o;g>s?l=d:u=d+1}return~(l<<o)}(i,s,1)}const jn={},_r="__NG_DI_FLAG__",Hi="ngTempTokenPath",Qa=/\n/gm,Po="__source",ls=G({provide:String,useValue:G});let Kr;function Ci(i){const s=Kr;return Kr=i,s}function J0(i,s=Xe.Default){if(void 0===Kr)throw new Error("inject() must be called from an injection context");return null===Kr?gr(i,void 0,s):Kr.get(i,s&Xe.Optional?null:void 0,s)}function vn(i,s=Xe.Default){return(qn||J0)(de(i),s)}function Gi(i){const s=[];for(let o=0;o<i.length;o++){const u=de(i[o]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let l,d=Xe.Default;for(let g=0;g<u.length;g++){const _=u[g],w=_l(_);"number"==typeof w?-1===w?l=_.token:d|=w:l=_}s.push(vn(l,d))}else s.push(vn(u))}return s}function Ja(i,s){return i[_r]=s,i.prototype[_r]=s,i}function _l(i){return i[_r]}function Lf(i,s,o,u){const l=i[Hi];throw s[Po]&&l.unshift(s[Po]),i.message=function(i,s,o,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let l=V(s);if(Array.isArray(s))l=s.map(V).join(" -> ");else if("object"==typeof s){let d=[];for(let g in s)if(s.hasOwnProperty(g)){let _=s[g];d.push(g+":"+("string"==typeof _?JSON.stringify(_):V(_)))}l=`{${d.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${i.replace(Qa,"\n  ")}`}("\n"+i.message,l,o,u),i.ngTokenPath=l,i[Hi]=null,i}const ko=Ja(Ro("Inject",i=>({token:i})),-1),As=Ja(Ro("Optional"),8),ds=Ja(Ro("SkipSelf"),4);let bl;function uc(i){var s;return(null===(s=function(){if(void 0===bl&&(bl=null,ut.trustedTypes))try{bl=ut.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return bl}())||void 0===s?void 0:s.createHTML(i))||i}class pa{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class P_ extends pa{getTypeName(){return"HTML"}}class Bf extends pa{getTypeName(){return"Style"}}class k_ extends pa{getTypeName(){return"Script"}}class jf extends pa{getTypeName(){return"URL"}}class F_ extends pa{getTypeName(){return"ResourceURL"}}function Ss(i){return i instanceof pa?i.changingThisBreaksApplicationSecurity:i}function tu(i,s){const o=Fd(i);if(null!=o&&o!==s){if("ResourceURL"===o&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===s}function Fd(i){return i instanceof pa&&i.getTypeName()||null}function em(i){return new P_(i)}function L_(i){return new Bf(i)}function tm(i){return new k_(i)}function V_(i){return new jf(i)}function $f(i){return new F_(i)}class U_{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const o=(new window.DOMParser).parseFromString(uc(s),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(s):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class nm{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(s){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=uc(s),o;const u=this.inertDocument.createElement("body");return u.innerHTML=uc(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(s){const o=s.attributes;for(let l=o.length-1;0<l;l--){const g=o.item(l).name;("xmlns:ns1"===g||0===g.indexOf("ns1:"))&&s.removeAttribute(g)}let u=s.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const nb=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,j_=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ga(i){return(i=String(i)).match(nb)||i.match(j_)?i:"unsafe:"+i}function xs(i){const s={};for(const o of i.split(","))s[o]=!0;return s}function cc(...i){const s={};for(const o of i)for(const u in o)o.hasOwnProperty(u)&&(s[u]=!0);return s}const Vd=xs("area,br,col,hr,img,wbr"),qf=xs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Wf=xs("rp,rt"),zf=cc(Vd,cc(qf,xs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),cc(Wf,xs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),cc(Wf,qf)),Zf=xs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),v=xs("srcset"),E=cc(Zf,v,xs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),xs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),S=xs("script,style,template");class R{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let o=s.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let l=this.checkClobberedElement(o,o.nextSibling);if(l){o=l;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(s){const o=s.nodeName.toLowerCase();if(!zf.hasOwnProperty(o))return this.sanitizedSomething=!0,!S.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=s.attributes;for(let l=0;l<u.length;l++){const d=u.item(l),g=d.name,_=g.toLowerCase();if(!E.hasOwnProperty(_)){this.sanitizedSomething=!0;continue}let w=d.value;Zf[_]&&(w=ga(w)),v[_]&&(i=w,w=(i=String(i)).split(",").map(s=>ga(s.trim())).join(", ")),this.buf.push(" ",g,'="',je(w),'"')}var i;return this.buf.push(">"),!0}endElement(s){const o=s.nodeName.toLowerCase();zf.hasOwnProperty(o)&&!Vd.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(s){this.buf.push(je(s))}checkClobberedElement(s,o){if(o&&(s.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return o}}const Z=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ge=/([^\#-~ |!])/g;function je(i){return i.replace(/&/g,"&amp;").replace(Z,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(ge,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Oe;function ct(i,s){let o=null;try{Oe=Oe||function(i){const s=new nm(i);return function(){try{return!!(new window.DOMParser).parseFromString(uc(""),"text/html")}catch(i){return!1}}()?new U_(s):s}(i);let u=s?String(s):"";o=Oe.getInertBodyElement(u);let l=5,d=u;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,u=d,d=o.innerHTML,o=Oe.getInertBodyElement(u)}while(u!==d);return uc((new R).sanitizeChildren(tn(o)||o))}finally{if(o){const u=tn(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function tn(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Yt=(()=>((Yt=Yt||{})[Yt.NONE=0]="NONE",Yt[Yt.HTML=1]="HTML",Yt[Yt.STYLE=2]="STYLE",Yt[Yt.SCRIPT=3]="SCRIPT",Yt[Yt.URL=4]="URL",Yt[Yt.RESOURCE_URL=5]="RESOURCE_URL",Yt))();function di(i){const s=function(){const i=Ie();return i&&i[12]}();return s?s.sanitize(Yt.URL,i)||"":tu(i,"URL")?Ss(i):ga(Ce(i))}const sb="__ngContext__";function hi(i,s){i[sb]=s}function ob(i){const s=function(i){return i[sb]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function sm(i){return i.ngOriginalError}function db(i,...s){i.error(...s)}class so{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s),u=this._findContext(s),l=(i=s)&&i.ngErrorLogger||db;var i;l(this._console,"ERROR",s),o&&l(this._console,"ORIGINAL ERROR",o),u&&l(this._console,"ERROR CONTEXT",u)}_findContext(s){return s?s.ngDebugContext||this._findContext(sm(s)):null}_findOriginalError(s){let o=s&&sm(s);for(;o&&sm(o);)o=sm(o);return o||null}}const gb=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ut))();function ou(i){return i instanceof Function?i():i}var Ti=(()=>((Ti=Ti||{})[Ti.Important=1]="Important",Ti[Ti.DashCase=2]="DashCase",Ti))();function $t(i,s){return undefined(i,s)}function Jf(i){const s=i[3];return vi(s)?s[3]:s}function Rs(i){return um(i[13])}function jd(i){return um(i[4])}function um(i){for(;null!==i&&!vi(i);)i=i[4];return i}function $d(i,s,o,u,l){if(null!=u){let d,g=!1;vi(u)?d=u:is(u)&&(g=!0,u=u[0]);const _=kn(u);0===i&&null!==o?null==l?tv(s,o,_):Lo(s,o,_,l||null,!0):1===i&&null!==o?Lo(s,o,_,l||null,!0):2===i?function(i,s,o){const u=dm(i,s);u&&function(i,s,o,u){_n(i)?i.removeChild(s,o,u):s.removeChild(o)}(i,u,s,o)}(s,_,g):3===i&&s.destroyNode(_),null!=d&&function(i,s,o,u,l){const d=o[7];d!==kn(o)&&$d(s,i,u,d,l);for(let _=10;_<o.length;_++){const w=o[_];ip(w[1],w,i,s,u,d)}}(s,i,d,o,l)}}function J_(i,s,o){return _n(i)?i.createElement(s,o):null===o?i.createElement(s):i.createElementNS(o,s)}function Xf(i,s){const o=i[9],u=o.indexOf(s),l=s[3];1024&s[2]&&(s[2]&=-1025,ea(l,-1)),o.splice(u,1)}function ep(i,s){if(i.length<=10)return;const o=10+s,u=i[o];if(u){const l=u[17];null!==l&&l!==i&&Xf(l,u),s>0&&(i[o-1][4]=u[4]);const d=ro(i,10+s);!function(i,s){ip(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const g=d[19];null!==g&&g.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function lm(i,s){if(!(256&s[2])){const o=s[11];_n(o)&&o.destroyNode&&ip(i,s,o,3,null,null),function(i){let s=i[13];if(!s)return ev(i[1],i);for(;s;){let o=null;if(is(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==i;)is(s)&&ev(s[1],s),s=s[3];null===s&&(s=i),is(s)&&ev(s[1],s),o=s&&s[4]}s=o}}(s)}}function ev(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let o;if(null!=i&&null!=(o=i.destroyHooks))for(let u=0;u<o.length;u+=2){const l=s[o[u]];if(!(l instanceof Ei)){const d=o[u+1];if(Array.isArray(d))for(let g=0;g<d.length;g+=2){const _=l[d[g]],w=d[g+1];try{w.call(_)}finally{}}else try{d.call(l)}finally{}}}}(i,s),function(i,s){const o=i.cleanup,u=s[7];let l=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const g=o[d+1],_="function"==typeof g?g(s):kn(s[g]),w=u[l=o[d+2]],C=o[d+3];"boolean"==typeof C?_.removeEventListener(o[d],w,C):C>=0?u[l=C]():u[l=-C].unsubscribe(),d+=2}else{const g=u[l=o[d+1]];o[d].call(g)}if(null!==u){for(let d=l+1;d<u.length;d++)u[d]();s[7]=null}}(i,s),1===s[1].type&&_n(s[11])&&s[11].destroy();const o=s[17];if(null!==o&&vi(s[3])){o!==s[3]&&Xf(o,s);const u=s[19];null!==u&&u.detachView(i)}}}function _b(i,s,o){return function(i,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];if(2&u.flags){const l=i.data[u.directiveStart].encapsulation;if(l===sn.None||l===sn.Emulated)return null}return Xn(u,o)}(i,s.parent,o)}function Lo(i,s,o,u,l){_n(i)?i.insertBefore(s,o,u,l):s.insertBefore(o,u,l)}function tv(i,s,o){_n(i)?i.appendChild(s,o):s.appendChild(o)}function tp(i,s,o,u,l){null!==u?Lo(i,s,o,u,l):tv(i,s,o)}function dm(i,s){return _n(i)?i.parentNode(s):s.parentNode}let nv=function(i,s,o){return 40&i.type?Xn(i,o):null};function Hd(i,s,o,u){const l=_b(i,u,s),d=s[11],_=function(i,s,o){return nv(i,s,o)}(u.parent||s[6],u,s);if(null!=l)if(Array.isArray(o))for(let w=0;w<o.length;w++)tp(d,l,o[w],_,!1);else tp(d,l,o,_,!1)}function rp(i,s){if(null!==s){const o=s.type;if(3&o)return Xn(s,i);if(4&o)return iv(-1,i[s.index]);if(8&o){const u=s.child;if(null!==u)return rp(i,u);{const l=i[s.index];return vi(l)?iv(-1,l):kn(l)}}if(32&o)return $t(s,i)()||kn(i[s.index]);{const u=Gd(i,s);return null!==u?Array.isArray(u)?u[0]:rp(Jf(i[16]),u):rp(i,s.next)}}return null}function Gd(i,s){return null!==s?i[16][6].projection[s.projection]:null}function iv(i,s){const o=10+i+1;if(o<s.length){const u=s[o],l=u[1].firstChild;if(null!==l)return rp(u,l)}return s[7]}function fm(i,s,o,u,l,d,g){for(;null!=o;){const _=u[o.index],w=o.type;if(g&&0===s&&(_&&hi(kn(_),u),o.flags|=4),64!=(64&o.flags))if(8&w)fm(i,s,o.child,u,l,d,!1),$d(s,i,l,_,d);else if(32&w){const C=$t(o,u);let A;for(;A=C();)$d(s,i,l,A,d);$d(s,i,l,_,d)}else 16&w?ov(i,s,u,o,l,d):$d(s,i,l,_,d);o=g?o.projectionNext:o.next}}function ip(i,s,o,u,l,d){fm(o,u,i.firstChild,s,l,d,!1)}function ov(i,s,o,u,l,d){const g=o[16],w=g[6].projection[u.projection];if(Array.isArray(w))for(let C=0;C<w.length;C++)$d(s,i,l,w[C],d);else fm(i,s,w,g[3],l,d,!0)}function Cb(i,s,o){_n(i)?i.setAttribute(s,"style",o):s.style.cssText=o}function uv(i,s,o){_n(i)?""===o?i.removeAttribute(s,"class"):i.setAttribute(s,"class",o):s.className=o}function Db(i,s,o){let u=i.length;for(;;){const l=i.indexOf(s,o);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const d=s.length;if(l+d===u||i.charCodeAt(l+d)<=32)return l}o=l+1}}const pm="ng-template";function lv(i,s,o){let u=0;for(;u<i.length;){let l=i[u++];if(o&&"class"===l){if(l=i[u],-1!==Db(l.toLowerCase(),s,0))return!0}else if(1===l){for(;u<i.length&&"string"==typeof(l=i[u++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function gm(i){return 4===i.type&&i.value!==pm}function Tb(i,s,o){return s===(4!==i.type||o?i.value:pm)}function WT(i,s,o){let u=4;const l=i.attrs||[],d=function(i){for(let s=0;s<i.length;s++)if(Nf(i[s]))return s;return i.length}(l);let g=!1;for(let _=0;_<s.length;_++){const w=s[_];if("number"!=typeof w){if(!g)if(4&u){if(u=2|1&u,""!==w&&!Tb(i,w,o)||""===w&&1===s.length){if(oo(u))return!1;g=!0}}else{const C=8&u?w:s[++_];if(8&u&&null!==i.attrs){if(!lv(i.attrs,C,o)){if(oo(u))return!1;g=!0}continue}const N=mm(8&u?"class":w,l,gm(i),o);if(-1===N){if(oo(u))return!1;g=!0;continue}if(""!==C){let k;k=N>d?"":l[N+1].toLowerCase();const H=8&u?k:null;if(H&&-1!==Db(H,C,0)||2&u&&C!==k){if(oo(u))return!1;g=!0}}}}else{if(!g&&!oo(u)&&!oo(w))return!1;if(g&&oo(w))continue;g=!1,u=w|1&u}}return oo(u)||g}function oo(i){return 0==(1&i)}function mm(i,s,o,u){if(null===s)return-1;let l=0;if(u||!o){let d=!1;for(;l<s.length;){const g=s[l];if(g===i)return l;if(3===g||6===g)d=!0;else{if(1===g||2===g){let _=s[++l];for(;"string"==typeof _;)_=s[++l];continue}if(4===g)break;if(0===g){l+=4;continue}}l+=d?1:2}return-1}return function(i,s){let o=i.indexOf(4);if(o>-1)for(o++;o<i.length;){const u=i[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,i)}function Ab(i,s,o=!1){for(let u=0;u<s.length;u++)if(WT(i,s[u],o))return!0;return!1}function Sb(i,s){return i?":not("+s.trim()+")":s}function QT(i){let s=i[0],o=1,u=2,l="",d=!1;for(;o<i.length;){let g=i[o];if("string"==typeof g)if(2&u){const _=i[++o];l+="["+g+(_.length>0?'="'+_+'"':"")+"]"}else 8&u?l+="."+g:4&u&&(l+=" "+g);else""!==l&&!oo(g)&&(s+=Sb(d,l),l=""),u=g,d=d||!oo(u);o++}return""!==l&&(s+=Sb(d,l)),s}const At={};function sp(i){dv(Vt(),Ie(),cr()+i,Ys())}function dv(i,s,o,u){if(!u)if(3==(3&s[2])){const d=i.preOrderCheckHooks;null!==d&&Ao(s,d,o)}else{const d=i.preOrderHooks;null!==d&&zu(s,d,0,o)}sa(o)}function op(i,s){return i<<17|s<<2}function Ms(i){return i>>17&32767}function hv(i){return 2|i}function ya(i){return(131068&i)>>2}function ym(i,s){return-131069&i|s<<2}function _m(i){return 1|i}function up(i,s){const o=i.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],d=o[u+1];if(-1!==d){const g=i.data[d];$u(l),g.contentQueries(2,s[d],d)}}}function Tl(i,s,o,u,l,d,g,_,w,C){const A=s.blueprint.slice();return A[0]=l,A[2]=140|u,Fa(A),A[3]=A[15]=i,A[8]=o,A[10]=g||i&&i[10],A[11]=_||i&&i[11],A[12]=w||i&&i[12]||null,A[9]=C||i&&i[9]||null,A[6]=d,A[16]=2==s.type?i[16]:A,A}function zd(i,s,o,u,l){let d=i.data[s];if(null===d)d=function(i,s,o,u,l){const d=na(),g=ra(),w=i.data[s]=function(i,s,o,u,l,d){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?d:d&&d.parent,o,s,u,l);return null===i.firstChild&&(i.firstChild=w),null!==d&&(g?null==d.child&&null!==w.parent&&(d.child=w):null===d.next&&(d.next=w)),w}(i,s,o,u,l),ft.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=u,d.attrs=l;const g=function(){const i=ft.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();d.injectorIndex=null===g?-1:g.injectorIndex}return Vi(d,!0),d}function _a(i,s,o,u){if(0===o)return-1;const l=s.length;for(let d=0;d<o;d++)s.push(u),i.blueprint.push(u),i.data.push(null);return l}function cp(i,s,o){ia(s);try{const u=i.viewQuery;null!==u&&kv(1,u,o);const l=i.template;null!==l&&Lb(i,s,l,1,o),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&up(i,s),i.staticViewQueries&&kv(2,i.viewQuery,o);const d=i.components;null!==d&&function(i,s){for(let o=0;o<s.length;o++)fA(i,s[o])}(s,d)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,$a()}}function Zd(i,s,o,u){const l=s[2];if(256==(256&l))return;ia(s);const d=Ys();try{Fa(s),function(i){ft.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==o&&Lb(i,s,o,2,u);const g=3==(3&l);if(!d)if(g){const C=i.preOrderCheckHooks;null!==C&&Ao(s,C,null)}else{const C=i.preOrderHooks;null!==C&&zu(s,C,0,null),al(s,0)}if(function(i){for(let s=Rs(i);null!==s;s=jd(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const l=o[u],d=l[3];0==(1024&l[2])&&ea(d,1),l[2]|=1024}}}(s),function(i){for(let s=Rs(i);null!==s;s=jd(s))for(let o=10;o<s.length;o++){const u=s[o],l=u[1];Ar(u)&&Zd(l,u,l.template,u[8])}}(s),null!==i.contentQueries&&up(i,s),!d)if(g){const C=i.contentCheckHooks;null!==C&&Ao(s,C)}else{const C=i.contentHooks;null!==C&&zu(s,C,1),al(s,1)}!function(i,s){const o=i.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)sa(~l);else{const d=l,g=o[++u],_=o[++u];Ua(g,d),_(2,s[d])}}}finally{sa(-1)}}(i,s);const _=i.components;null!==_&&function(i,s){for(let o=0;o<s.length;o++)Mv(i,s[o])}(s,_);const w=i.viewQuery;if(null!==w&&kv(2,w,u),!d)if(g){const C=i.viewCheckHooks;null!==C&&Ao(s,C)}else{const C=i.viewHooks;null!==C&&zu(s,C,2),al(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),d||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,ea(s[3],-1))}finally{$a()}}function uA(i,s,o,u){const l=s[10],d=!Ys(),g=ka(s);try{d&&!g&&l.begin&&l.begin(),g&&cp(i,s,u),Zd(i,s,o,u)}finally{d&&!g&&l.end&&l.end()}}function Lb(i,s,o,u,l){const d=cr(),g=2&u;try{sa(-1),g&&s.length>20&&dv(i,s,20,Ys()),o(u,l)}finally{sa(d)}}function Ub(i,s,o){!zs()||(function(i,s,o,u){const l=o.directiveStart,d=o.directiveEnd;i.firstCreatePass||ln(o,s),hi(u,s);const g=o.initialInputs;for(let _=l;_<d;_++){const w=i.data[_],C=Dr(w);C&&xv(s,o,w);const A=Rn(s,i,_,o);hi(A,s),null!==g&&Gb(0,_-l,A,w,0,g),C&&(er(o.index,s)[8]=A)}}(i,s,o,Xn(o,s)),128==(128&o.flags)&&function(i,s,o){const u=o.directiveStart,l=o.directiveEnd,g=o.index,_=ft.lFrame.currentDirectiveIndex;try{sa(g);for(let w=u;w<l;w++){const C=i.data[w],A=s[w];Do(w),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&hp(C,A)}}finally{sa(-1),Do(_)}}(i,s,o))}function wv(i,s,o=Xn){const u=s.localNames;if(null!==u){let l=s.index+1;for(let d=0;d<u.length;d+=2){const g=u[d+1],_=-1===g?o(s,i):i[g];i[l++]=_}}}function Bb(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=ao(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function ao(i,s,o,u,l,d,g,_,w,C){const A=20+u,N=A+l,k=function(i,s){const o=[];for(let u=0;u<s;u++)o.push(u<i?null:At);return o}(A,N),H="function"==typeof C?C():C;return k[1]={type:i,blueprint:k,template:o,queries:null,viewQuery:_,declTNode:s,data:k.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:w,consts:H,incompleteFirstPass:!1}}function Cm(i,s,o,u){const l=Yd(s);null===o?l.push(u):(l.push(o),i.firstCreatePass&&Yb(i).push(u,l.length-1))}function jb(i,s,o){for(let u in i)if(i.hasOwnProperty(u)){const l=i[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(s,l):o[u]=[s,l]}return o}function Ns(i,s,o,u,l,d,g,_){const w=Xn(s,o);let A,C=s.inputs;!_&&null!=C&&(A=C[u])?(Jb(i,o,A,u,l),Lr(s)&&function(i,s){const o=er(s,i);16&o[2]||(o[2]|=64)}(o,s.index)):3&s.type&&(u=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),l=null!=g?g(l,s.value||"",u):l,_n(d)?d.setProperty(w,u,l):Qu(u)||(w.setProperty?w.setProperty(u,l):w[u]=l))}function Dm(i,s,o,u){let l=!1;if(zs()){const d=function(i,s,o){const u=i.directiveRegistry;let l=null;if(u)for(let d=0;d<u.length;d++){const g=u[d];Ab(o,g.selectors,!1)&&(l||(l=[]),Ha(ln(o,s),i,g.type),Dr(g)?(Si(i,o),l.unshift(g)):l.push(g))}return l}(i,s,o),g=null===u?null:{"":-1};if(null!==d){l=!0,Av(o,i.data.length,d.length);for(let A=0;A<d.length;A++){const N=d[A];N.providersResolver&&N.providersResolver(N)}let _=!1,w=!1,C=_a(i,s,d.length,null);for(let A=0;A<d.length;A++){const N=d[A];o.mergedAttrs=aa(o.mergedAttrs,N.hostAttrs),Sv(i,o,s,C,N),zi(C,N,g),null!==N.contentQueries&&(o.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(o.flags|=128);const k=N.type.prototype;!_&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(o.index),_=!0),!w&&(k.ngOnChanges||k.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(o.index),w=!0),C++}!function(i,s){const u=s.directiveEnd,l=i.data,d=s.attrs,g=[];let _=null,w=null;for(let C=s.directiveStart;C<u;C++){const A=l[C],N=A.inputs,k=null===d||gm(s)?null:Rv(N,d);g.push(k),_=jb(N,C,_),w=jb(A.outputs,C,w)}null!==_&&(_.hasOwnProperty("class")&&(s.flags|=16),_.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=g,s.inputs=_,s.outputs=w}(i,o)}g&&function(i,s,o){if(s){const u=i.localNames=[];for(let l=0;l<s.length;l+=2){const d=o[s[l+1]];if(null==d)throw new Ae("301",`Export of name '${s[l+1]}' not found!`);u.push(s[l],d)}}}(o,u,g)}return o.mergedAttrs=aa(o.mergedAttrs,o.attrs),l}function Cv(i,s,o,u,l,d){const g=d.hostBindings;if(g){let _=i.hostBindingOpCodes;null===_&&(_=i.hostBindingOpCodes=[]);const w=~s.index;(function(i){let s=i.length;for(;s>0;){const o=i[--s];if("number"==typeof o&&o<0)return o}return 0})(_)!=w&&_.push(w),_.push(u,l,g)}}function hp(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Si(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function zi(i,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=i;Dr(s)&&(o[""]=i)}}function Av(i,s,o){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+o,i.providerIndexes=s}function Sv(i,s,o,u,l){i.data[u]=l;const d=l.factory||(l.factory=Tr(l.type)),g=new Ei(d,Dr(l),null);i.blueprint[u]=g,o[u]=g,Cv(i,s,0,u,_a(i,o,l.hostVars,At),l)}function xv(i,s,o){const u=Xn(s,i),l=Bb(o),d=i[10],g=Al(i,Tl(i,l,null,o.onPush?64:16,u,s,d,d.createRenderer(u,o),null,null));i[s.index]=g}function Vo(i,s,o,u,l,d){const g=Xn(i,s);!function(i,s,o,u,l,d,g){if(null==d)_n(i)?i.removeAttribute(s,l,o):s.removeAttribute(l);else{const _=null==g?Ce(d):g(d,u||"",l);_n(i)?i.setAttribute(s,l,_,o):o?s.setAttributeNS(o,l,_):s.setAttribute(l,_)}}(s[11],g,d,i.value,o,u,l)}function Gb(i,s,o,u,l,d){const g=d[s];if(null!==g){const _=u.setInput;for(let w=0;w<g.length;){const C=g[w++],A=g[w++],N=g[w++];null!==_?u.setInput(o,N,C,A):o[A]=N}}}function Rv(i,s){let o=null,u=0;for(;u<s.length;){const l=s[u];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,i[l],s[u+1])),u+=2}else u+=2;else u+=4}return o}function qb(i,s,o,u){return new Array(i,!0,!1,s,null,0,u,o,null,null)}function Mv(i,s){const o=er(s,i);if(Ar(o)){const u=o[1];80&o[2]?Zd(u,o,u.template,o[8]):o[5]>0&&Am(o)}}function Am(i){for(let u=Rs(i);null!==u;u=jd(u))for(let l=10;l<u.length;l++){const d=u[l];if(1024&d[2]){const g=d[1];Zd(g,d,g.template,d[8])}else d[5]>0&&Am(d)}const o=i[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=er(o[u],i);Ar(l)&&l[5]>0&&Am(l)}}function fA(i,s){const o=er(s,i),u=o[1];(function(i,s){for(let o=s.length;o<i.blueprint.length;o++)s.push(i.blueprint[o])})(u,o),cp(u,o,o[8])}function Al(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function fp(i){for(;i;){i[2]|=64;const s=Jf(i);if(ad(i)&&!s)return i;i=s}return null}function Ov(i,s,o){const u=s[10];u.begin&&u.begin();try{Zd(i,s,i.template,o)}catch(l){throw Qb(s,l),l}finally{u.end&&u.end()}}function Zb(i){!function(i){for(let s=0;s<i.components.length;s++){const o=i.components[s],u=ob(o),l=u[1];uA(l,u,l.template,o)}}(i[8])}function kv(i,s,o){$u(0),s(i,o)}const xi=(()=>Promise.resolve(null))();function Yd(i){return i[7]||(i[7]=[])}function Yb(i){return i.cleanup||(i.cleanup=[])}function Qb(i,s){const o=i[9],u=o?o.get(so,null):null;u&&u.handleError(s)}function Jb(i,s,o,u,l){for(let d=0;d<o.length;){const g=o[d++],_=o[d++],w=s[g],C=i.data[g];null!==C.setInput?C.setInput(w,l,u,_):w[_]=l}}function uo(i,s,o){const u=Fu(s,i);!function(i,s,o){_n(i)?i.setValue(s,o):s.textContent=o}(i[11],u,o)}function Sl(i,s,o){let u=o?i.styles:null,l=o?i.classes:null,d=0;if(null!==s)for(let g=0;g<s.length;g++){const _=s[g];"number"==typeof _?d=_:1==d?l=ne(l,_):2==d&&(u=ne(u,_+": "+s[++g]+";"))}o?i.styles=u:i.stylesWithoutHost=u,o?i.classes=l:i.classesWithoutHost=l}const fc=new Dn("INJECTOR",-1);class Vv{get(s,o=jn){if(o===jn){const u=new Error(`NullInjectorError: No provider for ${V(s)}!`);throw u.name="NullInjectorError",u}return o}}const Jd=new Dn("Set Injector scope."),gp={},eI={};let Sm;function xm(){return void 0===Sm&&(Sm=new Vv),Sm}function nI(i,s=null,o=null,u){return new Uv(i,o,s||xm(),u)}class Uv{constructor(s,o,u,l=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];o&&cs(o,_=>this.processProvider(_,s,o)),cs([s],_=>this.processInjectorType(_,[],d)),this.records.set(fc,lu(void 0,this));const g=this.records.get(Jd);this.scope=null!=g?g.value:null,this.source=l||("object"==typeof s?null:V(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,o=jn,u=Xe.Default){this.assertNotDestroyed();const l=Ci(this),d=Pn(void 0);try{if(!(u&Xe.SkipSelf)){let _=this.records.get(s);if(void 0===_){const w=("function"==typeof(i=s)||"object"==typeof i&&i instanceof Dn)&&br(s);_=w&&this.injectableDefInScope(w)?lu(mp(s),gp):null,this.records.set(s,_)}if(null!=_)return this.hydrate(s,_)}return(u&Xe.Self?xm():this.parent).get(s,o=u&Xe.Optional&&o===jn?null:o)}catch(g){if("NullInjectorError"===g.name){if((g[Hi]=g[Hi]||[]).unshift(V(s)),l)throw g;return Lf(g,s,"R3InjectorError",this.source)}throw g}finally{Pn(d),Ci(l)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,l)=>s.push(V(l))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,o,u){if(!(s=de(s)))return!1;let l=Gn(s);const d=null==l&&s.ngModule||void 0,g=void 0===d?s:d,_=-1!==u.indexOf(g);if(void 0!==d&&(l=Gn(d)),null==l)return!1;if(null!=l.imports&&!_){let A;u.push(g);try{cs(l.imports,N=>{this.processInjectorType(N,o,u)&&(void 0===A&&(A=[]),A.push(N))})}finally{}if(void 0!==A)for(let N=0;N<A.length;N++){const{ngModule:k,providers:H}=A[N];cs(H,Y=>this.processProvider(Y,k,H||W))}}this.injectorDefTypes.add(g);const w=Tr(g)||(()=>new g);this.records.set(g,lu(w,gp));const C=l.providers;if(null!=C&&!_){const A=s;cs(C,N=>this.processProvider(N,A,C))}return void 0!==d&&void 0!==s.providers}processProvider(s,o,u){let l=xl(s=de(s))?s:de(s&&s.provide);const d=Rm(i=s)?lu(void 0,i.useValue):lu(Xr(i),gp);var i;if(xl(s)||!0!==s.multi)this.records.get(l);else{let g=this.records.get(l);g||(g=lu(void 0,gp,!0),g.factory=()=>Gi(g.multi),this.records.set(l,g)),l=s,g.multi.push(s)}this.records.set(l,d)}hydrate(s,o){return o.value===gp&&(o.value=eI,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(i=o.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const o=de(s.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function mp(i){const s=br(i),o=null!==s?s.factory:Tr(i);if(null!==o)return o;if(i instanceof Dn)throw new Error(`Token ${V(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const u=function(i,s){const o=[];for(let u=0;u<i;u++)o.push(s);return o}(s,"?");throw new Error(`Can't resolve all parameters for ${V(i)}: (${u.join(", ")}).`)}const o=function(i){const s=i&&(i[Un]||i[Zt]);if(s){const o=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(i);return null!==o?()=>o.factory(i):()=>new i}(i);throw new Error("unreachable")}function Xr(i,s,o){let u;if(xl(i)){const l=de(i);return Tr(l)||mp(l)}if(Rm(i))u=()=>de(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...Gi(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))u=()=>vn(de(i.useExisting));else{const l=de(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return Tr(l)||mp(l);u=()=>new l(...Gi(i.deps))}return u}function lu(i,s,o=!1){return{factory:i,value:s,multi:o?[]:void 0}}function Rm(i){return null!==i&&"object"==typeof i&&ls in i}function xl(i){return"function"==typeof i}const Gv=function(i,s,o){return function(i,s=null,o=null,u){const l=nI(i,s,o,u);return l._resolveInjectorDefTypes(),l}({name:o},s,i,o)};let zn=(()=>{class i{static create(o,u){return Array.isArray(o)?Gv(o,u,""):Gv(o.providers,o.parent,o.name||"")}}return i.THROW_IF_NOT_FOUND=jn,i.NULL=new Vv,i.\u0275prov=dn({token:i,providedIn:"any",factory:()=>vn(fc)}),i.__NG_ELEMENT_ID__=-1,i})();function wA(i,s){Wn(ob(i)[1],Sn())}function rh(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),o=!0;const u=[i];for(;s;){let l;if(Dr(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");l=s.\u0275dir}if(l){if(o){u.push(l);const g=i;g.inputs=hu(i.inputs),g.declaredInputs=hu(i.declaredInputs),g.outputs=hu(i.outputs);const _=l.hostBindings;_&&nE(i,_);const w=l.viewQuery,C=l.contentQueries;if(w&&tE(i,w),C&&bA(i,C),L(i.inputs,l.inputs),L(i.declaredInputs,l.declaredInputs),L(i.outputs,l.outputs),Dr(l)&&l.data.animation){const A=i.data;A.animation=(A.animation||[]).concat(l.data.animation)}}const d=l.features;if(d)for(let g=0;g<d.length;g++){const _=d[g];_&&_.ngInherit&&_(i),_===rh&&(o=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,o=null;for(let u=i.length-1;u>=0;u--){const l=i[u];l.hostVars=s+=l.hostVars,l.hostAttrs=aa(l.hostAttrs,o=aa(o,l.hostAttrs))}}(u)}function hu(i){return i===J?{}:i===W?[]:i}function tE(i,s){const o=i.viewQuery;i.viewQuery=o?(u,l)=>{s(u,l),o(u,l)}:s}function bA(i,s){const o=i.contentQueries;i.contentQueries=o?(u,l,d)=>{s(u,l,d),o(u,l,d)}:s}function nE(i,s){const o=i.hostBindings;i.hostBindings=o?(u,l)=>{s(u,l),o(u,l)}:s}let Dp=null;function sh(){if(!Dp){const i=ut.Symbol;if(i&&i.iterator)Dp=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Dp=u)}}}return Dp}function gc(i){return!!Vm(i)&&(Array.isArray(i)||!(i instanceof Map)&&sh()in i)}function Vm(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ri(i,s,o){return!Object.is(i[s],o)&&(i[s]=o,!0)}function iE(i,s,o,u){const l=Ie();return Ri(l,Ui(),s)&&(Vt(),Vo(xn(),l,i,s,o,u)),iE}function oh(i,s,o,u){return Ri(i,Ui(),o)?s+Ce(o)+u:At}function lE(i,s,o,u,l,d,g,_){const w=Ie(),C=Vt(),A=i+20,N=C.firstCreatePass?function(i,s,o,u,l,d,g,_,w){const C=s.consts,A=zd(s,i,4,g||null,Is(C,_));Dm(s,o,A,Is(C,w)),Wn(s,A);const N=A.tViews=ao(2,A,u,l,d,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,A),N.queries=s.queries.embeddedTView(A)),A}(A,C,w,s,o,u,l,d,g):C.data[A];Vi(N,!1);const k=w[11].createComment("");Hd(C,w,k,N),hi(k,w),Al(w,w[A]=qb(k,w,k,N)),Ru(N)&&Ub(C,w,N),null!=g&&wv(w,N,_)}function Bm(i){return function(i,s){return i[s]}(ft.lFrame.contextLView,20+i)}function fh(i,s=Xe.Default){const o=Ie();return null===o?vn(i,s):bi(Sn(),o,de(i),s)}function Ec(i,s,o){const u=Ie();return Ri(u,Ui(),s)&&Ns(Vt(),xn(),u,i,s,u[11],o,!1),Ec}function _E(i,s,o,u,l){const g=l?"class":"style";Jb(i,o,s.inputs[g],g,u)}function xp(i,s,o,u){const l=Ie(),d=Vt(),g=20+i,_=l[11],w=l[g]=J_(_,s,ft.lFrame.currentNamespace),C=d.firstCreatePass?function(i,s,o,u,l,d,g){const _=s.consts,C=zd(s,i,2,l,Is(_,d));return Dm(s,o,C,Is(_,g)),null!==C.attrs&&Sl(C,C.attrs,!1),null!==C.mergedAttrs&&Sl(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(g,d,l,0,s,o,u):d.data[g];Vi(C,!0);const A=C.mergedAttrs;null!==A&&Yu(_,w,A);const N=C.classes;null!==N&&uv(_,w,N);const k=C.styles;null!==k&&Cb(_,w,k),64!=(64&C.flags)&&Hd(d,l,w,C),0===ft.lFrame.elementDepthCount&&hi(w,l),ft.lFrame.elementDepthCount++,Ru(C)&&(Ub(d,l,C),function(i,s,o){if(od(s)){const l=s.directiveEnd;for(let d=s.directiveStart;d<l;d++){const g=i.data[d];g.contentQueries&&g.contentQueries(1,o[d],d)}}}(d,C,l)),null!==u&&wv(l,C)}function vE(){let i=Sn();ra()?ft.lFrame.isParent=!1:(i=i.parent,Vi(i,!1));const s=i;ft.lFrame.elementDepthCount--;const o=Vt();o.firstCreatePass&&(Wn(o,i),od(i)&&o.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&_E(o,s,Ie(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&_E(o,s,Ie(),s.stylesWithoutHost,!1)}function RI(i,s,o,u){xp(i,s,o,u),vE()}function Br(){return Ie()}function wc(i){return!!i&&"function"==typeof i.then}function pu(i){return!!i&&"function"==typeof i.subscribe}const Mp=pu;function EE(i,s,o,u){const l=Ie(),d=Vt(),g=Sn();return function(i,s,o,u,l,d,g,_){const w=Ru(u),A=i.firstCreatePass&&Yb(i),N=s[8],k=Yd(s);let H=!0;if(3&u.type||_){const ie=Xn(u,s),Fe=_?_(ie):ie,Ee=k.length,ot=_?vt=>_(kn(vt[u.index])):u.index;if(_n(o)){let vt=null;if(!_&&w&&(vt=function(i,s,o,u){const l=i.cleanup;if(null!=l)for(let d=0;d<l.length-1;d+=2){const g=l[d];if(g===o&&l[d+1]===u){const _=s[7],w=l[d+2];return _.length>w?_[w]:null}"string"==typeof g&&(d+=2)}return null}(i,s,l,u.index)),null!==vt)(vt.__ngLastListenerFn__||vt).__ngNextListenerFn__=d,vt.__ngLastListenerFn__=d,H=!1;else{d=Je(u,s,N,d,!1);const Gt=o.listen(Fe,l,d);k.push(d,Gt),A&&A.push(l,ot,Ee,Ee+1)}}else d=Je(u,s,N,d,!0),Fe.addEventListener(l,d,g),k.push(d),A&&A.push(l,ot,Ee,g)}else d=Je(u,s,N,d,!1);const Y=u.outputs;let he;if(H&&null!==Y&&(he=Y[l])){const ie=he.length;if(ie)for(let Fe=0;Fe<ie;Fe+=2){const On=s[he[Fe]][he[Fe+1]].subscribe(d),Fi=k.length;k.push(d,On),A&&A.push(l,u.index,Fi,-(Fi+1))}}}(d,l,l[11],g,i,s,!!o,u),EE}function Jm(i,s,o,u){try{return!1!==o(u)}catch(l){return Qb(i,l),!1}}function Je(i,s,o,u,l){return function d(g){if(g===Function)return u;const _=2&i.flags?er(i.index,s):s;0==(32&s[2])&&fp(_);let w=Jm(s,0,u,g),C=d.__ngNextListenerFn__;for(;C;)w=Jm(s,0,C,g)&&w,C=C.__ngNextListenerFn__;return l&&!1===w&&(g.preventDefault(),g.returnValue=!1),w}}function xe(i,s,o){return Mr(i,"",s,"",o),xe}function Mr(i,s,o,u,l){const d=Ie(),g=oh(d,s,o,u);return g!==At&&Ns(Vt(),xn(),d,i,g,d[11],l,!1),Mr}function Ot(i,s,o,u,l){const d=i[o+1],g=null===s;let _=u?Ms(d):ya(d),w=!1;for(;0!==_&&(!1===w||g);){const A=i[_+1];gh(i[_],s)&&(w=!0,i[_+1]=u?_m(A):hv(A)),_=u?Ms(A):ya(A)}w&&(i[o+1]=u?hv(d):_m(d))}function gh(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&I(i,s)>=0}function kp(i,s){return function(i,s,o,u){const l=Ie(),d=Vt(),g=function(i){const s=ft.lFrame,o=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,o}(2);d.firstUpdatePass&&function(i,s,o,u){const l=i.data;if(null===l[o+1]){const d=l[cr()],g=function(i,s){return s>=i.expandoStartIndex}(i,o);(function(i,s){return 0!=(i.flags&(s?16:32))})(d,u)&&null===s&&!g&&(s=!1),s=function(i,s,o,u){const l=function(i){const s=ft.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let d=u?s.residualClasses:s.residualStyles;if(null===l)0===(u?s.classBindings:s.styleBindings)&&(o=Vl(o=Xm(null,i,s,o,u),s.attrs,u),d=null);else{const g=s.directiveStylingLast;if(-1===g||i[g]!==l)if(o=Xm(l,i,s,o,u),null===d){let w=function(i,s,o){const u=o?s.classBindings:s.styleBindings;if(0!==ya(u))return i[Ms(u)]}(i,s,u);void 0!==w&&Array.isArray(w)&&(w=Xm(null,i,s,w[1],u),w=Vl(w,s.attrs,u),function(i,s,o,u){i[Ms(o?s.classBindings:s.styleBindings)]=u}(i,s,u,w))}else d=function(i,s,o){let u;const l=s.directiveEnd;for(let d=1+s.directiveStylingLast;d<l;d++)u=Vl(u,i[d].hostAttrs,o);return Vl(u,s.attrs,o)}(i,s,u)}return void 0!==d&&(u?s.residualClasses=d:s.residualStyles=d),o}(l,d,s,u),function(i,s,o,u,l,d){let g=d?s.classBindings:s.styleBindings,_=Ms(g),w=ya(g);i[u]=o;let A,C=!1;if(Array.isArray(o)){const N=o;A=N[1],(null===A||I(N,A)>0)&&(C=!0)}else A=o;if(l)if(0!==w){const k=Ms(i[_+1]);i[u+1]=op(k,_),0!==k&&(i[k+1]=ym(i[k+1],u)),i[_+1]=function(i,s){return 131071&i|s<<17}(i[_+1],u)}else i[u+1]=op(_,0),0!==_&&(i[_+1]=ym(i[_+1],u)),_=u;else i[u+1]=op(w,0),0===_?_=u:i[w+1]=ym(i[w+1],u),w=u;C&&(i[u+1]=hv(i[u+1])),Ot(i,A,u,!0),Ot(i,A,u,!1),function(i,s,o,u,l){const d=l?i.residualClasses:i.residualStyles;null!=d&&"string"==typeof s&&I(d,s)>=0&&(o[u+1]=_m(o[u+1]))}(s,A,i,u,d),g=op(_,w),d?s.classBindings=g:s.styleBindings=g}(l,d,s,o,g,u)}}(d,i,g,u),s!==At&&Ri(l,g,s)&&function(i,s,o,u,l,d,g,_){if(!(3&s.type))return;const w=i.data,C=w[_+1];Lp(function(i){return 1==(1&i)}(C)?Cc(w,s,o,l,ya(C),g):void 0)||(Lp(d)||function(i){return 2==(2&i)}(C)&&(d=Cc(w,null,o,l,_,g)),function(i,s,o,u,l){const d=_n(i);if(s)l?d?i.addClass(o,u):o.classList.add(u):d?i.removeClass(o,u):o.classList.remove(u);else{let g=-1===u.indexOf("-")?void 0:Ti.DashCase;if(null==l)d?i.removeStyle(o,u,g):o.style.removeProperty(u);else{const _="string"==typeof l&&l.endsWith("!important");_&&(l=l.slice(0,-10),g|=Ti.Important),d?i.setStyle(o,u,l,g):o.style.setProperty(u,l,_?"important":"")}}}(u,g,Fu(cr(),o),l,d))}(d,d.data[cr()],l,l[11],i,l[g+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=V(Ss(i)))),i}(s,o),u,g)}(i,s,null,!0),kp}function Xm(i,s,o,u,l){let d=null;const g=o.directiveEnd;let _=o.directiveStylingLast;for(-1===_?_=o.directiveStart:_++;_<g&&(d=s[_],u=Vl(u,d.hostAttrs,l),d!==i);)_++;return null!==i&&(o.directiveStylingLast=_),u}function Vl(i,s,o){const u=o?1:2;let l=-1;if(null!==s)for(let d=0;d<s.length;d++){const g=s[d];"number"==typeof g?l=g:l===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Zr(i,g,!!o||s[++d]))}return void 0===i?null:i}function Cc(i,s,o,u,l,d){const g=null===s;let _;for(;l>0;){const w=i[l],C=Array.isArray(w),A=C?w[1]:w,N=null===A;let k=o[l+1];k===At&&(k=N?W:void 0);let H=N?Ff(k,u):A===u?k:void 0;if(C&&!Lp(H)&&(H=Ff(w,u)),Lp(H)&&(_=H,g))return _;const Y=i[l+1];l=g?Ms(Y):ya(Y)}if(null!==s){let w=d?s.residualClasses:s.residualStyles;null!=w&&(_=Ff(w,u))}return _}function Lp(i){return void 0!==i}function ei(i,s=""){const o=Ie(),u=Vt(),l=i+20,d=u.firstCreatePass?zd(u,l,1,s,null):u.data[l],g=o[l]=function(i,s){return _n(i)?i.createText(s):i.createTextNode(s)}(o[11],s);Hd(u,o,g,d),Vi(d,!1)}function En(i){return ey("",i,""),En}function ey(i,s,o){const u=Ie(),l=oh(u,i,s,o);return l!==At&&uo(u,cr(),l),ey}function ry(i,s,o){const u=Ie();return Ri(u,Ui(),s)&&Ns(Vt(),xn(),u,i,s,u[11],o,!0),ry}const ir=void 0;var Vn=["en",[["a","p"],["AM","PM"],ir],[["AM","PM"],ir,ir],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ir,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ir,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ir,"{1} 'at' {0}",ir],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),o=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===o?1:5}];let vh={};function _u(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let o=Gp(s);if(o)return o;const u=s.split("-")[0];if(o=Gp(u),o)return o;if("en"===u)return Vn;throw new Error(`Missing locale data for the locale "${i}".`)}function Eh(i){return _u(i)[mt.PluralCase]}function Gp(i){return i in vh||(vh[i]=ut.ng&&ut.ng.common&&ut.ng.common.locales&&ut.ng.common.locales[i]),vh[i]}var mt=(()=>((mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt))();const iy="en-US";let JI=iy;function wa(i){An(i,"Expected localeId to be defined"),"string"==typeof i&&(JI=i.toLowerCase().replace(/_/g,"-"))}function hy(i,s,o,u,l){if(i=de(i),Array.isArray(i))for(let d=0;d<i.length;d++)hy(i[d],s,o,u,l);else{const d=Vt(),g=Ie();let _=xl(i)?i:de(i.provide),w=Xr(i);const C=Sn(),A=1048575&C.providerIndexes,N=C.directiveStart,k=C.providerIndexes>>20;if(xl(i)||!i.multi){const H=new Ei(w,l,fh),Y=KE(_,s,l?A:A+k,N);-1===Y?(Ha(ln(C,g),d,_),ZE(d,i,s.length),s.push(_),C.directiveStart++,C.directiveEnd++,l&&(C.providerIndexes+=1048576),o.push(H),g.push(H)):(o[Y]=H,g[Y]=H)}else{const H=KE(_,s,A+k,N),Y=KE(_,s,A,A+k),he=H>=0&&o[H],ie=Y>=0&&o[Y];if(l&&!ie||!l&&!he){Ha(ln(C,g),d,_);const Fe=function(i,s,o,u,l){const d=new Ei(i,o,fh);return d.multi=[],d.index=s,d.componentProviders=0,pC(d,l,u&&!o),d}(l?gC:Jp,o.length,l,u,w);!l&&ie&&(o[Y].providerFactory=Fe),ZE(d,i,s.length,0),s.push(_),C.directiveStart++,C.directiveEnd++,l&&(C.providerIndexes+=1048576),o.push(Fe),g.push(Fe)}else ZE(d,i,H>-1?H:Y,pC(o[l?Y:H],w,!l&&u));!l&&u&&ie&&o[Y].componentProviders++}}}function ZE(i,s,o,u){const l=xl(s);if(l||function(i){return!!i.useClass}(s)){const g=(s.useClass||s).prototype.ngOnDestroy;if(g){const _=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const w=_.indexOf(o);-1===w?_.push(o,[u,g]):_[w+1].push(u,g)}else _.push(o,g)}}}function pC(i,s,o){return o&&i.componentProviders++,i.multi.push(s)-1}function KE(i,s,o,u){for(let l=o;l<u;l++)if(s[l]===i)return l;return-1}function Jp(i,s,o,u){return YE(this.multi,[])}function gC(i,s,o,u){const l=this.multi;let d;if(this.providerFactory){const g=this.providerFactory.componentProviders,_=Rn(o,o[1],this.providerFactory.index,u);d=_.slice(0,g),YE(l,d);for(let w=g;w<_.length;w++)d.push(_[w])}else d=[],YE(l,d);return d}function YE(i,s){for(let o=0;o<i.length;o++)s.push((0,i[o])());return s}function fy(i,s=[]){return o=>{o.providersResolver=(u,l)=>function(i,s,o){const u=Vt();if(u.firstCreatePass){const l=Dr(i);hy(o,u.data,u.blueprint,l,!0),hy(s,u.data,u.blueprint,l,!1)}}(u,l?l(i):i,s)}}class Oh{}const py="ngComponent";class Xp{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${V(i)}. Did you add it to @NgModule.entryComponents?`);return s[py]=i,s}(s)}}let ql=(()=>{class i{}return i.NULL=new Xp,i})();function my(...i){}function Ca(i,s){return new Go(Xn(i,s))}const yC=function(){return Ca(Sn(),Ie())};let Go=(()=>{class i{constructor(o){this.nativeElement=o}}return i.__NG_ELEMENT_ID__=yC,i})();function JE(i){return i instanceof Go?i.nativeElement:i}class eg{}let sS=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>Ph(),i})();const Ph=function(){const i=Ie(),o=er(Sn().index,i);return function(i){return i[11]}(is(o)?o:i)};let XE=(()=>{class i{}return i.\u0275prov=dn({token:i,providedIn:"root",factory:()=>null}),i})();class ew{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const gi=new ew("12.2.16");class _C{constructor(){}supports(s){return gc(s)}create(s){return new EC(s)}}const vC=(i,s)=>s;class EC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||vC}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,l=0,d=null;for(;o||u;){const g=!u||o&&o.currentIndex<IC(u,l,d)?o:u,_=IC(g,l,d),w=g.currentIndex;if(g===u)l--,u=u._nextRemoved;else if(o=o._next,null==g.previousIndex)l++;else{d||(d=[]);const C=_-l,A=w-l;if(C!=A){for(let k=0;k<C;k++){const H=k<d.length?d[k]:d[k]=0,Y=H+k;A<=Y&&Y<C&&(d[k]=H+1)}d[g.previousIndex]=A-C}}_!==w&&s(g,_,w)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!gc(s))throw new Error(`Error trying to diff '${V(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,d,g,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let _=0;_<this.length;_++)d=s[_],g=this._trackByFn(_,d),null!==o&&Object.is(o.trackById,g)?(u&&(o=this._verifyReinsertion(o,d,g,_)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,g,_),u=!0),o=o._next}else l=0,function(i,s){if(Array.isArray(i))for(let o=0;o<i.length;o++)s(i[o]);else{const o=i[sh()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,_=>{g=this._trackByFn(l,_),null!==o&&Object.is(o.trackById,g)?(u&&(o=this._verifyReinsertion(o,_,g,l)),Object.is(o.item,_)||this._addIdentityChange(o,_)):(o=this._mismatch(o,_,g,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,l){let d;return null===s?d=this._itTail:(d=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,d,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,d,l)):s=this._addAfter(new yy(o,u),d,l),s}_verifyReinsertion(s,o,u,l){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?s=this._reinsertAfter(d,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,d=s._nextRemoved;return null===l?this._removalsHead=d:l._nextRemoved=d,null===d?this._removalsTail=l:d._prevRemoved=l,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const l=null===o?this._itHead:o._next;return s._next=l,s._prev=o,null===l?this._itTail=s:l._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new bC),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bC),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class yy{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class bC{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new wC,this.map.set(o,u)),u.add(s)}get(s,o){const l=this.map.get(s);return l?l.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function IC(i,s,o){const u=i.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+s+l}class CC{constructor(){}supports(s){return s instanceof Map||Vm(s)}create(){return new cS}}class cS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||Vm(s)))throw new Error(`Error trying to diff '${V(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,o);const d=l._prev,g=l._next;return d&&(d._next=g),g&&(g._prev=d),l._next=null,l._prev=null,l}const u=new lS(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class lS{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function DC(){return new _y([new _C])}let _y=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||DC()),deps:[[i,new ds,new As]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(i){return i.name||typeof i}(o)}'`)}}return i.\u0275prov=dn({token:i,providedIn:"root",factory:DC}),i})();function TC(){return new vy([new CC])}let vy=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||TC()),deps:[[i,new ds,new As]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return i.\u0275prov=dn({token:i,providedIn:"root",factory:TC}),i})();function Ey(i,s,o,u,l=!1){for(;null!==o;){const d=s[o.index];if(null!==d&&u.push(kn(d)),vi(d))for(let _=10;_<d.length;_++){const w=d[_],C=w[1].firstChild;null!==C&&Ey(w[1],w,C,u)}const g=o.type;if(8&g)Ey(i,s,o.child,u);else if(32&g){const _=$t(o,s);let w;for(;w=_();)u.push(w)}else if(16&g){const _=Gd(s,o);if(Array.isArray(_))u.push(..._);else{const w=Jf(s[16]);Ey(w[1],w,_,u,!0)}}o=l?o.projectionNext:o.next}return u}class ng{constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,o=s[1];return Ey(o,s,o.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(vi(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(ep(s,u),ro(o,u))}this._attachedToViewContainer=!1}lm(this._lView[1],this._lView)}onDestroy(s){Cm(this._lView[1],this._lView,null,s)}markForCheck(){fp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ov(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,o){La(!0);try{Ov(i,s,o)}finally{La(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,ip(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class hS extends ng{constructor(s){super(s),this._view=s}detectChanges(){Zb(this._view)}checkNoChanges(){!function(i){La(!0);try{Zb(i)}finally{La(!1)}}(this._view)}get context(){return null}}const AC=function(i){return function(i,s,o){if(Lr(i)&&!o){const u=er(i.index,s);return new ng(u,u)}return 47&i.type?new ng(s[16],s):null}(Sn(),Ie(),16==(16&i))};let pS=(()=>{class i{}return i.__NG_ELEMENT_ID__=AC,i})();const gS=[new CC],ni=new _y([new _C]),nw=new vy(gS),xc=function(){return Da(Sn(),Ie())};let kh=(()=>{class i{}return i.__NG_ELEMENT_ID__=xc,i})();const mS=kh,MC=class extends mS{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s){const o=this._declarationTContainer.tViews,u=Tl(this._declarationLView,o,s,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(u[19]=d.createEmbeddedView(o)),cp(o,u,s),new ng(u)}};function Da(i,s){return 4&i.type?new MC(s,i,Ca(i,s)):null}class Ps{}class Rc{}const iw=function(){return ig(Sn(),Ie())};let Fh=(()=>{class i{}return i.__NG_ELEMENT_ID__=iw,i})();const OC=Fh,PC=class extends OC{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return Ca(this._hostTNode,this._hostLView)}get injector(){return new Mn(this._hostTNode,this._hostLView)}get parentInjector(){const s=xo(this._hostTNode,this._hostLView);if(wd(s)){const o=So(s,this._hostLView),u=Js(s);return new Mn(o[1].data[u+8],o)}return new Mn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=sw(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){const l=s.createEmbeddedView(o||{});return this.insert(l,u),l}createComponent(s,o,u,l,d){const g=u||this.parentInjector;if(!d&&null==s.ngModule&&g){const w=g.get(Ps,null);w&&(d=w)}const _=s.create(g,l,void 0,d);return this.insert(_.hostView,o),_}insert(s,o){const u=s._lView,l=u[1];if(vi(u[3])){const A=this.indexOf(s);if(-1!==A)this.detach(A);else{const N=u[3],k=new PC(N,N[6],N[3]);k.detach(k.indexOf(s))}}const d=this._adjustIndex(o),g=this._lContainer;!function(i,s,o,u){const l=10+u,d=o.length;u>0&&(o[l-1][4]=s),u<d-10?(s[4]=o[l],No(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const g=s[17];null!==g&&o!==g&&function(i,s){const o=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===o?i[9]=[s]:o.push(s)}(g,s);const _=s[19];null!==_&&_.insertView(i),s[2]|=128}(l,u,g,d);const _=iv(d,g),w=u[11],C=dm(w,g[7]);return null!==C&&function(i,s,o,u,l,d){u[0]=l,u[6]=s,ip(i,u,o,1,l,d)}(l,g[6],w,u,C,_),s.attachToViewContainerRef(),No(by(g),d,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=sw(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=ep(this._lContainer,o);u&&(ro(by(this._lContainer),o),lm(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=ep(this._lContainer,o);return u&&null!=ro(by(this._lContainer),o)?new ng(u):null}_adjustIndex(s,o=0){return null==s?this.length+o:s}};function sw(i){return i[8]}function by(i){return i[8]||(i[8]=[])}function ig(i,s){let o;const u=s[i.index];if(vi(u))o=u;else{let l;if(8&i.type)l=kn(u);else{const d=s[11];l=d.createComment("");const g=Xn(i,s);Lo(d,dm(d,g),l,function(i,s){return _n(i)?i.nextSibling(s):s.nextSibling}(d,g),!1)}s[i.index]=o=qb(u,s,l,i),Al(s,o)}return new PC(o,i,s)}const zh={};class pg extends ql{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=gn(s);return new Uy(o,this.ngModule)}}function Kh(i){const s=[];for(let o in i)i.hasOwnProperty(o)&&s.push({propName:i[o],templateName:o});return s}const QC=new Dn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>gb});class Uy extends Oh{constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=s.selectors.map(QT).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return Kh(this.componentDef.inputs)}get outputs(){return Kh(this.componentDef.outputs)}create(s,o,u,l){const d=(l=l||this.ngModule)?function(i,s){return{get:(o,u,l)=>{const d=i.get(o,zh,l);return d!==zh||u===zh?d:s.get(o,u,l)}}}(s,l.injector):s,g=d.get(eg,Io),_=d.get(XE,null),w=g.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",A=u?function(i,s,o){if(_n(i))return i.selectRootElement(s,o===sn.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(w,u,this.componentDef.encapsulation):J_(g.createRenderer(null,this.componentDef),C,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(C)),N=this.componentDef.onPush?576:528,k=function(i,s){return{components:[],scheduler:i||gb,clean:xi,playerHandler:s||null,flags:0}}(),H=ao(0,null,null,1,0,null,null,null,null,null),Y=Tl(null,H,k,N,null,null,g,w,_,d);let he,ie;ia(Y);try{const Fe=function(i,s,o,u,l,d){const g=o[1];o[20]=i;const w=zd(g,20,2,"#host",null),C=w.mergedAttrs=s.hostAttrs;null!==C&&(Sl(w,C,!0),null!==i&&(Yu(l,i,C),null!==w.classes&&uv(l,i,w.classes),null!==w.styles&&Cb(l,i,w.styles)));const A=u.createRenderer(i,s),N=Tl(o,Bb(s),null,s.onPush?64:16,o[20],w,u,A,d||null,null);return g.firstCreatePass&&(Ha(ln(w,o),g,s.type),Si(g,w),Av(w,o.length,1)),Al(o,N),o[20]=N}(A,this.componentDef,Y,g,w);if(A)if(u)Yu(w,A,["ng-version",gi.full]);else{const{attrs:Ee,classes:ot}=function(i){const s=[],o=[];let u=1,l=2;for(;u<i.length;){let d=i[u];if("string"==typeof d)2===l?""!==d&&s.push(d,i[++u]):8===l&&o.push(d);else{if(!oo(l))break;l=d}u++}return{attrs:s,classes:o}}(this.componentDef.selectors[0]);Ee&&Yu(w,A,Ee),ot&&ot.length>0&&uv(w,A,ot.join(" "))}if(ie=Co(H,20),void 0!==o){const Ee=ie.projection=[];for(let ot=0;ot<this.ngContentSelectors.length;ot++){const vt=o[ot];Ee.push(null!=vt?Array.from(vt):null)}}he=function(i,s,o,u,l){const d=o[1],g=function(i,s,o){const u=Sn();i.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Sv(i,u,s,_a(i,s,1,null),o));const l=Rn(s,i,u.directiveStart,u);hi(l,s);const d=Xn(u,s);return d&&hi(d,s),l}(d,o,s);if(u.components.push(g),i[8]=g,l&&l.forEach(w=>w(g,s)),s.contentQueries){const w=Sn();s.contentQueries(1,g,w.directiveStart)}const _=Sn();return!d.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(sa(_.index),Cv(o[1],_,0,_.directiveStart,_.directiveEnd,s),hp(s,g)),g}(Fe,this.componentDef,Y,k,[wA]),cp(H,Y,null)}finally{$a()}return new FS(this.componentType,he,Ca(ie,Y),Y,ie)}}class FS extends class{}{constructor(s,o,u,l,d){super(),this.location=u,this._rootLView=l,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new hS(l),this.componentType=s}get injector(){return new Mn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const Yh=new Map;class eD extends Ps{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new pg(this);const u=kr(s),l=s[Dt]||null;l&&wa(l),this._bootstrapComponents=ou(u.bootstrap),this._r3Injector=nI(s,o,[{provide:Ps,useValue:this},{provide:ql,useValue:this.componentFactoryResolver}],V(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,o=zn.THROW_IF_NOT_FOUND,u=Xe.Default){return s===zn||s===Ps||s===fc?this:this._r3Injector.get(s,o,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Vc extends Rc{constructor(s){super(),this.moduleType=s,null!==kr(s)&&function(i){const s=new Set;!function o(u){const l=kr(u,!0),d=l.id;null!==d&&(function(i,s,o){if(s&&s!==o)throw new Error(`Duplicate module registered for ${i} - ${V(s)} vs ${V(s.name)}`)}(d,Yh.get(d),u),Yh.set(d,u));const g=ou(l.imports);for(const _ of g)s.has(_)||(s.add(_),o(_))}(i)}(s)}create(s){return new eD(this.moduleType,s)}}function jy(i,s,o){const u=function(){const i=ft.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}()+i,l=Ie();return l[u]===At?function(i,s,o){return i[s]=o}(l,u,o?s.call(o):s()):function(i,s){return i[s]}(l,u)}function mg(i){return s=>{setTimeout(i,void 0,s)}}const fo=class extends f.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){var l,d,g;let _=s,w=o||(()=>null),C=u;if(s&&"object"==typeof s){const N=s;_=null===(l=N.next)||void 0===l?void 0:l.bind(N),w=null===(d=N.error)||void 0===d?void 0:d.bind(N),C=null===(g=N.complete)||void 0===g?void 0:g.bind(N)}this.__isAsync&&(w=mg(w),_&&(_=mg(_)),C&&(C=mg(C)));const A=super.subscribe({next:_,error:w,complete:C});return s instanceof j.w&&s.add(A),A}};function Vw(){return this._results[sh()]()}class ef{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=sh(),u=ef.prototype;u[o]||(u[o]=Vw)}get changes(){return this._changes||(this._changes=new fo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,o){return this._results.reduce(s,o)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,o){const u=this;u.dirty=!1;const l=Sr(s);(this._changesDetected=!function(i,s,o){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let l=i[u],d=s[u];if(o&&(l=o(l),d=o(d)),d!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class yg{constructor(s){this.queryList=s,this.matches=null}clone(){return new yg(this.queryList)}setDirty(){this.queryList.setDirty()}}class Uw{constructor(s=[]){this.queries=s}createEmbeddedView(s){const o=s.queries;if(null!==o){const u=null!==s.contentQueries?s.contentQueries[0]:o.length,l=[];for(let d=0;d<u;d++){const g=o.getByIndex(d);l.push(this.queries[g.indexInDeclarationView].clone())}return new Uw(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let o=0;o<this.queries.length;o++)null!==qw(s,o).matches&&this.queries[o].setDirty()}}class Bw{constructor(s,o,u=null){this.predicate=s,this.flags=o,this.read=u}}class jw{constructor(s=[]){this.queries=s}elementStart(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,o)}elementEnd(s){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(s)}embeddedTView(s){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,d=this.getByIndex(u).embeddedTView(s,l);d&&(d.indexInDeclarationView=u,null!==o?o.push(d):o=[d])}return null!==o?new jw(o):null}template(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,o)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class qy{constructor(s,o=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(s,o){this.isApplyingToNode(o)&&this.matchTNode(s,o)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,o){this.elementStart(s,o)}embeddedTView(s,o){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,o),new qy(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const d=u[l];this.matchTNodeWithReadOption(s,o,oD(o,d)),this.matchTNodeWithReadOption(s,o,ua(o,s,d,!1,!1))}else u===kh?4&o.type&&this.matchTNodeWithReadOption(s,o,-1):this.matchTNodeWithReadOption(s,o,ua(o,s,u,!1,!1))}matchTNodeWithReadOption(s,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===Go||l===Fh||l===kh&&4&o.type)this.addMatch(o.index,-2);else{const d=ua(o,s,l,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,u)}}addMatch(s,o){null===this.matches?this.matches=[s,o]:this.matches.push(s,o)}}function oD(i,s){const o=i.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===s)return o[u+1];return null}function uD(i,s,o,u){return-1===o?function(i,s){return 11&i.type?Ca(i,s):4&i.type?Da(i,s):null}(s,i):-2===o?function(i,s,o){return o===Go?Ca(s,i):o===kh?Da(s,i):o===Fh?ig(s,i):void 0}(i,s,u):Rn(i,i[1],o,s)}function cD(i,s,o,u){const l=s[19].queries[u];if(null===l.matches){const d=i.data,g=o.matches,_=[];for(let w=0;w<g.length;w+=2){const C=g[w];_.push(C<0?null:uD(s,d[C],g[w+1],o.metadata.read))}l.matches=_}return l.matches}function $w(i,s,o,u){const l=i.queries.getByIndex(o),d=l.matches;if(null!==d){const g=cD(i,s,l,o);for(let _=0;_<d.length;_+=2){const w=d[_];if(w>0)u.push(g[_/2]);else{const C=d[_+1],A=s[-w];for(let N=10;N<A.length;N++){const k=A[N];k[17]===k[3]&&$w(k[1],k,C,u)}if(null!==A[9]){const N=A[9];for(let k=0;k<N.length;k++){const H=N[k];$w(H[1],H,C,u)}}}}}return u}function lD(i){const s=Ie(),o=Vt(),u=Ba();$u(u+1);const l=qw(o,u);if(i.dirty&&ka(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const d=l.crossesNgTemplate?$w(o,s,u,[]):cD(o,s,l,u);i.reset(d,JE),i.notifyOnChanges()}return!0}return!1}function Wy(i,s,o,u){const l=Vt();if(l.firstCreatePass){const d=Sn();(function(i,s,o){null===i.queries&&(i.queries=new jw),i.queries.track(new qy(s,o))})(l,new Bw(s,o,u),d.index),function(i,s){const o=i.contentQueries||(i.contentQueries=[]);s!==(o.length?o[o.length-1]:-1)&&o.push(i.queries.length-1,s)}(l,i),2==(2&o)&&(l.staticContentQueries=!0)}!function(i,s,o){const u=new ef(4==(4&o));Cm(i,s,u,u.destroy),null===s[19]&&(s[19]=new Uw),s[19].queries.push(new yg(u))}(l,Ie(),o)}function zy(){return i=Ie(),s=Ba(),i[19].queries[s].queryList;var i,s}function qw(i,s){return i.queries.getByIndex(s)}const Qt=new Dn("Application Initializer");let Jl=(()=>{class i{constructor(o){this.appInits=o,this.resolve=my,this.reject=my,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const d=this.appInits[l]();if(wc(d))o.push(d);else if(Mp(d)){const g=new Promise((_,w)=>{d.subscribe({complete:_,error:w})});o.push(g)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return i.\u0275fac=function(o){return new(o||i)(vn(Qt,8))},i.\u0275prov=dn({token:i,factory:i.\u0275fac}),i})();const a0=new Dn("AppId"),gx={provide:a0,useFactory:function(){return`${Nn()}${Nn()}${Nn()}`},deps:[]};function Nn(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yi=new Dn("Platform Initializer"),zo=new Dn("Platform ID"),u0=new Dn("appBootstrapListener");let Cg=(()=>{class i{log(o){console.log(o)}warn(o){console.warn(o)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=dn({token:i,factory:i.\u0275fac}),i})();const Dg=new Dn("LocaleId"),c0=new Dn("DefaultCurrencyCode");class vM{constructor(s,o){this.ngModuleFactory=s,this.componentFactories=o}}const d0=function(i){return new Vc(i)},_x=d0,Ex=function(i){return Promise.resolve(d0(i))},ND=function(i){const s=d0(i),u=ou(kr(i).declarations).reduce((l,d)=>{const g=gn(d);return g&&l.push(new Uy(g)),l},[]);return new vM(s,u)},bM=ND,OD=function(i){return Promise.resolve(ND(i))};let Ls=(()=>{class i{constructor(){this.compileModuleSync=_x,this.compileModuleAsync=Ex,this.compileModuleAndAllComponentsSync=bM,this.compileModuleAndAllComponentsAsync=OD}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=dn({token:i,factory:i.\u0275fac}),i})();const Xl=(()=>Promise.resolve(0))();function rf(i){"undefined"==typeof Zone?Xl.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Vs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fo(!1),this.onMicrotaskEmpty=new fo(!1),this.onStable=new fo(!1),this.onError=new fo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function(){let i=ut.requestAnimationFrame,s=ut.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const o=i[Zone.__symbol__("OriginalDelegate")];o&&(i=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(ut,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,wu(i),i.isCheckStableRunning=!0,r_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),wu(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,d,g,_)=>{try{return Tg(i),o.invokeTask(l,d,g,_)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||i.shouldCoalesceRunChangeDetection)&&s(),sf(i)}},onInvoke:(o,u,l,d,g,_,w)=>{try{return Tg(i),o.invoke(l,d,g,_,w)}finally{i.shouldCoalesceRunChangeDetection&&s(),sf(i)}},onHasTask:(o,u,l,d)=>{o.hasTask(l,d),u===l&&("microTask"==d.change?(i._hasPendingMicrotasks=d.microTask,wu(i),r_(i)):"macroTask"==d.change&&(i.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,u,l,d)=>(o.handleError(l,d),i.runOutsideAngular(()=>i.onError.emit(d)),!1)})}(l)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Vs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,l){const d=this._inner,g=d.scheduleEventTask("NgZoneEvent: "+l,s,PD,my,my);try{return d.runTask(g,o,u)}finally{d.cancelTask(g)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const PD={};function r_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function wu(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Tg(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function sf(i){i._nesting--,r_(i)}class kD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fo,this.onMicrotaskEmpty=new fo,this.onStable=new fo,this.onError=new fo}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,l){return s.apply(o,u)}}let s_=(()=>{class i{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vs.assertNotInAngularZone(),rf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())rf(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==d),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,l){return[]}}return i.\u0275fac=function(o){return new(o||i)(vn(Vs))},i.\u0275prov=dn({token:i,factory:i.\u0275fac}),i})(),FD=(()=>{class i{constructor(){this._applications=new Map,Ag.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return Ag.findTestabilityInTree(this,o,u)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=dn({token:i,factory:i.\u0275fac}),i})();class Ix{addToWindow(s){}findTestabilityInTree(s,o,u){return null}}function Cx(i){Ag=i}let Ag=new Ix,o_=!0,h0=!1;function bu(){return h0=!0,o_}function LD(){if(h0)throw new Error("Cannot enable prod mode after platform setup.");o_=!1}let go;const jc=new Dn("AllowMultipleToken");class Iu{constructor(s,o){this.name=s,this.token=o}}function Cu(i,s,o=[]){const u=`Platform: ${s}`,l=new Dn(u);return(d=[])=>{let g=g0();if(!g||g.injector.get(jc,!1))if(i)i(o.concat(d).concat({provide:l,useValue:!0}));else{const _=o.concat(d).concat({provide:l,useValue:!0},{provide:Jd,useValue:"platform"});!function(i){if(go&&!go.destroyed&&!go.injector.get(jc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");go=i.get(of);const s=i.get(yi,null);s&&s.forEach(o=>o())}(zn.create({providers:_,name:u}))}return function(i){const s=g0();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(l)}}function g0(){return go&&!go.destroyed?go:null}let of=(()=>{class i{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const _=function(i,s){let o;return o="noop"===i?new kD:("zone.js"===i?void 0:i)||new Vs({enableLongStackTrace:bu(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),w=[{provide:Vs,useValue:_}];return _.run(()=>{const C=zn.create({providers:w,parent:this.injector,name:o.moduleType.name}),A=o.create(C),N=A.injector.get(so,null);if(!N)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return _.runOutsideAngular(()=>{const k=_.onError.subscribe({next:H=>{N.handleError(H)}});A.onDestroy(()=>{m0(this._modules,A),k.unsubscribe()})}),function(i,s,o){try{const u=o();return wc(u)?u.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(N,_,()=>{const k=A.injector.get(Jl);return k.runInitializers(),k.donePromise.then(()=>(wa(A.injector.get(Dg,iy)||iy),this._moduleDoBootstrap(A),A))})})}bootstrapModule(o,u=[]){const l=BD({},u);return function(i,s,o){const u=new Vc(o);return Promise.resolve(u)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,l))}_moduleDoBootstrap(o){const u=o.injector.get(Rg);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${V(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(o){return new(o||i)(vn(zn))},i.\u0275prov=dn({token:i,factory:i.\u0275fac}),i})();function BD(i,s){return Array.isArray(s)?s.reduce(BD,i):Object.assign(Object.assign({},i),s)}let Rg=(()=>{class i{constructor(o,u,l,d,g){this._zone=o,this._injector=u,this._exceptionHandler=l,this._componentFactoryResolver=d,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),w=new O.y(C=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Vs.assertNotInAngularZone(),rf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{Vs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{A.unsubscribe(),N.unsubscribe()}});this.isStable=(0,re.T)(_,w.pipe(i=>(0,oe.x)()((0,te.O)(ce)(i))))}bootstrap(o,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let l;l=o instanceof Oh?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(l.componentType);const d=function(i){return i.isBoundToModule}(l)?void 0:this._injector.get(Ps),_=l.create(zn.NULL,[],u||l.selector,d),w=_.location.nativeElement,C=_.injector.get(s_,null),A=C&&_.injector.get(FD);return C&&A&&A.registerApplication(w,C),_.onDestroy(()=>{this.detachView(_.hostView),m0(this.components,_),A&&A.unregisterApplication(w)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;m0(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(u0,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(o){return new(o||i)(vn(Vs),vn(zn),vn(so),vn(ql),vn(Jl))},i.\u0275prov=dn({token:i,factory:i.\u0275fac}),i})();function m0(i,s){const o=i.indexOf(s);o>-1&&i.splice(o,1)}class Rx{}class $D{}const HD={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let GD=(()=>{class i{constructor(o,u){this._compiler=o,this._config=u||HD}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[u,l]=o.split("#");return void 0===l&&(l="default"),F(8255)(u).then(d=>d[l]).then(d=>v0(d,u,l)).then(d=>this._compiler.compileModuleAsync(d))}loadFactory(o){let[u,l]=o.split("#"),d="NgFactory";return void 0===l&&(l="default",d=""),F(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(g=>g[l+d]).then(g=>v0(g,u,l))}}return i.\u0275fac=function(o){return new(o||i)(vn(Ls),vn($D,8))},i.\u0275prov=dn({token:i,factory:i.\u0275fac}),i})();function v0(i,s,o){if(!i)throw new Error(`Cannot find '${o}' in '${s}'`);return i}const Lx=function(i){return null},Ux=Cu(null,"core",[{provide:zo,useValue:"unknown"},{provide:of,deps:[zn]},{provide:FD,deps:[]},{provide:Cg,deps:[]}]),Bx=[{provide:Rg,useClass:Rg,deps:[Vs,zn,so,ql,Jl]},{provide:QC,deps:[Vs],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(o){s.push(o)}}},{provide:Jl,useClass:Jl,deps:[[new As,Qt]]},{provide:Ls,useClass:Ls,deps:[]},gx,{provide:_y,useFactory:function(){return ni},deps:[]},{provide:vy,useFactory:function(){return nw},deps:[]},{provide:Dg,useFactory:function(i){return wa(i=i||"undefined"!=typeof $localize&&$localize.locale||iy),i},deps:[[new ko(Dg),new As,new ds]]},{provide:c0,useValue:"USD"}];let XD=(()=>{class i{constructor(o){}}return i.\u0275fac=function(o){return new(o||i)(vn(Rg))},i.\u0275mod=bt({type:i}),i.\u0275inj=Jt({providers:Bx}),i})()},8939:(Ze,me,F)=>{"use strict";F.d(me,{hO:()=>pe,xv:()=>G,Dh:()=>se,GT:()=>oe,cc:()=>Pe,on:()=>L,pX:()=>te});var f=F(8720),j=F(7841),O=F(2274);Ze=F.hmd(Ze);const re=["ngOnDestroy"],te=(Ae,Re,Se,Ce={})=>new Proxy(Ae,{get:(Qe,zt)=>Se.runOutsideAngular(()=>{var fn;if(Ae[zt])return(null===(fn=null==Ce?void 0:Ce.spy)||void 0===fn?void 0:fn.get)&&Ce.spy.get(zt,Ae[zt]),Ae[zt];if(re.indexOf(zt)>-1)return()=>{};const _t=Re.toPromise().then(Me=>{const Te=Me&&Me[zt];return"function"==typeof Te?Te.bind(Me):Te&&Te.then?Te.then(ze=>Se.run(()=>ze)):Se.run(()=>Te)});return new Proxy(()=>{},{get:(Me,Te)=>_t[Te],apply:(Me,Te,ze)=>_t.then(dt=>{var nt;const st=dt&&dt(...ze);return(null===(nt=null==Ce?void 0:Ce.spy)||void 0===nt?void 0:nt.apply)&&Ce.spy.apply(zt,ze,st),st})})})}),oe=(Ae,Re)=>{Re.forEach(Se=>{Object.getOwnPropertyNames(Se.prototype||Se).forEach(Ce=>{Object.defineProperty(Ae.prototype,Ce,Object.getOwnPropertyDescriptor(Se.prototype||Se,Ce))})})};class ce{constructor(Re){return Re}}const se=new f.OlP("angularfire2.app.options"),G=new f.OlP("angularfire2.app.name");function L(Ae,Re,Se){const Qe="object"==typeof Se&&Se||{};Qe.name=Qe.name||"string"==typeof Se&&Se||"[DEFAULT]";const fn=j.Z.apps.filter(_t=>_t&&_t.name===Qe.name)[0]||Re.runOutsideAngular(()=>j.Z.initializeApp(Ae,Qe));try{JSON.stringify(Ae)!==JSON.stringify(fn.options)&&V("error",`${fn.name} Firebase App already initialized with different options${Ze.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(_t){}return new ce(fn)}const V=(Ae,...Re)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Ae](...Re)},ne={provide:ce,useFactory:L,deps:[se,f.R0b,[new f.FiY,G]]};let pe=(()=>{class Ae{constructor(Se){j.Z.registerVersion("angularfire",O.q4.full,"core"),j.Z.registerVersion("angularfire",O.q4.full,"app-compat"),j.Z.registerVersion("angular",f.q4F.full,Se.toString())}static initializeApp(Se,Ce){return{ngModule:Ae,providers:[{provide:se,useValue:Se},{provide:G,useValue:Ce}]}}}return Ae.\u0275fac=function(Se){return new(Se||Ae)(f.LFG(f.Lbi))},Ae.\u0275mod=f.oAB({type:Ae}),Ae.\u0275inj=f.cJS({providers:[ne]}),Ae})();function Pe(Ae,Re,Se,Ce,Qe){const[,zt,fn]=globalThis.\u0275AngularfireInstanceCache.find(_t=>_t[0]===Ae)||[];if(zt)return function(Ae,Re){try{return Ae.toString()===Re.toString()}catch(Se){return Ae===Re}}(Qe,fn)||(Ue("error",`${Re} was already initialized on the ${Se} Firebase App with different settings.${we?" You may need to reload as Firebase is not HMR aware.":""}`),Ue("warn",{is:Qe,was:fn})),zt;{const _t=Ce();return globalThis.\u0275AngularfireInstanceCache.push([Ae,_t,Qe]),_t}}const we=!!Ze.hot,Ue=(Ae,...Re)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Ae](...Re)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2274:(Ze,me,F)=>{"use strict";F.d(me,{q4:()=>Pf,iC:()=>Md,HU:()=>ro,vb:()=>ic,JM:()=>Mo});var f=F(8720),j=F(2329),O=F(8239),re=F(8026),te=F(3854),oe=F(3910),ce=F(5422),se=F(7449);const G="@firebase/installations",L="0.5.11",ne=`w:${L}`,pe="FIS_v2",Re=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Se(I){return I instanceof te.ZR&&I.code.includes("request-failed")}function Ce({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Qe(I){return{token:I.token,requestStatus:2,expiresIn:dt(I.expiresIn),creationTime:Date.now()}}function zt(I,T){return fn.apply(this,arguments)}function fn(){return(fn=(0,O.Z)(function*(I,T){const U=(yield T.json()).error;return Re.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function _t({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Me(I,{refreshToken:T}){const M=_t(I);return M.append("Authorization",function(I){return`${pe} ${I}`}(T)),M}function Te(I){return ze.apply(this,arguments)}function ze(){return(ze=(0,O.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function dt(I){return Number(I.replace("s","000"))}function st(I,T){return He.apply(this,arguments)}function He(){return(He=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:M}){const U=Ce(I),X=_t(I),le=T.getImmediate({optional:!0});if(le){const gt=yield le.getHeartbeatsHeader();gt&&X.append("x-firebase-client",gt)}const Ge={method:"POST",headers:X,body:JSON.stringify({fid:M,authVersion:pe,appId:I.appId,sdkVersion:ne})},et=yield Te(()=>fetch(U,Ge));if(et.ok){const gt=yield et.json();return{fid:gt.fid||M,registrationStatus:2,refreshToken:gt.refreshToken,authToken:Qe(gt.authToken)}}throw yield zt("Create Installation",et)})).apply(this,arguments)}function Hr(I){return new Promise(T=>{setTimeout(T,I)})}const Es=/^[cdef][\w-]{21}$/;function ns(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Es.test(M)?M:""}catch(I){return""}}function qr(I){return`${I.appName}!${I.appId}`}const An=new Map;function qt(I,T){const M=qr(I);Hn(M,T),function(I,T){const M=(!pn&&"BroadcastChannel"in self&&(pn=new BroadcastChannel("[Firebase] FID Change"),pn.onmessage=I=>{Hn(I.data.key,I.data.fid)}),pn);M&&M.postMessage({key:I,fid:T}),0===An.size&&pn&&(pn.close(),pn=null)}(M,T)}function Hn(I,T){const M=An.get(I);if(M)for(const U of M)U(T)}let pn=null;const Ne="firebase-installations-store";let Gn=null;function Un(){return Gn||(Gn=(0,se.X3)("firebase-installations-database",1,{upgrade:(I,T)=>{switch(T){case 0:I.createObjectStore(Ne)}}})),Gn}function Pr(I,T){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,O.Z)(function*(I,T){const M=qr(I),X=(yield Un()).transaction(Ne,"readwrite"),le=X.objectStore(Ne),De=yield le.get(M);return yield le.put(T,M),yield X.done,(!De||De.fid!==T.fid)&&qt(I,T.fid),T})).apply(this,arguments)}function wn(I){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,O.Z)(function*(I){const T=qr(I),U=(yield Un()).transaction(Ne,"readwrite");yield U.objectStore(Ne).delete(T),yield U.done})).apply(this,arguments)}function qn(I,T){return rs.apply(this,arguments)}function rs(){return(rs=(0,O.Z)(function*(I,T){const M=qr(I),X=(yield Un()).transaction(Ne,"readwrite"),le=X.objectStore(Ne),De=yield le.get(M),Ge=T(De);return void 0===Ge?yield le.delete(M):yield le.put(Ge,M),yield X.done,Ge&&(!De||De.fid!==Ge.fid)&&qt(I,Ge.fid),Ge})).apply(this,arguments)}function Pn(I){return gr.apply(this,arguments)}function gr(){return(gr=(0,O.Z)(function*(I){let T;const M=yield qn(I.appConfig,U=>{const X=Qo(U),le=Bt(I,X);return T=le.registrationPromise,le.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function Qo(I){return cn(I||{fid:ns(),registrationStatus:0})}function Bt(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Re.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:M,registrationPromise:function(I,T){return it.apply(this,arguments)}(I,M)}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:ws(I)}:{installationEntry:T}}function it(){return(it=(0,O.Z)(function*(I,T){try{const M=yield st(I,T);return Pr(I.appConfig,M)}catch(M){throw Se(M)&&409===M.customData.serverCode?yield wn(I.appConfig):yield Pr(I.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function ws(I){return sn.apply(this,arguments)}function sn(){return(sn=(0,O.Z)(function*(I){let T=yield Wt(I.appConfig);for(;1===T.registrationStatus;)yield Hr(100),T=yield Wt(I.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:U}=yield Pn(I);return U||M}return T})).apply(this,arguments)}function Wt(I){return qn(I,T=>{if(!T)throw Re.create("installation-not-found");return cn(T)})}function cn(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Bn(I,T){return ut.apply(this,arguments)}function ut(){return(ut=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:T},M){const U=Q(I,M),X=Me(I,M),le=T.getImmediate({optional:!0});if(le){const gt=yield le.getHeartbeatsHeader();gt&&X.append("x-firebase-client",gt)}const Ge={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:ne,appId:I.appId}})},et=yield Te(()=>fetch(U,Ge));if(et.ok)return Qe(yield et.json());throw yield zt("Generate Auth Token",et)})).apply(this,arguments)}function Q(I,{fid:T}){return`${Ce(I)}/${T}/authTokens:generate`}function $(I){return J.apply(this,arguments)}function J(){return(J=(0,O.Z)(function*(I,T=!1){let M;const U=yield qn(I.appConfig,le=>{if(!Dt(le))throw Re.create("not-registered");const De=le.authToken;if(!T&&Nt(De))return le;if(1===De.requestStatus)return M=W(I,T),le;{if(!navigator.onLine)throw Re.create("app-offline");const Ge=jt(le);return M=Ve(I,Ge),Ge}});return M?yield M:U.authToken})).apply(this,arguments)}function W(I,T){return B.apply(this,arguments)}function B(){return(B=(0,O.Z)(function*(I,T){let M=yield ve(I.appConfig);for(;1===M.authToken.requestStatus;)yield Hr(100),M=yield ve(I.appConfig);const U=M.authToken;return 0===U.requestStatus?$(I,T):U})).apply(this,arguments)}function ve(I){return qn(I,T=>{if(!Dt(T))throw Re.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Ve(I,T){return rt.apply(this,arguments)}function rt(){return(rt=(0,O.Z)(function*(I,T){try{const M=yield Bn(I,T),U=Object.assign(Object.assign({},T),{authToken:M});return yield Pr(I.appConfig,U),M}catch(M){if(!Se(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Pr(I.appConfig,U)}else yield wn(I.appConfig);throw M}})).apply(this,arguments)}function Dt(I){return void 0!==I&&2===I.registrationStatus}function Nt(I){return 2===I.requestStatus&&!function(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+36e5}(I)}function jt(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}function q(){return(q=(0,O.Z)(function*(I){const T=I,{installationEntry:M,registrationPromise:U}=yield Pn(T);return U?U.catch(console.error):$(T).catch(console.error),M.fid})).apply(this,arguments)}function Be(){return(Be=(0,O.Z)(function*(I,T=!1){const M=I;return yield bt(M),(yield $(M,T)).token})).apply(this,arguments)}function bt(I){return yt.apply(this,arguments)}function yt(){return(yt=(0,O.Z)(function*(I){const{registrationPromise:T}=yield Pn(I);T&&(yield T)})).apply(this,arguments)}function Ir(I){return Re.create("missing-app-config-values",{valueName:I})}const We="installations";(0,re._registerComponent)(new oe.wA(We,I=>{const T=I.getProvider("app").getImmediate();return{app:T,appConfig:function(I){if(!I||!I.options)throw Ir("App Configuration");if(!I.name)throw Ir("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!I.options[M])throw Ir(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T),heartbeatServiceProvider:(0,re._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,re._registerComponent)(new oe.wA("installations-internal",I=>{const T=I.getProvider("app").getImmediate(),M=(0,re._getProvider)(T,We).getImmediate();return{getId:()=>function(I){return q.apply(this,arguments)}(M),getToken:X=>function(I){return Be.apply(this,arguments)}(M,X)}},"PRIVATE")),(0,re.registerVersion)(G,L),(0,re.registerVersion)(G,L,"esm2017");const yn="@firebase/remote-config",at=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class vi{constructor(T,M,U,X){this.client=T,this.storage=M,this.storageCache=U,this.logger=X}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-M,X=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${X}.`),X}fetch(T){var M=this;return(0,O.Z)(function*(){const[U,X]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(X&&M.isCachedDataFresh(T.cacheMaxAgeMillis,U))return X;T.eTag=X&&X.eTag;const le=yield M.client.fetch(T),De=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&De.push(M.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(De),le})()}}function od(I=navigator){return I.languages&&I.languages[0]||I.language}class Lr{constructor(T,M,U,X,le,De){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=U,this.projectId=X,this.apiKey=le,this.appId=De}fetch(T){var M=this;return(0,O.Z)(function*(){var U,X,le;const[De,Ge]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),gt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ht={sdk_version:M.sdkVersion,app_instance_id:De,app_instance_id_token:Ge,app_id:M.appId,language_code:od()},jn={method:"POST",headers:Tt,body:JSON.stringify(ht)},_r=fetch(gt,jn),Hi=new Promise((ls,Kr)=>{T.signal.addEventListener(()=>{const Ci=new Error("The operation was aborted.");Ci.name="AbortError",Kr(Ci)})});let Ya;try{yield Promise.race([_r,Hi]),Ya=yield _r}catch(ls){let Kr="fetch-client-network";throw"AbortError"===(null===(U=ls)||void 0===U?void 0:U.name)&&(Kr="fetch-timeout"),at.create(Kr,{originalErrorMessage:null===(X=ls)||void 0===X?void 0:X.message})}let Qa=Ya.status;const gl=Ya.headers.get("ETag")||void 0;let Po,ha;if(200===Ya.status){let ls;try{ls=yield Ya.json()}catch(Kr){throw at.create("fetch-client-parse",{originalErrorMessage:null===(le=Kr)||void 0===le?void 0:le.message})}Po=ls.entries,ha=ls.state}if("INSTANCE_STATE_UNSPECIFIED"===ha?Qa=500:"NO_CHANGE"===ha?Qa=304:("NO_TEMPLATE"===ha||"EMPTY_CONFIG"===ha)&&(Po={}),304!==Qa&&200!==Qa)throw at.create("fetch-status",{httpStatus:Qa});return{status:Qa,eTag:gl,config:Po}})()}}class ad{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,O.Z)(function*(){const U=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:U}){var X=this;return(0,O.Z)(function*(){yield function(I,T){return new Promise((M,U)=>{const X=Math.max(T-Date.now(),0),le=setTimeout(M,X);I.addEventListener(()=>{clearTimeout(le),U(at.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const le=yield X.client.fetch(T);return yield X.storage.deleteThrottleMetadata(),le}catch(le){if(!function(I){if(!(I instanceof te.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(le))throw le;const De={throttleEndTimeMillis:Date.now()+(0,te.$s)(U),backoffCount:U+1};return yield X.storage.setThrottleMetadata(De),X.attemptFetch(T,De)}})()}}class Kc{constructor(T,M,U,X,le){this.app=T,this._client=M,this._storageCache=U,this._storage=X,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Yc(I,T){var M;const U=I.target.error||void 0;return at.create(T,{originalErrorMessage:U&&(null===(M=U)||void 0===M?void 0:M.message)})}const Hs="app_namespace_store";class dd{constructor(T,M,U,X=function(){return new Promise((I,T)=>{var M;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=X=>{T(Yc(X,"storage-open"))},U.onsuccess=X=>{I(X.target.result)},U.onupgradeneeded=X=>{const le=X.target.result;switch(X.oldVersion){case 0:le.createObjectStore(Hs,{keyPath:"compositeKey"})}}}catch(U){T(at.create("storage-open",{originalErrorMessage:null===(M=U)||void 0===M?void 0:M.message}))}})}()){this.appId=T,this.appName=M,this.namespace=U,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,O.Z)(function*(){const U=yield M.openDbPromise;return new Promise((X,le)=>{var De;const et=U.transaction([Hs],"readonly").objectStore(Hs),gt=M.createCompositeKey(T);try{const Tt=et.get(gt);Tt.onerror=ht=>{le(Yc(ht,"storage-get"))},Tt.onsuccess=ht=>{const jn=ht.target.result;X(jn?jn.value:void 0)}}catch(Tt){le(at.create("storage-get",{originalErrorMessage:null===(De=Tt)||void 0===De?void 0:De.message}))}})})()}set(T,M){var U=this;return(0,O.Z)(function*(){const X=yield U.openDbPromise;return new Promise((le,De)=>{var Ge;const gt=X.transaction([Hs],"readwrite").objectStore(Hs),Tt=U.createCompositeKey(T);try{const ht=gt.put({compositeKey:Tt,value:M});ht.onerror=jn=>{De(Yc(jn,"storage-set"))},ht.onsuccess=()=>{le()}}catch(ht){De(at.create("storage-set",{originalErrorMessage:null===(Ge=ht)||void 0===Ge?void 0:Ge.message}))}})})()}delete(T){var M=this;return(0,O.Z)(function*(){const U=yield M.openDbPromise;return new Promise((X,le)=>{var De;const et=U.transaction([Hs],"readwrite").objectStore(Hs),gt=M.createCompositeKey(T);try{const Tt=et.delete(gt);Tt.onerror=ht=>{le(Yc(ht,"storage-delete"))},Tt.onsuccess=()=>{X()}}catch(Tt){le(at.create("storage-delete",{originalErrorMessage:null===(De=Tt)||void 0===De?void 0:De.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class $g{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const M=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),X=T.storage.getActiveConfig(),le=yield M;le&&(T.lastFetchStatus=le);const De=yield U;De&&(T.lastSuccessfulFetchTimestampMillis=De);const Ge=yield X;Ge&&(T.activeConfig=Ge)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function wf(){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,O.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,re._registerComponent)(new oe.wA("remote-config",function(T,{instanceIdentifier:M}){const U=T.getProvider("app").getImmediate(),X=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw at.create("registration-window");if(!(0,te.hl)())throw at.create("indexed-db-unavailable");const{projectId:le,apiKey:De,appId:Ge}=U.options;if(!le)throw at.create("registration-project-id");if(!De)throw at.create("registration-api-key");if(!Ge)throw at.create("registration-app-id");const et=new dd(Ge,U.name,M=M||"firebase"),gt=new $g(et),Tt=new ce.Yd(yn);Tt.logLevel=ce.in.ERROR;const ht=new Lr(X,re.SDK_VERSION,M,le,De,Ge),jn=new ad(ht,et),_r=new vi(jn,et,gt,Tt),Hi=new Kc(U,_r,gt,et,Tt);return function(I){const T=(0,te.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Hi),Hi},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(yn,"0.3.10"),(0,re.registerVersion)(yn,"0.3.10","esm2017");const Hg="/firebase-messaging-sw.js",fd="/firebase-cloud-messaging-push-scope",Na="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bf="google.c.a.c_id",If="google.c.a.c_l",Ou="google.c.a.ts",Tr="google.c.a.e";var Gs=(()=>{return(I=Gs||(Gs={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Gs;var I})();function Jn(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function pd(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(M),X=new Uint8Array(U.length);for(let le=0;le<U.length;++le)X[le]=U.charCodeAt(le);return X}const Jo="fcm_token_details_db",Pu="fcm_token_object_Store";function Gg(I){return qs.apply(this,arguments)}function qs(){return(qs=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(Jo))return null;let T=null;return(yield(0,se.X3)(Jo,5,{upgrade:(U=(0,O.Z)(function*(X,le,De,Ge){var et;if(le<2||!X.objectStoreNames.contains(Pu))return;const gt=Ge.objectStore(Pu),Tt=yield gt.index("fcmSenderId").get(I);if(yield gt.clear(),Tt)if(2===le){const ht=Tt;if(!ht.auth||!ht.p256dh||!ht.endpoint)return;T={token:ht.fcmToken,createTime:null!==(et=ht.createTime)&&void 0!==et?et:Date.now(),subscriptionOptions:{auth:ht.auth,p256dh:ht.p256dh,endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:"string"==typeof ht.vapidKey?ht.vapidKey:Jn(ht.vapidKey)}}}else if(3===le){const ht=Tt;T={token:ht.fcmToken,createTime:ht.createTime,subscriptionOptions:{auth:Jn(ht.auth),p256dh:Jn(ht.p256dh),endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:Jn(ht.vapidKey)}}}else if(4===le){const ht=Tt;T={token:ht.fcmToken,createTime:ht.createTime,subscriptionOptions:{auth:Jn(ht.auth),p256dh:Jn(ht.p256dh),endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:Jn(ht.vapidKey)}}}}),function(le,De,Ge,et){return U.apply(this,arguments)})})).close(),yield(0,se.Lj)(Jo),yield(0,se.Lj)("fcm_vapid_details_db"),yield(0,se.Lj)("undefined"),Df(T)?T:null;var U})).apply(this,arguments)}function Df(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const ci="firebase-messaging-store";let Oa=null;function Xc(){return Oa||(Oa=(0,se.X3)("firebase-messaging-database",1,{upgrade:(I,T)=>{switch(T){case 0:I.createObjectStore(ci)}}})),Oa}function ss(I){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,O.Z)(function*(I){const T=kn(I),U=yield(yield Xc()).transaction(ci).objectStore(ci).get(T);if(U)return U;{const X=yield Gg(I.appConfig.senderId);if(X)return yield _n(I,X),X}})).apply(this,arguments)}function _n(I,T){return li.apply(this,arguments)}function li(){return(li=(0,O.Z)(function*(I,T){const M=kn(I),X=(yield Xc()).transaction(ci,"readwrite");return yield X.objectStore(ci).put(T,M),yield X.done,T})).apply(this,arguments)}function Io(I){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,O.Z)(function*(I){const T=kn(I),U=(yield Xc()).transaction(ci,"readwrite");yield U.objectStore(ci).delete(T),yield U.done})).apply(this,arguments)}function kn({appConfig:I}){return I.appId}const ur=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Fu(I,T){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,O.Z)(function*(I,T){var M;const U=yield Ar(I),X=Is(T),le={method:"POST",headers:U,body:JSON.stringify(X)};let De;try{De=yield(yield fetch(ka(I.appConfig),le)).json()}catch(Ge){throw ur.create("token-subscribe-failed",{errorInfo:null===(M=Ge)||void 0===M?void 0:M.toString()})}if(De.error)throw ur.create("token-subscribe-failed",{errorInfo:De.error.message});if(!De.token)throw ur.create("token-subscribe-no-token");return De.token})).apply(this,arguments)}function Af(I,T){return Co.apply(this,arguments)}function Co(){return(Co=(0,O.Z)(function*(I,T){var M;const U=yield Ar(I),X=Is(T.subscriptionOptions),le={method:"PATCH",headers:U,body:JSON.stringify(X)};let De;try{De=yield(yield fetch(`${ka(I.appConfig)}/${T.token}`,le)).json()}catch(Ge){throw ur.create("token-update-failed",{errorInfo:null===(M=Ge)||void 0===M?void 0:M.toString()})}if(De.error)throw ur.create("token-update-failed",{errorInfo:De.error.message});if(!De.token)throw ur.create("token-update-no-token");return De.token})).apply(this,arguments)}function Xo(I,T){return er.apply(this,arguments)}function er(){return(er=(0,O.Z)(function*(I,T){var M;const X={method:"DELETE",headers:yield Ar(I)};try{const De=yield(yield fetch(`${ka(I.appConfig)}/${T}`,X)).json();if(De.error)throw ur.create("token-unsubscribe-failed",{errorInfo:De.error.message})}catch(le){throw ur.create("token-unsubscribe-failed",{errorInfo:null===(M=le)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function ka({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Ar(I){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,O.Z)(function*({appConfig:I,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Is({p256dh:I,auth:T,endpoint:M,vapidKey:U}){const X={web:{endpoint:M,auth:T,p256dh:I}};return U!==Na&&(X.web.applicationPubKey=U),X}const Fa=6048e5;function ea(I){return ft.apply(this,arguments)}function ft(){return(ft=(0,O.Z)(function*(I){const T=yield Vu(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:Jn(T.getKey("auth")),p256dh:Jn(T.getKey("p256dh"))},U=yield ss(I.firebaseDependencies);if(U){if(Vt(U.subscriptionOptions,M))return Date.now()>=U.createTime+Fa?el(I,{token:U.token,createTime:Date.now(),subscriptionOptions:M}):U.token;try{yield Xo(I.firebaseDependencies,U.token)}catch(X){console.warn(X)}return zs(I.firebaseDependencies,M)}return zs(I.firebaseDependencies,M)})).apply(this,arguments)}function gd(I){return md.apply(this,arguments)}function md(){return(md=(0,O.Z)(function*(I){const T=yield ss(I.firebaseDependencies);T&&(yield Xo(I.firebaseDependencies,T.token),yield Io(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function el(I,T){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,O.Z)(function*(I,T){try{const M=yield Af(I.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield _n(I.firebaseDependencies,U),M}catch(M){throw yield gd(I),M}})).apply(this,arguments)}function zs(I,T){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*(I,T){const U={token:yield Fu(I,T),createTime:Date.now(),subscriptionOptions:T};return yield _n(I,U),U.token})).apply(this,arguments)}function Vu(I,T){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,O.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pd(T)})})).apply(this,arguments)}function Vt(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}function ta(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function(I,T){if(!T.notification)return;I.notification={};const M=T.notification.title;M&&(I.notification.title=M);const U=T.notification.body;U&&(I.notification.body=U);const X=T.notification.image;X&&(I.notification.image=X)}(T,I),function(I,T){!T.data||(I.data=T.data)}(T,I),function(I,T){var M,U,X,le,De;if(!T.fcmOptions&&!(null===(M=T.notification)||void 0===M?void 0:M.click_action))return;I.fcmOptions={};const Ge=null!==(X=null===(U=T.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==X?X:null===(le=T.notification)||void 0===le?void 0:le.click_action;Ge&&(I.fcmOptions.link=Ge);const et=null===(De=T.fcmOptions)||void 0===De?void 0:De.analytics_label;et&&(I.fcmOptions.analyticsLabel=et)}(T,I),T}function Vi(I){return"object"==typeof I&&!!I&&bf in I}function ra(I,T){const M=[];for(let U=0;U<I.length;U++)M.push(I.charAt(U)),U<T.length&&M.push(T.charAt(U));return M.join("")}function Bu(I){return ur.create("missing-app-config-values",{valueName:I})}ra("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ra("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ju{constructor(T,M,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function(I){if(!I||!I.options)throw Bu("App Configuration Object");if(!I.name)throw Bu("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const U of T)if(!M[U])throw Bu(U);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:X,installations:M,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Ys(I){return La.apply(this,arguments)}function La(){return(La=(0,O.Z)(function*(I){var T;try{I.swRegistration=yield navigator.serviceWorker.register(Hg,{scope:fd}),I.swRegistration.update().catch(()=>{})}catch(M){throw ur.create("failed-service-worker-registration",{browserErrorMessage:null===(T=M)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function tr(I,T){return mr.apply(this,arguments)}function mr(){return(mr=(0,O.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield Ys(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw ur.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function tl(I,T){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,O.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=Na)})).apply(this,arguments)}function Va(){return(Va=(0,O.Z)(function*(I,T){if(!navigator)throw ur.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ur.create("permission-blocked");return yield tl(I,null==T?void 0:T.vapidKey),yield tr(I,null==T?void 0:T.serviceWorkerRegistration),ea(I)})).apply(this,arguments)}function yd(I,T,M){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,O.Z)(function*(I,T,M){const U=Sf(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:M[bf],message_name:M[If],message_time:M[Ou],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Sf(I){switch(I){case Gs.NOTIFICATION_CLICKED:return"notification_open";case Gs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function To(){return(To=(0,O.Z)(function*(I,T){const M=T.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===Gs.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(ta(M)):I.onMessageHandler.next(ta(M)));const U=M.data;Vi(U)&&"1"===U[Tr]&&(yield yd(I,M.messageType,U))})).apply(this,arguments)}const Ba="@firebase/messaging";function _d(){return ja.apply(this,arguments)}function ja(){return(ja=(0,O.Z)(function*(){try{yield(0,te.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,te.hl)()&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,re._registerComponent)(new oe.wA("messaging",I=>{const T=new ju(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function(I,T){return To.apply(this,arguments)}(T,M)),T},"PUBLIC")),(0,re._registerComponent)(new oe.wA("messaging-internal",I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:U=>function(I,T){return Va.apply(this,arguments)}(T,U)}},"PRIVATE")),(0,re.registerVersion)(Ba,"0.9.15"),(0,re.registerVersion)(Ba,"0.9.15","esm2017");const qu="analytics",rl="firebase_id",ol="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wu="https://www.googletagmanager.com/gtag/js",Wn=new ce.Yd("@firebase/analytics");function Ao(I){return Promise.all(I.map(T=>T.catch(M=>M)))}function zu(I,T){const M=document.createElement("script");M.src=`${Wu}?l=${I}&id=${T}`,M.async=!0,document.head.appendChild(M)}function vd(I,T,M,U,X,le){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,O.Z)(function*(I,T,M,U,X,le){const De=U[X];try{if(De)yield T[De];else{const et=(yield Ao(M)).find(gt=>gt.measurementId===X);et&&(yield T[et.appId])}}catch(Ge){Wn.error(Ge)}I("config",X,le)})).apply(this,arguments)}function Qs(I,T,M,U,X){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,O.Z)(function*(I,T,M,U,X){try{let le=[];if(X&&X.send_to){let De=X.send_to;Array.isArray(De)||(De=[De]);const Ge=yield Ao(M);for(const et of De){const gt=Ge.find(ht=>ht.measurementId===et),Tt=gt&&T[gt.appId];if(!Tt){le=[];break}le.push(Tt)}}0===le.length&&(le=Object.values(T)),yield Promise.all(le),I("event",U,X||{})}catch(le){Wn.error(le)}})).apply(this,arguments)}function Ku(){const I=window.document.getElementsByTagName("script");for(const T of Object.values(I))if(T.src&&T.src.includes(Wu))return T;return null}const wi=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Yu=new class{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Nf(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Qu(I){return aa.apply(this,arguments)}function aa(){return(aa=(0,O.Z)(function*(I){var T;const{appId:M,apiKey:U}=I,X={method:"GET",headers:Nf(U)},le=ol.replace("{app-id}",M),De=yield fetch(le,X);if(200!==De.status&&304!==De.status){let Ge="";try{const et=yield De.json();(null===(T=et.error)||void 0===T?void 0:T.message)&&(Ge=et.error.message)}catch(et){}throw wi.create("config-fetch-failed",{httpStatus:De.status,responseMessage:Ge})}return De.json()})).apply(this,arguments)}function Wg(I){return wd.apply(this,arguments)}function wd(){return(wd=(0,O.Z)(function*(I,T=Yu,M){const{appId:U,apiKey:X,measurementId:le}=I.options;if(!U)throw wi.create("no-app-id");if(!X){if(le)return{measurementId:le,appId:U};throw wi.create("no-api-key")}const De=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ge=new ll;return setTimeout((0,O.Z)(function*(){Ge.abort()}),void 0!==M?M:6e4),Js({appId:U,apiKey:X,measurementId:le},De,Ge,T)})).apply(this,arguments)}function Js(I,T,M){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,O.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:M},U,X=Yu){var le,De;const{appId:Ge,measurementId:et}=I;try{yield So(U,T)}catch(gt){if(et)return Wn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${null===(le=gt)||void 0===le?void 0:le.message}]`),{appId:Ge,measurementId:et};throw gt}try{const gt=yield Qu(I);return X.deleteThrottleMetadata(Ge),gt}catch(gt){const Tt=gt;if(!cl(Tt)){if(X.deleteThrottleMetadata(Ge),et)return Wn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${null==Tt?void 0:Tt.message}]`),{appId:Ge,measurementId:et};throw gt}const ht=503===Number(null===(De=null==Tt?void 0:Tt.customData)||void 0===De?void 0:De.httpStatus)?(0,te.$s)(M,X.intervalMillis,30):(0,te.$s)(M,X.intervalMillis),jn={throttleEndTimeMillis:Date.now()+ht,backoffCount:M+1};return X.setThrottleMetadata(Ge,jn),Wn.debug(`Calling attemptFetch again in ${ht} millis`),Js(I,jn,U,X)}})).apply(this,arguments)}function So(I,T){return new Promise((M,U)=>{const X=Math.max(T-Date.now(),0),le=setTimeout(M,X);I.addEventListener(()=>{clearTimeout(le),U(wi.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function cl(I){if(!(I instanceof te.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}class ll{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function x_(){return dl.apply(this,arguments)}function dl(){return(dl=(0,O.Z)(function*(){var I;if(!(0,te.hl)())return Wn.warn(wi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(T){return Wn.warn(wi.create("indexeddb-unavailable",{errorInfo:null===(I=T)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function Xu(){return(Xu=(0,O.Z)(function*(I,T,M,U,X,le,De){var Ge;const et=Wg(I);et.then(_r=>{M[_r.measurementId]=_r.appId,I.options.measurementId&&_r.measurementId!==I.options.measurementId&&Wn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${_r.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_r=>Wn.error(_r)),T.push(et);const gt=x_().then(_r=>{if(_r)return U.getId()}),[Tt,ht]=yield Promise.all([et,gt]);Ku()||zu(le,Tt.measurementId),X("js",new Date);const jn=null!==(Ge=null==De?void 0:De.config)&&void 0!==Ge?Ge:{};return jn.origin="firebase",jn.update=!0,null!=ht&&(jn[rl]=ht),X("config",Tt.measurementId,jn),Tt.measurementId})).apply(this,arguments)}class Fn{constructor(T){this.app=T}_delete(){return delete ln[this.app.options.appId],Promise.resolve()}}let ln={},Xs=[];const pt={};let ec,eo,xo="dataLayer",Ts=!1;function Id(I,T,M){!function(){const I=[];if((0,te.ru)()&&I.push("This is a browser extension environment."),(0,te.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((U,X)=>`(${X+1}) ${U}`).join(" "),M=wi.create("invalid-analytics-context",{errorInfo:T});Wn.warn(M.message)}}();const U=I.options.appId;if(!U)throw wi.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw wi.create("no-api-key");Wn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ln[U])throw wi.create("already-exists",{id:U});if(!Ts){!function(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(xo);const{wrappedGtag:le,gtagCore:De}=function(I,T,M,U,X){let le=function(...De){window[U].push(arguments)};return window[X]&&"function"==typeof window[X]&&(le=window[X]),window[X]=function(I,T,M,U){function le(){return(le=(0,O.Z)(function*(De,Ge,et){try{"event"===De?yield Qs(I,T,M,Ge,et):"config"===De?yield vd(I,T,M,U,Ge,et):I("set",Ge)}catch(gt){Wn.error(gt)}})).apply(this,arguments)}return function(De,Ge,et){return le.apply(this,arguments)}}(le,I,T,M),{gtagCore:le,wrappedGtag:window[X]}}(ln,Xs,pt,xo,"gtag");eo=le,ec=De,Ts=!0}return ln[U]=function(I,T,M,U,X,le,De){return Xu.apply(this,arguments)}(I,Xs,pt,T,ec,xo,M),new Fn(I)}function ua(){return(ua=(0,O.Z)(function*(I,T,M,U,X){if(X&&X.global)I("event",M,U);else{const le=yield T;I("event",M,Object.assign(Object.assign({},U),{send_to:le}))}})).apply(this,arguments)}function no(){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,O.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(I){return!1}})).apply(this,arguments)}const Dd="@firebase/analytics";(0,re._registerComponent)(new oe.wA(qu,(T,{options:M})=>Id(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,re._registerComponent)(new oe.wA("analytics-internal",function(T){try{const M=T.getProvider(qu).getImmediate();return{logEvent:(U,X,le)=>function(I,T,M,U){I=(0,te.m9)(I),function(I,T,M,U,X){return ua.apply(this,arguments)}(eo,ln[I.app.options.appId],T,M,U).catch(X=>Wn.error(X))}(M,U,X,le)}}catch(M){throw wi.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,re.registerVersion)(Dd,"0.7.11"),(0,re.registerVersion)(Dd,"0.7.11","esm2017");var Td=F(7771),Ad=F(3637),zg=F(8307),Sd=F(3101),xd=F(9746);const Pf=new f.GfV("7.4.1"),tc="__angularfire_symbol__analyticsIsSupportedValue",Za="__angularfire_symbol__analyticsIsSupported",fl="__angularfire_symbol__remoteConfigIsSupportedValue",nc="__angularfire_symbol__remoteConfigIsSupported",Ka="__angularfire_symbol__messagingIsSupportedValue",us="__angularfire_symbol__messagingIsSupported";function Mo(I,T,M){if(T){if(1===T.length)return T[0];const le=T.filter(De=>De.app===M);if(1===le.length)return le[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[Za]||(globalThis[Za]=no().then(I=>globalThis[tc]=I).catch(()=>globalThis[tc]=!1)),globalThis[us]||(globalThis[us]=_d().then(I=>globalThis[Ka]=I).catch(()=>globalThis[Ka]=!1)),globalThis[nc]||(globalThis[nc]=wf().then(I=>globalThis[fl]=I).catch(()=>globalThis[fl]=!1));const ic=(I,T)=>{const M=T?[T]:(0,j.C6)(),U=[];return M.forEach(X=>{X.container.getProvider(I).instances.forEach(De=>{U.includes(De)||U.push(De)})}),U};function Sr(){}class cs{constructor(T,M=Td.N){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,U){const X=this.zone;return this.delegate.schedule(function(De){X.runGuarded(()=>{T.apply(this,[De])})},M,U)}}class No{constructor(T){this.zone=T,this.task=null}call(T,M){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sr,{},Sr,Sr)),M.pipe((0,zg.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ro=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new cs(Zone.current)),this.insideAngular=M.run(()=>new cs(Zone.current,Ad.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(f.LFG(f.R0b))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function xr(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Md(I){return xr(),function(I){return function(M){return(M=M.lift(new No(I.ngZone))).pipe((0,Sd.R)(I.outsideAngular),(0,xd.QV)(I.insideAngular))}}(xr())(I)}},4233:(Ze,me,F)=>{"use strict";F.d(me,{$:()=>La,A:()=>ns,B:()=>An,G:()=>is,H:()=>Dr,J:()=>Jn,L:()=>bn,M:()=>_n,N:()=>kn,P:()=>Ge,Q:()=>Tf,R:()=>Rd,T:()=>ur,U:()=>Ws,V:()=>Co,W:()=>Xo,X:()=>Is,Y:()=>na,Z:()=>Vi,_:()=>Uu,a:()=>bi,a0:()=>Bi,a1:()=>yd,a2:()=>Sf,a3:()=>To,a4:()=>$u,a5:()=>xf,a6:()=>_d,a7:()=>ja,a8:()=>Gu,a9:()=>$a,aA:()=>eb,aB:()=>sc,aC:()=>vl,aD:()=>Lf,aE:()=>Ht,aI:()=>Ga,aL:()=>Xn,aa:()=>sa,ab:()=>qu,ac:()=>il,af:()=>Wn,ag:()=>zu,ah:()=>al,ak:()=>md,al:()=>qg,an:()=>cl,ao:()=>Fn,ap:()=>Kt,aq:()=>Un,ar:()=>Fr,as:()=>Cr,at:()=>pn,au:()=>Ld,av:()=>bl,aw:()=>Jt,ax:()=>Ne,ay:()=>Zt,az:()=>ai,b:()=>eo,c:()=>Qa,d:()=>ls,e:()=>Po,f:()=>As,g:()=>fa,h:()=>M_,i:()=>Sd,j:()=>X0,k:()=>xs,l:()=>Ff,m:()=>qf,o:()=>wr,r:()=>T,s:()=>kf,u:()=>le});var f=F(8239),j=F(3854),O=F(8026);function ce(v,p){var m={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&p.indexOf(E)<0&&(m[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var S=0;for(E=Object.getOwnPropertySymbols(v);S<E.length;S++)p.indexOf(E[S])<0&&Object.prototype.propertyIsEnumerable.call(v,E[S])&&(m[E[S]]=v[E[S]])}return m}var st=F(5422),He=F(3910);const wr={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ns={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const An=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},qt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pr=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Hn=new st.Yd("@firebase/auth");function dn(v,...p){Hn.logLevel<=st.in.ERROR&&Hn.error(`Auth (${O.SDK_VERSION}): ${v}`,...p)}function pn(v,...p){throw Li(v,...p)}function Jt(v,...p){return Li(v,...p)}function br(v,p,m){const E=Object.assign(Object.assign({},qt()),{[p]:m});return new j.LL("auth","Firebase",E).create(p,{appName:v.name})}function Wr(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&pn(v,"argument-error"),br(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Li(v,...p){if("string"!=typeof v){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return pr.create(v,...p)}function Ne(v,p,...m){if(!v)throw Li(p,...m)}function Gn(v){const p="INTERNAL ASSERTION FAILED: "+v;throw dn(p),new Error(p)}function Un(v,p){v||Gn(p)}const Pr=new Map;function Zt(v){Un(v instanceof Function,"Expected a class definition");let p=Pr.get(v);return p?(Un(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Pr.set(v,p),p)}function qn(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function rs(){return"http:"===Pn()||"https:"===Pn()}function Pn(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Bt{constructor(p,m){this.shortDelay=p,this.longDelay=m,Un(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(rs()||(0,j.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ye(v,p){Un(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class it{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Gn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Gn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Gn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ws={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},sn=new Bt(3e4,6e4);function Wt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function cn(v,p,m,E){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,f.Z)(function*(v,p,m,E,S={}){return Bn(v,S,(0,f.Z)(function*(){let R={},Z={};E&&("GET"===p?Z=E:R={body:JSON.stringify(E)});const ge=(0,j.xO)(Object.assign({key:v.config.apiKey},Z)).slice(1),je=yield v._getAdditionalHeaders();return je["Content-Type"]="application/json",v.languageCode&&(je["X-Firebase-Locale"]=v.languageCode),it.fetch()(J(v,v.config.apiHost,m,ge),Object.assign({method:p,headers:je,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Bn(v,p,m){return ut.apply(this,arguments)}function ut(){return(ut=(0,f.Z)(function*(v,p,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},ws),p);try{const S=new W(v),R=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const Z=yield R.json();if("needConfirmation"in Z)throw B(v,"account-exists-with-different-credential",Z);if(R.ok&&!("errorMessage"in Z))return Z;{const ge=R.ok?Z.errorMessage:Z.error.message,[je,Oe]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw B(v,"credential-already-in-use",Z);if("EMAIL_EXISTS"===je)throw B(v,"email-already-in-use",Z);if("USER_DISABLED"===je)throw B(v,"user-disabled",Z);const ct=E[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(Oe)throw br(v,ct,Oe);pn(v,ct)}}catch(S){if(S instanceof j.ZR)throw S;pn(v,"network-request-failed")}})).apply(this,arguments)}function Q(v,p,m,E){return $.apply(this,arguments)}function $(){return($=(0,f.Z)(function*(v,p,m,E,S={}){const R=yield cn(v,p,m,E,S);return"mfaPendingCredential"in R&&pn(v,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function J(v,p,m,E){const S=`${p}${m}?${E}`;return v.config.emulator?Ye(v.config,S):`${v.config.apiScheme}://${S}`}class W{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Jt(this.auth,"network-request-failed")),sn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function B(v,p,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const S=Jt(v,p,E);return S.customData._tokenResponse=m,S}function Ve(){return(Ve=(0,f.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function rt(v,p){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,f.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Nt(v,p){return an.apply(this,arguments)}function an(){return(an=(0,f.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function jt(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function q(){return(q=(0,f.Z)(function*(v,p=!1){const m=(0,j.m9)(v),E=yield m.getIdToken(p),S=Be(E);Ne(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,Z=null==R?void 0:R.sign_in_provider;return{claims:S,token:E,authTime:jt(be(S.auth_time)),issuedAtTime:jt(be(S.iat)),expirationTime:jt(be(S.exp)),signInProvider:Z||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function be(v){return 1e3*Number(v)}function Be(v){var p;const[m,E,S]=v.split(".");if(void 0===m||void 0===E||void 0===S)return dn("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,j.tV)(E);return R?JSON.parse(R):(dn("Failed to decode base64 JWT payload"),null)}catch(R){return dn("Caught error parsing JWT payload as JSON",null===(p=R)||void 0===p?void 0:p.toString()),null}}function yt(v,p){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,f.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof j.ZR&&Cn(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function Cn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class ar{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,f.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,f.Z)(function*(){var m;try{yield p.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(m=E)||void 0===m?void 0:m.code)&&p.schedule(!0))}p.schedule()})()}}class gn{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=jt(this.lastLoginAt),this.creationTime=jt(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Et(v){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,f.Z)(function*(v){var p;const m=v.auth,E=yield v.getIdToken(),S=yield yt(v,Nt(m,{idToken:E}));Ne(null==S?void 0:S.users.length,m,"internal-error");const R=S.users[0];v._notifyReloadListener(R);const Z=(null===(p=R.providerUserInfo)||void 0===p?void 0:p.length)?We(R.providerUserInfo):[],ge=Ir(v.providerData,Z),ct=!!v.isAnonymous&&!(v.email&&R.passwordHash||(null==ge?void 0:ge.length)),tn={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ge,metadata:new gn(R.createdAt,R.lastLoginAt),isAnonymous:ct};Object.assign(v,tn)})).apply(this,arguments)}function zc(){return(zc=(0,f.Z)(function*(v){const p=(0,j.m9)(v);yield Et(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Ir(v,p){return[...v.filter(E=>!p.some(S=>S.providerId===E.providerId)),...p]}function We(v){return v.map(p=>{var{providerId:m}=p,E=ce(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function mn(){return(mn=(0,f.Z)(function*(v,p){const m=yield Bn(v,{},(0,f.Z)(function*(){const E=(0,j.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:S,apiKey:R}=v.config,Z=J(v,S,"/v1/token",`key=${R}`),ge=yield v._getAdditionalHeaders();return ge["Content-Type"]="application/x-www-form-urlencoded",it.fetch()(Z,{method:"POST",headers:ge,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Qn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Ne(p.idToken,"internal-error"),Ne(void 0!==p.idToken,"internal-error"),Ne(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function(v){const p=Be(v);return Ne(p,"internal-error"),Ne(void 0!==p.exp,"internal-error"),Ne(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,f.Z)(function*(){return Ne(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,f.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:Z}=yield function(v,p){return mn.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(S,R,Number(Z))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:S,expirationTime:R}=m,Z=new Qn;return E&&(Ne("string"==typeof E,"internal-error",{appName:p}),Z.refreshToken=E),S&&(Ne("string"==typeof S,"internal-error",{appName:p}),Z.accessToken=S),R&&(Ne("number"==typeof R,"internal-error",{appName:p}),Z.expirationTime=R),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Qn,this.toJSON())}_performRefresh(){return Gn("not implemented")}}function zr(v,p){Ne("string"==typeof v||void 0===v,"internal-error",{appName:p})}class yn{constructor(p){var{uid:m,auth:E,stsTokenManager:S}=p,R=ce(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ar(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new gn(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,f.Z)(function*(){const E=yield yt(m,m.stsTokenManager.getToken(m.auth,p));return Ne(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function(v){return q.apply(this,arguments)}(this,p)}reload(){return function(v){return zc.apply(this,arguments)}(this)}_assign(p){this!==p&&(Ne(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new yn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,f.Z)(function*(){let S=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),S=!0),m&&(yield Et(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,f.Z)(function*(){const m=yield p.getIdToken();return yield yt(p,function(v,p){return Ve.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,S,R,Z,ge,je,Oe,ct;const tn=null!==(E=m.displayName)&&void 0!==E?E:void 0,Tn=null!==(S=m.email)&&void 0!==S?S:void 0,Yt=null!==(R=m.phoneNumber)&&void 0!==R?R:void 0,nu=null!==(Z=m.photoURL)&&void 0!==Z?Z:void 0,Di=null!==(ge=m.tenantId)&&void 0!==ge?ge:void 0,di=null!==(je=m._redirectEventId)&&void 0!==je?je:void 0,lt=null!==(Oe=m.createdAt)&&void 0!==Oe?Oe:void 0,Ud=null!==(ct=m.lastLoginAt)&&void 0!==ct?ct:void 0,{uid:ru,emailVerified:iu,isAnonymous:nr,providerData:Kf,stsTokenManager:G_}=m;Ne(ru&&G_,p,"internal-error");const rb=Qn.fromJSON(this.name,G_);Ne("string"==typeof ru,p,"internal-error"),zr(tn,p.name),zr(Tn,p.name),Ne("boolean"==typeof iu,p,"internal-error"),Ne("boolean"==typeof nr,p,"internal-error"),zr(Yt,p.name),zr(nu,p.name),zr(Di,p.name),zr(di,p.name),zr(lt,p.name),zr(Ud,p.name);const ma=new yn({uid:ru,auth:p,email:Tn,emailVerified:iu,displayName:tn,isAnonymous:nr,photoURL:nu,phoneNumber:Yt,tenantId:Di,stsTokenManager:rb,createdAt:lt,lastLoginAt:Ud});return Kf&&Array.isArray(Kf)&&(ma.providerData=Kf.map(Yr=>Object.assign({},Yr))),di&&(ma._redirectEventId=di),ma}static _fromIdTokenResponse(p,m,E=!1){return(0,f.Z)(function*(){const S=new Qn;S.updateFromServerResponse(m);const R=new yn({uid:m.localId,auth:p,stsTokenManager:S,isAnonymous:E});return yield Et(R),R})()}}const bn=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(m,E){var S=this;return(0,f.Z)(function*(){S.storage[m]=E})()}_get(m){var E=this;return(0,f.Z)(function*(){const S=E.storage[m];return void 0===S?null:S})()}_remove(m){var E=this;return(0,f.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function ai(v,p,m){return`firebase:${v}:${p}:${m}`}class _i{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:S,name:R}=this.auth;this.fullUserKey=ai(this.userKey,S.apiKey,R),this.fullPersistenceKey=ai("persistence",S.apiKey,R),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,f.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?yn._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,f.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,f.Z)(function*(){if(!m.length)return new _i(Zt(bn),p,E);const S=(yield Promise.all(m.map(function(){var Oe=(0,f.Z)(function*(ct){if(yield ct._isAvailable())return ct});return function(ct){return Oe.apply(this,arguments)}}()))).filter(Oe=>Oe);let R=S[0]||Zt(bn);const Z=ai(E,p.config.apiKey,p.name);let ge=null;for(const Oe of m)try{const ct=yield Oe._get(Z);if(ct){const tn=yn._fromJSON(p,ct);Oe!==R&&(ge=tn),R=Oe;break}}catch(ct){}const je=S.filter(Oe=>Oe._shouldAllowMigration);return R._shouldAllowMigration&&je.length?(R=je[0],ge&&(yield R._set(Z,ge.toJSON())),yield Promise.all(m.map(function(){var Oe=(0,f.Z)(function*(ct){if(ct!==R)try{yield ct._remove(Z)}catch(tn){}});return function(ct){return Oe.apply(this,arguments)}}())),new _i(R,p,E)):new _i(R,p,E)})()}}function at(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(js(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Au(p))return"Firefox";if(p.includes("silk/"))return"Silk";if($s(p))return"Blackberry";if(wo(p))return"Webos";if(Bs(p))return"Safari";if((p.includes("chrome/")||Su(p))&&!p.includes("edge/"))return"Chrome";if(Cr(p))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Au(v=(0,j.z$)()){return/firefox\//i.test(v)}function Bs(v=(0,j.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Su(v=(0,j.z$)()){return/crios\//i.test(v)}function js(v=(0,j.z$)()){return/iemobile/i.test(v)}function Cr(v=(0,j.z$)()){return/android/i.test(v)}function $s(v=(0,j.z$)()){return/blackberry/i.test(v)}function wo(v=(0,j.z$)()){return/webos/i.test(v)}function Fr(v=(0,j.z$)()){return/iphone|ipad|ipod/i.test(v)}function Kt(v=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function bs(v=(0,j.z$)()){return Fr(v)||Cr(v)||wo(v)||$s(v)||/windows phone/i.test(v)||js(v)}function Ra(v,p=[]){let m;switch(v){case"Browser":m=at((0,j.z$)());break;case"Worker":m=`${at((0,j.z$)())}-${v}`;break;default:m=v}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${O.SDK_VERSION}/${E}`}class Zc{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=R=>new Promise((Z,ge)=>{try{Z(p(R))}catch(je){ge(je)}});E.onAbort=m,this.queue.push(E);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,f.Z)(function*(){var E;if(m.auth.currentUser===p)return;const S=[];try{for(const R of m.queue)yield R(p),R.onAbort&&S.push(R.onAbort)}catch(R){S.reverse();for(const Z of S)try{Z()}catch(ge){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=R)||void 0===E?void 0:E.message})}})()}}class Ma{constructor(p,m,E){this.app=p,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ef(this),this.idTokenSubscription=new Ef(this),this.beforeStateQueue=new Zc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=Zt(m)),this._initializationPromise=this.queue((0,f.Z)(function*(){var S,R;if(!E._deleted&&(E.persistenceManager=yield _i.create(E,p),!E._deleted)){if(null===(S=E._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(Z){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,f.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,f.Z)(function*(){var E;const S=yield m.assertedPersistence.getCurrentUser();let R=S,Z=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ge=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,je=null==R?void 0:R._redirectEventId,Oe=yield m.tryRedirectSignIn(p);(!ge||ge===je)&&(null==Oe?void 0:Oe.user)&&(R=Oe.user,Z=!0)}if(!R)return m.directlySetCurrentUser(null);if(!R._redirectEventId){if(Z)try{yield m.beforeStateQueue.runMiddleware(R)}catch(ge){R=S,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ge))}return R?m.reloadAndSetCurrentUserOrClear(R):m.directlySetCurrentUser(null)}return Ne(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===R._redirectEventId?m.directlySetCurrentUser(R):m.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(p){var m=this;return(0,f.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(S){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,f.Z)(function*(){var E;try{yield Et(p)}catch(S){if("auth/network-request-failed"!==(null===(E=S)||void 0===E?void 0:E.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,f.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,f.Z)(function*(){const E=p?(0,j.m9)(p):null;return E&&Ne(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,f.Z)(function*(){if(!E._deleted)return p&&Ne(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,f.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,f.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,f.Z)(function*(){yield m.assertedPersistence.setPersistence(Zt(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new j.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,f.Z)(function*(){const S=yield E.getOrInitRedirectPersistenceManager(m);return null===p?S.removeCurrentUser():S.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,f.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&Zt(p)||m._popupRedirectResolver;Ne(E,m,"argument-error"),m.redirectPersistenceManager=yield _i.create(m,[Zt(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,f.Z)(function*(){var E,S;return m._isInitialized&&(yield m.queue((0,f.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,f.Z)(function*(){if(p===m.currentUser)return m.queue((0,f.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,S){if(this._deleted)return()=>{};const R="function"==typeof m?m:m.next.bind(m),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return Ne(Z,this,"internal-error"),Z.then(()=>R(this.currentUser)),"function"==typeof m?p.addObserver(m,E,S):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,f.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Ra(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,f.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const S=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return S&&(E["X-Firebase-Client"]=S),E})()}}function Ht(v){return(0,j.m9)(v)}class Ef{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,j.ne)(m=>this.observer=m)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function is(v,p,m){const E=Ht(v);Ne(E._canInitEmulator,E,"emulator-config-failed"),Ne(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const S=!!(null==m?void 0:m.disableWarnings),R=vi(p),{host:Z,port:ge}=function(v){const p=vi(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(E);if(S){const R=S[1];return{host:R,port:Lr(E.substr(R.length+1))}}{const[R,Z]=E.split(":");return{host:R,port:Lr(Z)}}}(p);E.config.emulator={url:`${R}//${Z}${null===ge?"":`:${ge}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Z,port:ge,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function vi(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Lr(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Dr{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Gn("not implemented")}_getIdTokenResponse(p){return Gn("not implemented")}_linkToIdToken(p,m){return Gn("not implemented")}_getReauthenticationResolver(p){return Gn("not implemented")}}function ad(v,p){return ud.apply(this,arguments)}function ud(){return(ud=(0,f.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:resetPassword",Wt(v,p))})).apply(this,arguments)}function cd(v,p){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,f.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Yc(v,p){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,f.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:update",Wt(v,p))})).apply(this,arguments)}function ld(){return(ld=(0,f.Z)(function*(v,p){return Q(v,"POST","/v1/accounts:signInWithPassword",Wt(v,p))})).apply(this,arguments)}function Qc(v,p){return dd.apply(this,arguments)}function dd(){return(dd=(0,f.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:sendOobCode",Wt(v,p))})).apply(this,arguments)}function $g(v,p){return hd.apply(this,arguments)}function hd(){return(hd=(0,f.Z)(function*(v,p){return Qc(v,p)})).apply(this,arguments)}function T_(v,p){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,f.Z)(function*(v,p){return Qc(v,p)})).apply(this,arguments)}function wf(v,p){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,f.Z)(function*(v,p){return Qc(v,p)})).apply(this,arguments)}function Hg(v,p){return fd.apply(this,arguments)}function fd(){return(fd=(0,f.Z)(function*(v,p){return Qc(v,p)})).apply(this,arguments)}function bo(){return(bo=(0,f.Z)(function*(v,p){return Q(v,"POST","/v1/accounts:signInWithEmailLink",Wt(v,p))})).apply(this,arguments)}function If(){return(If=(0,f.Z)(function*(v,p){return Q(v,"POST","/v1/accounts:signInWithEmailLink",Wt(v,p))})).apply(this,arguments)}class Ou extends Dr{constructor(p,m,E,S=null){super("password",E),this._email=p,this._password=m,this._tenantId=S}static _fromEmailAndPassword(p,m){return new Ou(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new Ou(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,f.Z)(function*(){switch(m.signInMethod){case"password":return function(v,p){return ld.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function(v,p){return bo.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:pn(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,f.Z)(function*(){switch(E.signInMethod){case"password":return cd(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(v,p){return If.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:pn(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Tr(v,p){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,f.Z)(function*(v,p){return Q(v,"POST","/v1/accounts:signInWithIdp",Wt(v,p))})).apply(this,arguments)}class Jn extends Dr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Jn(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):pn("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:S}=m,R=ce(m,["providerId","signInMethod"]);if(!E||!S)return null;const Z=new Jn(E,S);return Z.idToken=R.idToken||void 0,Z.accessToken=R.accessToken||void 0,Z.secret=R.secret,Z.nonce=R.nonce,Z.pendingToken=R.pendingToken||null,Z}_getIdTokenResponse(p){return Tr(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Tr(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Tr(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,j.xO)(m)}return p}}function pd(v,p){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,f.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:sendVerificationCode",Wt(v,p))})).apply(this,arguments)}function Pu(){return(Pu=(0,f.Z)(function*(v,p){return Q(v,"POST","/v1/accounts:signInWithPhoneNumber",Wt(v,p))})).apply(this,arguments)}function qs(){return(qs=(0,f.Z)(function*(v,p){const m=yield Q(v,"POST","/v1/accounts:signInWithPhoneNumber",Wt(v,p));if(m.temporaryProof)throw B(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Df={USER_NOT_FOUND:"user-not-found"};function ku(){return(ku=(0,f.Z)(function*(v,p){return Q(v,"POST","/v1/accounts:signInWithPhoneNumber",Wt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Df)})).apply(this,arguments)}class ci extends Dr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new ci({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new ci({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function(v,p){return Pu.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function(v,p){return qs.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function(v,p){return ku.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:S}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:S}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:R}=p;return E||m||S||R?new ci({verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:R}):null}}class ss{constructor(p){var m,E,S,R,Z,ge;const je=(0,j.zd)((0,j.pd)(p)),Oe=null!==(m=je.apiKey)&&void 0!==m?m:null,ct=null!==(E=je.oobCode)&&void 0!==E?E:null,tn=function(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=je.mode)&&void 0!==S?S:null);Ne(Oe&&ct&&tn,"argument-error"),this.apiKey=Oe,this.operation=tn,this.code=ct,this.continueUrl=null!==(R=je.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(Z=je.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(ge=je.tenantId)&&void 0!==ge?ge:null}static parseLink(p){const m=function(v){const p=(0,j.zd)((0,j.pd)(v)).link,m=p?(0,j.zd)((0,j.pd)(p)).deep_link_id:null,E=(0,j.zd)((0,j.pd)(v)).deep_link_id;return(E?(0,j.zd)((0,j.pd)(E)).link:null)||E||m||p||v}(p);try{return new ss(m)}catch(E){return null}}}let _n=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return Ou._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const S=ss.parseLink(E);return Ne(S,"argument-error"),Ou._fromEmailAndCode(m,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class li{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Io extends li{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Ws extends Io{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return Ne("providerId"in m&&"signInMethod"in m,"argument-error"),Jn._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Ne(p.idToken||p.accessToken,"argument-error"),Jn._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Ws.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Ws.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:R,nonce:Z,providerId:ge}=p;if(!E&&!S&&!m&&!R||!ge)return null;try{return new Ws(ge)._credential({idToken:m,accessToken:E,nonce:Z,pendingToken:R})}catch(je){return null}}}let kn=(()=>{class v extends Io{constructor(){super("facebook.com")}static credential(m){return Jn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(E){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Tf=(()=>{class v extends Io{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Jn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:S}=m;if(!E&&!S)return null;try{return v.credential(E,S)}catch(R){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),ur=(()=>{class v extends Io{constructor(){super("github.com")}static credential(m){return Jn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(E){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Xn extends Dr{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Tr(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Tr(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Tr(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:S,pendingToken:R}=m;return E&&S&&R&&E===S?new Xn(E,R):null}static _create(p,m){return new Xn(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Co extends li{constructor(p){Ne(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Co.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Co.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Xn.fromJSON(p);return Ne(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return Xn._create(E,m)}catch(S){return null}}}let Xo=(()=>{class v extends Io{constructor(){super("twitter.com")}static credential(m,E){return Jn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=m;if(!E||!S)return null;try{return v.credential(E,S)}catch(R){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function er(v,p){return ka.apply(this,arguments)}function ka(){return(ka=(0,f.Z)(function*(v,p){return Q(v,"POST","/v1/accounts:signUp",Wt(v,p))})).apply(this,arguments)}class Ar{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,S=!1){return(0,f.Z)(function*(){const R=yield yn._fromIdTokenResponse(p,E,S),Z=Lu(E);return new Ar({user:R,providerId:Z,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,f.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const S=Lu(E);return new Ar({user:p,providerId:S,_tokenResponse:E,operationType:m})})()}}function Lu(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Is(v){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,f.Z)(function*(v){var p;const m=Ht(v);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new Ar({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield er(m,{returnSecureToken:!0}),S=yield Ar._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class ea extends j.ZR{constructor(p,m,E,S){var R;super(m.code,m.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,ea.prototype),this.customData={appName:p.name,tenantId:null!==(R=p.tenantId)&&void 0!==R?R:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,S){return new ea(p,m,E,S)}}function ft(v,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?ea._fromErrorAndOperation(v,R,p,E):R})}function gd(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function md(v,p){return el.apply(this,arguments)}function el(){return(el=(0,f.Z)(function*(v,p){const m=(0,j.m9)(v);yield Zs(!0,m,p);const{providerUserInfo:E}=yield rt(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),S=gd(E||[]);return m.providerData=m.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Cs(v,p){return zs.apply(this,arguments)}function zs(){return(zs=(0,f.Z)(function*(v,p,m=!1){const E=yield yt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return Ar._forOperation(v,"link",E)})).apply(this,arguments)}function Zs(v,p,m){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,f.Z)(function*(v,p,m){yield Et(p);const S=!1===v?"provider-already-linked":"no-such-provider";Ne(gd(p.providerData).has(m)===v,p.auth,S)})).apply(this,arguments)}function Ie(v,p){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,f.Z)(function*(v,p,m=!1){var E;const{auth:S}=v,R="reauthenticate";try{const Z=yield yt(v,ft(S,R,p,v),m);Ne(Z.idToken,S,"internal-error");const ge=Be(Z.idToken);Ne(ge,S,"internal-error");const{sub:je}=ge;return Ne(v.uid===je,S,"user-mismatch"),Ar._forOperation(v,R,Z)}catch(Z){throw"auth/user-not-found"===(null===(E=Z)||void 0===E?void 0:E.code)&&pn(S,"user-mismatch"),Z}})).apply(this,arguments)}function ta(v,p){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,f.Z)(function*(v,p,m=!1){const E="signIn",S=yield ft(v,E,p),R=yield Ar._fromIdTokenResponse(v,E,S);return m||(yield v._updateCurrentUser(R.user)),R})).apply(this,arguments)}function na(v,p){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,f.Z)(function*(v,p){return ta(Ht(v),p)})).apply(this,arguments)}function Vi(v,p){return ra.apply(this,arguments)}function ra(){return(ra=(0,f.Z)(function*(v,p){const m=(0,j.m9)(v);return yield Zs(!1,m,p.providerId),Cs(m,p)})).apply(this,arguments)}function Uu(v,p){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,f.Z)(function*(v,p){return Ie((0,j.m9)(v),p)})).apply(this,arguments)}function ju(v,p){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,f.Z)(function*(v,p){return Q(v,"POST","/v1/accounts:signInWithCustomToken",Wt(v,p))})).apply(this,arguments)}function La(v,p){return tr.apply(this,arguments)}function tr(){return(tr=(0,f.Z)(function*(v,p){const m=Ht(v),E=yield ju(m,{token:p,returnSecureToken:!0}),S=yield Ar._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class mr{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?tl._fromServerResponse(p,m):pn(p,"internal-error")}}class tl extends mr{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new tl(m)}}function Ui(v,p,m){var E;Ne((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),Ne(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Ne(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(Ne(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Bi(v,p,m){return Va.apply(this,arguments)}function Va(){return(Va=(0,f.Z)(function*(v,p,m){const E=(0,j.m9)(v),S={requestType:"PASSWORD_RESET",email:p};m&&Ui(E,S,m),yield T_(E,S)})).apply(this,arguments)}function yd(v,p,m){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,f.Z)(function*(v,p,m){yield ad((0,j.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Sf(v,p){return Do.apply(this,arguments)}function Do(){return(Do=(0,f.Z)(function*(v,p){yield Yc((0,j.m9)(v),{oobCode:p})})).apply(this,arguments)}function To(v,p){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,f.Z)(function*(v,p){const m=(0,j.m9)(v),E=yield ad(m,{oobCode:p}),S=E.requestType;switch(Ne(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ne(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ne(E.mfaInfo,m,"internal-error");default:Ne(E.email,m,"internal-error")}let R=null;return E.mfaInfo&&(R=mr._fromServerResponse(Ht(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function $u(v,p){return nl.apply(this,arguments)}function nl(){return(nl=(0,f.Z)(function*(v,p){const{data:m}=yield To((0,j.m9)(v),p);return m.email})).apply(this,arguments)}function xf(v,p,m){return ia.apply(this,arguments)}function ia(){return(ia=(0,f.Z)(function*(v,p,m){const E=Ht(v),S=yield er(E,{returnSecureToken:!0,email:p,password:m}),R=yield Ar._fromIdTokenResponse(E,"signIn",S);return yield E._updateCurrentUser(R.user),R})).apply(this,arguments)}function _d(v,p,m){return na((0,j.m9)(v),_n.credential(p,m))}function ja(v,p,m){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,f.Z)(function*(v,p,m){const E=(0,j.m9)(v),S={requestType:"EMAIL_SIGNIN",email:p};Ne(m.handleCodeInApp,E,"argument-error"),m&&Ui(E,S,m),yield wf(E,S)})).apply(this,arguments)}function Gu(v,p){const m=ss.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function $a(v,p,m){return Rf.apply(this,arguments)}function Rf(){return(Rf=(0,f.Z)(function*(v,p,m){const E=(0,j.m9)(v),S=_n.credentialWithLink(p,m||qn());return Ne(S._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),na(E,S)})).apply(this,arguments)}function A_(v,p){return cr.apply(this,arguments)}function cr(){return(cr=(0,f.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:createAuthUri",Wt(v,p))})).apply(this,arguments)}function sa(v,p){return xn.apply(this,arguments)}function xn(){return(xn=(0,f.Z)(function*(v,p){const E={identifier:p,continueUri:rs()?qn():"http://localhost"},{signinMethods:S}=yield A_((0,j.m9)(v),E);return S||[]})).apply(this,arguments)}function qu(v,p){return rl.apply(this,arguments)}function rl(){return(rl=(0,f.Z)(function*(v,p){const m=(0,j.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Ui(m.auth,S,p);const{email:R}=yield $g(m.auth,S);R!==v.email&&(yield v.reload())})).apply(this,arguments)}function il(v,p,m){return sl.apply(this,arguments)}function sl(){return(sl=(0,f.Z)(function*(v,p,m){const E=(0,j.m9)(v),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Ui(E.auth,R,m);const{email:Z}=yield Hg(E.auth,R);Z!==v.email&&(yield v.reload())})).apply(this,arguments)}function ol(v,p){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,f.Z)(function*(v,p){return cn(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Wn(v,p){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,f.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,j.m9)(v),R={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},Z=yield yt(E,ol(E.auth,R));E.displayName=Z.displayName||null,E.photoURL=Z.photoUrl||null;const ge=E.providerData.find(({providerId:je})=>"password"===je);ge&&(ge.displayName=E.displayName,ge.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Z)})).apply(this,arguments)}function zu(v,p){return vd((0,j.m9)(v),p,null)}function al(v,p){return vd((0,j.m9)(v),null,p)}function vd(v,p,m){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,f.Z)(function*(v,p,m){const{auth:E}=v,R={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(R.email=p),m&&(R.password=m);const Z=yield yt(v,cd(E,R));yield v._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class Ei{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class Ed extends Ei{constructor(p,m,E,S){super(p,m,E),this.username=S}}class Mf extends Ei{constructor(p,m){super(p,"facebook.com",m)}}class Ku extends Ed{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class ul extends Ei{constructor(p,m){super(p,"google.com",m)}}class wi extends Ed{constructor(p,m,E){super(p,"twitter.com",m,E)}}function qg(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function(v){var p,m;if(!v)return null;const{providerId:E}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},R=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&(null==v?void 0:v.idToken)){const Z=null===(m=null===(p=Be(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(Z)return new Ei(R,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!E)return null;switch(E){case"facebook.com":return new Mf(R,S);case"github.com":return new Ku(R,S);case"google.com":return new ul(R,S);case"twitter.com":return new wi(R,S,v.screenName||null);case"custom":case"anonymous":return new Ei(R,null);default:return new Ei(R,E,S)}}(m)}class Ds{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new Ds("enroll",p)}static _fromMfaPendingCredential(p){return new Ds("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return Ds._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(E=p.multiFactorSession)||void 0===E?void 0:E.idToken)return Ds._fromIdtoken(p.multiFactorSession.idToken)}return null}}class So{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=Ht(p),S=m.customData._serverResponse,R=(S.mfaInfo||[]).map(ge=>mr._fromServerResponse(E,ge));Ne(S.mfaPendingCredential,E,"internal-error");const Z=Ds._fromMfaPendingCredential(S.mfaPendingCredential);return new So(Z,R,function(){var ge=(0,f.Z)(function*(je){const Oe=yield je._process(E,Z);delete S.mfaInfo,delete S.mfaPendingCredential;const ct=Object.assign(Object.assign({},S),{idToken:Oe.idToken,refreshToken:Oe.refreshToken});switch(m.operationType){case"signIn":const tn=yield Ar._fromIdTokenResponse(E,m.operationType,ct);return yield E._updateCurrentUser(tn.user),tn;case"reauthenticate":return Ne(m.user,E,"internal-error"),Ar._forOperation(m.user,m.operationType,ct);default:pn(E,"internal-error")}});return function(je){return ge.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,f.Z)(function*(){return m.signInResolver(p)})()}}function cl(v,p){var m;const E=(0,j.m9)(v),S=p;return Ne(p.customData.operationType,E,"argument-error"),Ne(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),So._fromError(E,S)}function ll(v,p){return cn(v,"POST","/v2/accounts/mfaEnrollment:start",Wt(v,p))}class Ju{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>mr._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Ju(p)}getSession(){var p=this;return(0,f.Z)(function*(){return Ds._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var E=this;return(0,f.Z)(function*(){const S=p,R=yield E.getSession(),Z=yield yt(E.user,S._process(E.user.auth,R,m));return yield E.user._updateTokensIfNecessary(Z),E.user.reload()})()}unenroll(p){var m=this;return(0,f.Z)(function*(){var E;const S="string"==typeof p?p:p.uid,R=yield m.user.getIdToken(),Z=yield yt(m.user,function(v,p){return cn(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(v,p))}(m.user.auth,{idToken:R,mfaEnrollmentId:S}));m.enrolledFactors=m.enrolledFactors.filter(({uid:ge})=>ge!==S),yield m.user._updateTokensIfNecessary(Z);try{yield m.user.reload()}catch(ge){if("auth/user-token-expired"!==(null===(E=ge)||void 0===E?void 0:E.code))throw ge}})()}}const Xu=new WeakMap;function Fn(v){const p=(0,j.m9)(v);return Xu.has(p)||Xu.set(p,Ju._fromUser(p)),Xu.get(p)}const ln="__sak";class Xs{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(ln,"1"),this.storage.removeItem(ln),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const eo=(()=>{class v extends Xs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const v=(0,j.z$)();return Bs(v)||Fr(v)}()&&function(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=bs(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),R=this.localCache[E];S!==R&&m(E,R,S)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((ge,je,Oe)=>{this.notifyListeners(ge,Oe)});const S=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ge=this.storage.getItem(S);if(m.newValue!==ge)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!E)return}const R=()=>{const ge=this.storage.getItem(S);!E&&this.localCache[S]===ge||this.notifyListeners(S,ge)},Z=this.storage.getItem(S);(0,j.w1)()&&10===document.documentMode&&Z!==m.newValue&&m.newValue!==m.oldValue?setTimeout(R,10):R()}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const R of Array.from(S))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var S=()=>super._set,R=this;return(0,f.Z)(function*(){yield S().call(R,m,E),R.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,S=this;return(0,f.Z)(function*(){const R=yield E().call(S,m);return S.localCache[m]=JSON.stringify(R),R})()}_remove(m){var E=()=>super._remove,S=this;return(0,f.Z)(function*(){yield E().call(S,m),delete S.localCache[m]})()}}return v.type="LOCAL",v})(),bi=(()=>{class v extends Xs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let Id=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(R=>R.isListeningto(m));if(E)return E;const S=new v(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,f.Z)(function*(){const S=m,{eventId:R,eventType:Z,data:ge}=S.data,je=E.handlersMap[Z];if(!(null==je?void 0:je.size))return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:Z});const Oe=Array.from(je).map(function(){var tn=(0,f.Z)(function*(Tn){return Tn(S.origin,ge)});return function(Tn){return tn.apply(this,arguments)}}()),ct=yield function(v){return Promise.all(v.map(function(){var p=(0,f.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(Oe);S.ports[0].postMessage({status:"done",eventId:R,eventType:Z,response:ct})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ga(v="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return v+m}class ua{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var S=this;return(0,f.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let Z,ge;return new Promise((je,Oe)=>{const ct=Ga("",20);R.port1.start();const tn=setTimeout(()=>{Oe(new Error("unsupported_event"))},E);ge={messageChannel:R,onMessage(Tn){const Yt=Tn;if(Yt.data.eventId===ct)switch(Yt.data.status){case"ack":clearTimeout(tn),Z=setTimeout(()=>{Oe(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),je(Yt.data.response);break;default:clearTimeout(tn),clearTimeout(Z),Oe(new Error("invalid_response"))}}},S.handlers.add(ge),R.port1.addEventListener("message",ge.onMessage),S.target.postMessage({eventType:p,eventId:ct,data:m},[R.port2])}).finally(()=>{ge&&S.removeMessageHandler(ge)})})()}}function Rn(){return window}function ji(){return void 0!==Rn().WorkerGlobalScope&&"function"==typeof Rn().importScripts}function Mn(){return(Mn=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Wa="firebaseLocalStorageDb",os="firebaseLocalStorage",no="fbase_key";class Ii{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function la(v,p){return v.transaction([os],p?"readwrite":"readonly").objectStore(os)}function Cd(){const v=indexedDB.open(Wa,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(os,{keyPath:no})}catch(S){m(S)}}),v.addEventListener("success",(0,f.Z)(function*(){const E=v.result;E.objectStoreNames.contains(os)?p(E):(E.close(),yield function(){const v=indexedDB.deleteDatabase(Wa);return new Ii(v).toPromise()}(),p(yield Cd()))}))})}function Of(v,p,m){return as.apply(this,arguments)}function as(){return(as=(0,f.Z)(function*(v,p,m){const E=la(v,!0).put({[no]:p,value:m});return new Ii(E).toPromise()})).apply(this,arguments)}function za(){return(za=(0,f.Z)(function*(v,p){const m=la(v,!1).get(p),E=yield new Ii(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Dn(v,p){const m=la(v,!0).delete(p);return new Ii(m).toPromise()}const Sd=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,f.Z)(function*(){return m.db||(m.db=yield Cd()),m.db})()}_withRetries(m){var E=this;return(0,f.Z)(function*(){let S=0;for(;;)try{const R=yield E._openDb();return yield m(R)}catch(R){if(S++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,f.Z)(function*(){return ji()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,f.Z)(function*(){m.receiver=Id._getInstance(ji()?self:null),m.receiver._subscribe("keyChanged",function(){var E=(0,f.Z)(function*(S,R){return{keyProcessed:(yield m._poll()).includes(R.key)}});return function(S,R){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,f.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,f.Z)(function*(){var E,S;if(m.activeServiceWorker=yield function(){return Mn.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new ua(m.activeServiceWorker);const R=yield m.sender._send("ping",{},800);!R||(null===(E=R[0])||void 0===E?void 0:E.fulfilled)&&(null===(S=R[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,f.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Cd();return yield Of(m,ln,"1"),yield Dn(m,ln),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,f.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var S=this;return(0,f.Z)(function*(){return S._withPendingWrite((0,f.Z)(function*(){return yield S._withRetries(R=>Of(R,m,E)),S.localCache[m]=E,S.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,f.Z)(function*(){const S=yield E._withRetries(R=>function(v,p){return za.apply(this,arguments)}(R,m));return E.localCache[m]=S,S})()}_remove(m){var E=this;return(0,f.Z)(function*(){return E._withPendingWrite((0,f.Z)(function*(){return yield E._withRetries(S=>Dn(S,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,f.Z)(function*(){const E=yield m._withRetries(Z=>{const ge=la(Z,!1).getAll();return new Ii(ge).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:Z,value:ge}of E)R.add(Z),JSON.stringify(m.localCache[Z])!==JSON.stringify(ge)&&(m.notifyListeners(Z,ge),S.push(Z));for(const Z of Object.keys(m.localCache))m.localCache[Z]&&!R.has(Z)&&(m.notifyListeners(Z,null),S.push(Z));return S})()}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const R of Array.from(S))R(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function xd(v,p){return cn(v,"POST","/v2/accounts/mfaSignIn:start",Wt(v,p))}function Za(){return(Za=(0,f.Z)(function*(v){return(yield cn(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function nc(v){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=p,E.onerror=S=>{const R=Jt("internal-error");R.customData=S,m(R)},E.type="text/javascript",E.charset="UTF-8",function(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(E)})}function Ka(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Ln=1e12;class rc{constructor(p){this.auth=p,this.counter=Ln,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new yr(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||Ln;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Ln))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,f.Z)(function*(){var E;return null===(E=m._widgets.get(p||Ln))||void 0===E||E.execute(),""})()}}class yr{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof p?document.getElementById(p):p;Ne(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}();const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ic=Ka("rcb"),Sr=new Bt(3e4,6e4);class No{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Rn().grecaptcha}load(p,m=""){return Ne((v=m).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Rn().grecaptcha):new Promise((E,S)=>{const R=Rn().setTimeout(()=>{S(Jt(p,"network-request-failed"))},Sr.get());Rn()[ic]=()=>{Rn().clearTimeout(R),delete Rn()[ic];const ge=Rn().grecaptcha;if(!ge)return void S(Jt(p,"internal-error"));const je=ge.render;ge.render=(Oe,ct)=>{const tn=je(Oe,ct);return this.counter++,tn},this.hostLanguage=m,E(ge)},nc(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:ic,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(R),S(Jt(p,"internal-error"))})});var v}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Rn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class xr{load(p){return(0,f.Z)(function*(){return new rc(p)})()}clearedOneInstance(){}}const da="recaptcha",Oo={theme:"light",type:"image"};class Rd{constructor(p,m=Object.assign({},Oo),E){this.parameters=m,this.type=da,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ht(E),this.isInvisible="invisible"===this.parameters.size,Ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof p?document.getElementById(p):p;Ne(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xr:new No,this.validateStartingState()}verify(){var p=this;return(0,f.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(R=>{const Z=ge=>{!ge||(p.tokenChangeListeners.delete(Z),R(ge))};p.tokenChangeListeners.add(Z),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Ne(!this.parameters.sitekey,this.auth,"argument-error"),Ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=Rn()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){Ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,f.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,f.Z)(function*(){Ne(rs()&&!ji(),p.auth,"internal-error"),yield function(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function(v){return Za.apply(this,arguments)}(p.auth);Ne(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return Ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Md{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=ci._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function kf(v,p,m){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,f.Z)(function*(v,p,m){const E=Ht(v),S=yield U(E,p,(0,j.m9)(m));return new Md(S,R=>na(E,R))})).apply(this,arguments)}function Ff(v,p,m){return I.apply(this,arguments)}function I(){return(I=(0,f.Z)(function*(v,p,m){const E=(0,j.m9)(v);yield Zs(!1,E,"phone");const S=yield U(E.auth,p,(0,j.m9)(m));return new Md(S,R=>Vi(E,R))})).apply(this,arguments)}function T(v,p,m){return M.apply(this,arguments)}function M(){return(M=(0,f.Z)(function*(v,p,m){const E=(0,j.m9)(v),S=yield U(E.auth,p,(0,j.m9)(m));return new Md(S,R=>Uu(E,R))})).apply(this,arguments)}function U(v,p,m){return X.apply(this,arguments)}function X(){return(X=(0,f.Z)(function*(v,p,m){var E;const S=yield m.verify();try{let R;if(Ne("string"==typeof S,v,"argument-error"),Ne(m.type===da,v,"argument-error"),R="string"==typeof p?{phoneNumber:p}:p,"session"in R){const Z=R.session;if("phoneNumber"in R)return Ne("enroll"===Z.type,v,"internal-error"),(yield ll(v,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{Ne("signin"===Z.type,v,"internal-error");const ge=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return Ne(ge,v,"missing-multi-factor-info"),(yield xd(v,{mfaPendingCredential:Z.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield pd(v,{phoneNumber:R.phoneNumber,recaptchaToken:S});return Z}}finally{m._reset()}})).apply(this,arguments)}function le(v,p){return De.apply(this,arguments)}function De(){return(De=(0,f.Z)(function*(v,p){yield Cs((0,j.m9)(v),p)})).apply(this,arguments)}let Ge=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Ht(m)}verifyPhoneNumber(m,E){return U(this.auth,m,(0,j.m9)(E))}static credential(m,E){return ci._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:S}=m;return E&&S?ci._fromTokenResponse(E,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function et(v,p){return p?Zt(p):(Ne(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class gt extends Dr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Tr(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Tr(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Tr(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Tt(v){return ta(v.auth,new gt(v),v.bypassAuthState)}function ht(v){const{auth:p,user:m}=v;return Ne(m,p,"internal-error"),Ie(m,new gt(v),v.bypassAuthState)}function jn(v){return _r.apply(this,arguments)}function _r(){return(_r=(0,f.Z)(function*(v){const{auth:p,user:m}=v;return Ne(m,p,"internal-error"),Cs(m,new gt(v),v.bypassAuthState)})).apply(this,arguments)}class Hi{constructor(p,m,E,S,R=!1){this.auth=p,this.resolver=E,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,f.Z)(function*(E,S){p.pendingPromise={resolve:E,reject:S};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(R){p.reject(R)}});return function(E,S){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,f.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:R,tenantId:Z,error:ge,type:je}=p;if(ge)return void m.reject(ge);const Oe={auth:m.auth,requestUri:E,sessionId:S,tenantId:Z||void 0,postBody:R||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(je)(Oe))}catch(ct){m.reject(ct)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Tt;case"linkViaPopup":case"linkViaRedirect":return jn;case"reauthViaPopup":case"reauthViaRedirect":return ht;default:pn(this.auth,"internal-error")}}resolve(p){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ya=new Bt(2e3,1e4);function Qa(v,p,m){return gl.apply(this,arguments)}function gl(){return(gl=(0,f.Z)(function*(v,p,m){const E=Ht(v);Wr(v,p,li);const S=et(E,m);return new Ci(E,"signInViaPopup",p,S).executeNotNull()})).apply(this,arguments)}function Po(v,p,m){return ha.apply(this,arguments)}function ha(){return(ha=(0,f.Z)(function*(v,p,m){const E=(0,j.m9)(v);Wr(E.auth,p,li);const S=et(E.auth,m);return new Ci(E.auth,"reauthViaPopup",p,S,E).executeNotNull()})).apply(this,arguments)}function ls(v,p,m){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,f.Z)(function*(v,p,m){const E=(0,j.m9)(v);Wr(E.auth,p,li);const S=et(E.auth,m);return new Ci(E.auth,"linkViaPopup",p,S,E).executeNotNull()})).apply(this,arguments)}let Ci=(()=>{class v extends Hi{constructor(m,E,S,R,Z){super(m,E,R,Z),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,f.Z)(function*(){const E=yield m.execute();return Ne(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,f.Z)(function*(){Un(1===m.filter.length,"Popup operations only handle one event");const E=Ga();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(Jt(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,S;this.pollId=(null===(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Jt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Ya.get())};m()}}return v.currentPopupAction=null,v})();const vn=new Map;class ml extends Hi{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,f.Z)(function*(){let E=vn.get(m.auth._key());if(!E){try{const R=(yield function(v,p){return Gi.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(R)}catch(S){E=()=>Promise.reject(S)}vn.set(m.auth._key(),E)}return m.bypassAuthState||vn.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,f.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const S=yield E.auth._redirectUserForId(p.eventId);if(S)return E.user=S,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Gi(){return(Gi=(0,f.Z)(function*(v,p){const m=ko(p),E=Zg(v);if(!(yield E._isAvailable()))return!1;const S="true"===(yield E._get(m));return yield E._remove(m),S})).apply(this,arguments)}function Ja(v,p){return _l.apply(this,arguments)}function _l(){return(_l=(0,f.Z)(function*(v,p){return Zg(v)._set(ko(p),"true")})).apply(this,arguments)}function Lf(){vn.clear()}function vl(v,p){vn.set(v._key(),p)}function Zg(v){return Zt(v._redirectPersistence)}function ko(v){return ai("pendingRedirect",v.config.apiKey,v.name)}function As(v,p,m){return function(v,p,m){return ds.apply(this,arguments)}(v,p,m)}function ds(){return(ds=(0,f.Z)(function*(v,p,m){const E=Ht(v);Wr(v,p,li);const S=et(E,m);return yield Ja(S,E),S._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function M_(v,p,m){return function(v,p,m){return Nd.apply(this,arguments)}(v,p,m)}function Nd(){return(Nd=(0,f.Z)(function*(v,p,m){const E=(0,j.m9)(v);Wr(E.auth,p,li);const S=et(E.auth,m);yield Ja(S,E.auth);const R=yield N_(E);return S._openRedirect(E.auth,p,"reauthViaRedirect",R)})).apply(this,arguments)}function fa(v,p,m){return function(v,p,m){return Od.apply(this,arguments)}(v,p,m)}function Od(){return(Od=(0,f.Z)(function*(v,p,m){const E=(0,j.m9)(v);Wr(E.auth,p,li);const S=et(E.auth,m);yield Zs(!1,E,p.providerId),yield Ja(S,E.auth);const R=yield N_(E);return S._openRedirect(E.auth,p,"linkViaRedirect",R)})).apply(this,arguments)}function X0(v,p){return eu.apply(this,arguments)}function eu(){return(eu=(0,f.Z)(function*(v,p){return yield Ht(v)._initializationPromise,sc(v,p,!1)})).apply(this,arguments)}function sc(v,p){return Yg.apply(this,arguments)}function Yg(){return(Yg=(0,f.Z)(function*(v,p,m=!1){const E=Ht(v),S=et(E,p),Z=yield new ml(E,S,m).execute();return Z&&!m&&(delete Z.user._redirectEventId,yield E._persistUserIfCurrent(Z.user),yield E._setRedirectUser(null,p)),Z})).apply(this,arguments)}function N_(v){return wl.apply(this,arguments)}function wl(){return(wl=(0,f.Z)(function*(v){const p=Ga(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class eb{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oc(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!oc(p)){const S=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Jt(this.auth,S))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vf(p))}saveEventToCache(p){this.cachedEventUids.add(Vf(p)),this.lastProcessedEventTime=Date.now()}}function Vf(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function oc({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function bl(v){return ac.apply(this,arguments)}function ac(){return(ac=(0,f.Z)(function*(v,p={}){return cn(v,"GET","/v1/projects",p)})).apply(this,arguments)}const uc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tb=/^https?/;function Xg(){return(Xg=(0,f.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield bl(v);for(const m of p)try{if(Il(m))return}catch(E){}pn(v,"unauthorized-domain")})).apply(this,arguments)}function Il(v){const p=qn(),{protocol:m,hostname:E}=new URL(p);if(v.startsWith("chrome-extension://")){const Z=new URL(v);return""===Z.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&Z.hostname===E}if(!tb.test(m))return!1;if(uc.test(v))return E===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const Uf=new Bt(3e4,6e4);function Pd(){const v=Rn().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Cl=null;function pa(v){return Cl=Cl||function(v){return new Promise((p,m)=>{var E,S,R;function Z(){Pd(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Pd(),m(Jt(v,"network-request-failed"))},timeout:Uf.get()})}if(null===(S=null===(E=Rn().gapi)||void 0===E?void 0:E.iframes)||void 0===S?void 0:S.Iframe)p(gapi.iframes.getContext());else{if(!(null===(R=Rn().gapi)||void 0===R?void 0:R.load)){const ge=Ka("iframefcb");return Rn()[ge]=()=>{gapi.load?Z():m(Jt(v,"network-request-failed"))},nc(`https://apis.google.com/js/api.js?onload=${ge}`).catch(je=>m(je))}Z()}}).catch(p=>{throw Cl=null,p})}(v),Cl}const P_=new Bt(5e3,15e3),jf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},F_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ss(v){const p=v.config;Ne(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?Ye(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:v.name,v:O.SDK_VERSION},S=F_.get(v.config.apiHost);S&&(E.eid=S);const R=v._getFrameworks();return R.length&&(E.fw=R.join(",")),`${m}?${(0,j.xO)(E).slice(1)}`}function Fd(){return(Fd=(0,f.Z)(function*(v){const p=yield pa(v),m=Rn().gapi;return Ne(m,v,"internal-error"),p.open({where:document.body,url:Ss(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jf,dontclear:!0},E=>new Promise(function(){var S=(0,f.Z)(function*(R,Z){yield E.restyle({setHideOnLeave:!1});const ge=Jt(v,"network-request-failed"),je=Rn().setTimeout(()=>{Z(ge)},P_.get());function Oe(){Rn().clearTimeout(je),R(E)}E.ping(Oe).then(Oe,()=>{Z(ge)})});return function(R,Z){return S.apply(this,arguments)}}()))})).apply(this,arguments)}const em={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Hf{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Ld(v,p,m,E,S,R){Ne(v.config.authDomain,v,"auth-domain-config-required"),Ne(v.config.apiKey,v,"invalid-api-key");const Z={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:O.SDK_VERSION,eventId:S};if(p instanceof li){p.setDefaultLanguage(v.languageCode),Z.providerId=p.providerId||"",(0,j.xb)(p.getCustomParameters())||(Z.customParameters=JSON.stringify(p.getCustomParameters()));for(const[je,Oe]of Object.entries(R||{}))Z[je]=Oe}if(p instanceof Io){const je=p.getScopes().filter(Oe=>""!==Oe);je.length>0&&(Z.scopes=je.join(","))}v.tenantId&&(Z.tid=v.tenantId);const ge=Z;for(const je of Object.keys(ge))void 0===ge[je]&&delete ge[je];return`${function({config:v}){return v.emulator?Ye(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,j.xO)(ge).slice(1)}`}const ga="webStorageSupport",xs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bi,this._completeRedirectFn=sc,this._overrideRedirectResult=vl}_openPopup(p,m,E,S){var R=this;return(0,f.Z)(function*(){var Z;Un(null===(Z=R.eventManagers[p._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const ge=Ld(p,m,E,qn(),S);return function(v,p,m,E=500,S=600){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),Z=Math.max((window.screen.availWidth-E)/2,0).toString();let ge="";const je=Object.assign(Object.assign({},em),{width:E.toString(),height:S.toString(),top:R,left:Z}),Oe=(0,j.z$)().toLowerCase();m&&(ge=Su(Oe)?"_blank":m),Au(Oe)&&(p=p||"http://localhost",je.scrollbars="yes");const ct=Object.entries(je).reduce((Tn,[Yt,nu])=>`${Tn}${Yt}=${nu},`,"");if(function(v=(0,j.z$)()){var p;return Fr(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Oe)&&"_self"!==ge)return function(v,p){const m=document.createElement("a");m.href=v,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",ge),new Hf(null);const tn=window.open(p||"",ge,ct);Ne(tn,v,"popup-blocked");try{tn.focus()}catch(Tn){}return new Hf(tn)}(p,ge,Ga())})()}_openRedirect(p,m,E,S){var R=this;return(0,f.Z)(function*(){return yield R._originValidation(p),v=Ld(p,m,E,qn(),S),Rn().location.href=v,new Promise(()=>{});var v})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:S,promise:R}=this.eventManagers[m];return S?Promise.resolve(S):(Un(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,f.Z)(function*(){const E=yield function(v){return Fd.apply(this,arguments)}(p),S=new eb(p);return E.register("authEvent",R=>(Ne(null==R?void 0:R.authEvent,p,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:S},m.iframes[p._key()]=E,S})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(ga,{type:ga},S=>{var R;const Z=null===(R=null==S?void 0:S[0])||void 0===R?void 0:R[ga];void 0!==Z&&m(!!Z),pn(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(v){return Xg.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return bs()||Bs()||Fr()}};class Vd extends class{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return Gn("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Vd(p)}_finalizeEnroll(p,m,E){return function(v,p){return cn(v,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(v,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function(v,p){return cn(v,"POST","/v2/accounts/mfaSignIn:finalize",Wt(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let qf=(()=>{class v{constructor(){}static assertion(m){return Vd._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var v,Wf="@firebase/auth";class Dl{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,f.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{var S;p((null===(S=E)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}v="Browser",(0,O._registerComponent)(new He.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),S=p.getProvider("heartbeat"),{apiKey:R,authDomain:Z}=E.options;return((ge,je)=>{Ne(R&&!R.includes(":"),"invalid-api-key",{appName:ge.name}),Ne(!(null==Z?void 0:Z.includes(":")),"argument-error",{appName:ge.name});const Oe={apiKey:R,authDomain:Z,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ra(v)},ct=new Ma(ge,je,Oe);return function(v,p){const m=(null==p?void 0:p.persistence)||[],E=(Array.isArray(m)?m:[m]).map(Zt);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(E,null==p?void 0:p.popupRedirectResolver)}(ct,m),ct})(E,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new He.wA("auth-internal",p=>{const m=Ht(p.getProvider("auth").getImmediate());return new Dl(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(Wf,"0.20.4",void 0),(0,O.registerVersion)(Wf,"0.20.4","esm2017")},3854:(Ze,me,F)=>{"use strict";F.d(me,{BH:()=>pe,LL:()=>He,ZR:()=>st,zI:()=>ze,US:()=>oe,tV:()=>G,L:()=>se,$s:()=>cn,r3:()=>pr,Sg:()=>Pe,ne:()=>Gn,vZ:()=>pn,ZB:()=>V,pd:()=>Li,m9:()=>ut,z$:()=>de,jU:()=>Ae,ru:()=>Re,d:()=>Ce,xb:()=>Hn,w1:()=>Qe,hl:()=>Me,uI:()=>we,UG:()=>Ue,b$:()=>Se,G6:()=>_t,Mn:()=>zt,xO:()=>br,zd:()=>Wr,eu:()=>Te});const re=function(Q){const $=[];let J=0;for(let W=0;W<Q.length;W++){let B=Q.charCodeAt(W);B<128?$[J++]=B:B<2048?($[J++]=B>>6|192,$[J++]=63&B|128):55296==(64512&B)&&W+1<Q.length&&56320==(64512&Q.charCodeAt(W+1))?(B=65536+((1023&B)<<10)+(1023&Q.charCodeAt(++W)),$[J++]=B>>18|240,$[J++]=B>>12&63|128,$[J++]=B>>6&63|128,$[J++]=63&B|128):($[J++]=B>>12|224,$[J++]=B>>6&63|128,$[J++]=63&B|128)}return $},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Q,$){if(!Array.isArray(Q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,W=[];for(let B=0;B<Q.length;B+=3){const ve=Q[B],Ve=B+1<Q.length,rt=Ve?Q[B+1]:0,Dt=B+2<Q.length,Nt=Dt?Q[B+2]:0;let ue=(15&rt)<<2|Nt>>6,K=63&Nt;Dt||(K=64,Ve||(ue=64)),W.push(J[ve>>2],J[(3&ve)<<4|rt>>4],J[ue],J[K])}return W.join("")},encodeString(Q,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(Q):this.encodeByteArray(re(Q),$)},decodeString(Q,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(Q):function(Q){const $=[];let J=0,W=0;for(;J<Q.length;){const B=Q[J++];if(B<128)$[W++]=String.fromCharCode(B);else if(B>191&&B<224){const ve=Q[J++];$[W++]=String.fromCharCode((31&B)<<6|63&ve)}else if(B>239&&B<365){const Dt=((7&B)<<18|(63&Q[J++])<<12|(63&Q[J++])<<6|63&Q[J++])-65536;$[W++]=String.fromCharCode(55296+(Dt>>10)),$[W++]=String.fromCharCode(56320+(1023&Dt))}else{const ve=Q[J++],Ve=Q[J++];$[W++]=String.fromCharCode((15&B)<<12|(63&ve)<<6|63&Ve)}}return $.join("")}(this.decodeStringToByteArray(Q,$))},decodeStringToByteArray(Q,$){this.init_();const J=$?this.charToByteMapWebSafe_:this.charToByteMap_,W=[];for(let B=0;B<Q.length;){const ve=J[Q.charAt(B++)],rt=B<Q.length?J[Q.charAt(B)]:0;++B;const Nt=B<Q.length?J[Q.charAt(B)]:64;++B;const jt=B<Q.length?J[Q.charAt(B)]:64;if(++B,null==ve||null==rt||null==Nt||null==jt)throw Error();W.push(ve<<2|rt>>4),64!==Nt&&(W.push(rt<<4&240|Nt>>2),64!==jt&&W.push(Nt<<6&192|jt))}return W},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Q=0;Q<this.ENCODED_VALS.length;Q++)this.byteToCharMap_[Q]=this.ENCODED_VALS.charAt(Q),this.charToByteMap_[this.byteToCharMap_[Q]]=Q,this.byteToCharMapWebSafe_[Q]=this.ENCODED_VALS_WEBSAFE.charAt(Q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Q]]=Q,Q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Q)]=Q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Q)]=Q)}}},se=function(Q){return function(Q){const $=re(Q);return oe.encodeByteArray($,!0)}(Q).replace(/\./g,"")},G=function(Q){try{return oe.decodeString(Q,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function V(Q,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===Q&&(Q={});break;case Array:Q=[];break;default:return $}for(const J in $)!$.hasOwnProperty(J)||!ne(J)||(Q[J]=V(Q[J],$[J]));return Q}function ne(Q){return"__proto__"!==Q}class pe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,J)=>{this.resolve=$,this.reject=J})}wrapCallback($){return(J,W)=>{J?this.reject(J):this.resolve(W),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(J):$(J,W))}}}function Pe(Q,$){if(Q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const W=$||"demo-project",B=Q.iat||0,ve=Q.sub||Q.user_id;if(!ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ve=Object.assign({iss:`https://securetoken.google.com/${W}`,aud:W,iat:B,exp:B+3600,auth_time:B,sub:ve,user_id:ve,firebase:{sign_in_provider:"custom",identities:{}}},Q);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify(Ve)),""].join(".")}function de(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function we(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(de())}function Ue(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Q){return!1}}function Ae(){return"object"==typeof self&&self.self===self}function Re(){const Q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Q&&void 0!==Q.id}function Se(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ce(){return de().indexOf("Electron/")>=0}function Qe(){const Q=de();return Q.indexOf("MSIE ")>=0||Q.indexOf("Trident/")>=0}function zt(){return de().indexOf("MSAppHost/")>=0}function _t(){return!Ue()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Me(){return"object"==typeof indexedDB}function Te(){return new Promise((Q,$)=>{try{let J=!0;const W="validate-browser-context-for-indexeddb-analytics-module",B=self.indexedDB.open(W);B.onsuccess=()=>{B.result.close(),J||self.indexedDB.deleteDatabase(W),Q(!0)},B.onupgradeneeded=()=>{J=!1},B.onerror=()=>{var ve;$((null===(ve=B.error)||void 0===ve?void 0:ve.message)||"")}}catch(J){$(J)}})}function ze(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class st extends Error{constructor($,J,W){super(J),this.code=$,this.customData=W,this.name="FirebaseError",Object.setPrototypeOf(this,st.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,He.prototype.create)}}class He{constructor($,J,W){this.service=$,this.serviceName=J,this.errors=W}create($,...J){const W=J[0]||{},B=`${this.service}/${$}`,ve=this.errors[$],Ve=ve?function(Q,$){return Q.replace(wr,(J,W)=>{const B=$[W];return null!=B?String(B):`<${W}?>`})}(ve,W):"Error";return new st(B,`${this.serviceName}: ${Ve} (${B}).`,W)}}const wr=/\{\$([^}]+)}/g;function pr(Q,$){return Object.prototype.hasOwnProperty.call(Q,$)}function Hn(Q){for(const $ in Q)if(Object.prototype.hasOwnProperty.call(Q,$))return!1;return!0}function pn(Q,$){if(Q===$)return!0;const J=Object.keys(Q),W=Object.keys($);for(const B of J){if(!W.includes(B))return!1;const ve=Q[B],Ve=$[B];if(Jt(ve)&&Jt(Ve)){if(!pn(ve,Ve))return!1}else if(ve!==Ve)return!1}for(const B of W)if(!J.includes(B))return!1;return!0}function Jt(Q){return null!==Q&&"object"==typeof Q}function br(Q){const $=[];for(const[J,W]of Object.entries(Q))Array.isArray(W)?W.forEach(B=>{$.push(encodeURIComponent(J)+"="+encodeURIComponent(B))}):$.push(encodeURIComponent(J)+"="+encodeURIComponent(W));return $.length?"&"+$.join("&"):""}function Wr(Q){const $={};return Q.replace(/^\?/,"").split("&").forEach(W=>{if(W){const[B,ve]=W.split("=");$[decodeURIComponent(B)]=decodeURIComponent(ve)}}),$}function Li(Q){const $=Q.indexOf("?");if(!$)return"";const J=Q.indexOf("#",$);return Q.substring($,J>0?J:void 0)}function Gn(Q,$){const J=new Un(Q,$);return J.subscribe.bind(J)}class Un{constructor($,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{$(this)}).catch(W=>{this.error(W)})}next($){this.forEachObserver(J=>{J.next($)})}error($){this.forEachObserver(J=>{J.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,J,W){let B;if(void 0===$&&void 0===J&&void 0===W)throw new Error("Missing Observer.");B=function(Q,$){if("object"!=typeof Q||null===Q)return!1;for(const J of["next","error","complete"])if(J in Q&&"function"==typeof Q[J])return!0;return!1}($)?$:{next:$,error:J,complete:W},void 0===B.next&&(B.next=wn),void 0===B.error&&(B.error=wn),void 0===B.complete&&(B.complete=wn);const ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?B.error(this.finalError):B.complete()}catch(Ve){}}),this.observers.push(B),ve}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,$)}sendOne($,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{J(this.observers[$])}catch(W){"undefined"!=typeof console&&console.error&&console.error(W)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wn(){}function cn(Q,$=1e3,J=2){const W=$*Math.pow(J,Q),B=Math.round(.5*W*(Math.random()-.5)*2);return Math.min(144e5,W+B)}function ut(Q){return Q&&Q._delegate?Q._delegate:Q}},2329:(Ze,me,F)=>{"use strict";F.d(me,{Mq:()=>f.getApp,C6:()=>f.getApps});var f=F(8026);(0,f.registerVersion)("firebase","9.8.4","app")},7841:(Ze,me,F)=>{"use strict";F.d(me,{Z:()=>f.Z});var f=F(3394);f.Z.registerVersion("firebase","9.8.4","app-compat")},4828:(Ze,me,F)=>{"use strict";F.r(me);var f=F(8239),j=F(3394),O=F(4233),re=F(3854),ce=(F(8026),F(5422),F(3910));function se(){return window}function V(){return(V=(0,f.Z)(function*(ue,K,q){var be;const{BuildInfo:Be}=se();(0,O.aq)(K.sessionId,"AuthEvent did not contain a session ID");const bt=yield Ae(K.sessionId),yt={};return(0,O.ar)()?yt.ibi=Be.packageName:(0,O.as)()?yt.apn=Be.packageName:(0,O.at)(ue,"operation-not-supported-in-this-environment"),Be.displayName&&(yt.appDisplayName=Be.displayName),yt.sessionId=bt,(0,O.au)(ue,q,K.type,void 0,null!==(be=K.eventId)&&void 0!==be?be:void 0,yt)})).apply(this,arguments)}function pe(){return(pe=(0,f.Z)(function*(ue){const{BuildInfo:K}=se(),q={};(0,O.ar)()?q.iosBundleId=K.packageName:(0,O.as)()?q.androidPackageName=K.packageName:(0,O.at)(ue,"operation-not-supported-in-this-environment"),yield(0,O.av)(ue,q)})).apply(this,arguments)}function we(){return(we=(0,f.Z)(function*(ue,K,q){const{cordova:be}=se();let Be=()=>{};try{yield new Promise((bt,yt)=>{let Xt=null;function Cn(){var Et;bt();const Yn=null===(Et=be.plugins.browsertab)||void 0===Et?void 0:Et.close;"function"==typeof Yn&&Yn(),"function"==typeof(null==q?void 0:q.close)&&q.close()}function ar(){Xt||(Xt=window.setTimeout(()=>{yt((0,O.aw)(ue,"redirect-cancelled-by-user"))},2e3))}function gn(){"visible"===(null==document?void 0:document.visibilityState)&&ar()}K.addPassiveListener(Cn),document.addEventListener("resume",ar,!1),(0,O.as)()&&document.addEventListener("visibilitychange",gn,!1),Be=()=>{K.removePassiveListener(Cn),document.removeEventListener("resume",ar,!1),document.removeEventListener("visibilitychange",gn,!1),Xt&&window.clearTimeout(Xt)}})}finally{Be()}})).apply(this,arguments)}function Ae(ue){return Re.apply(this,arguments)}function Re(){return(Re=(0,f.Z)(function*(ue){const K=Se(ue),q=yield crypto.subtle.digest("SHA-256",K);return Array.from(new Uint8Array(q)).map(Be=>Be.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Se(ue){if((0,O.aq)(/[0-9a-zA-Z]+/.test(ue),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ue);const K=new ArrayBuffer(ue.length),q=new Uint8Array(K);for(let be=0;be<ue.length;be++)q[be]=ue.charCodeAt(be);return q}class Qe extends O.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(K=>{this.resolveInialized=K})}addPassiveListener(K){this.passiveListeners.add(K)}removePassiveListener(K){this.passiveListeners.delete(K)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(K){return this.resolveInialized(),this.passiveListeners.forEach(q=>q(K)),super.onEvent(K)}initialized(){var K=this;return(0,f.Z)(function*(){yield K.initPromise})()}}function _t(ue){return Me.apply(this,arguments)}function Me(){return(Me=(0,f.Z)(function*(ue){const K=yield dt()._get(nt(ue));return K&&(yield dt()._remove(nt(ue))),K})).apply(this,arguments)}function ze(){const ue=[],K="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let q=0;q<20;q++){const be=Math.floor(Math.random()*K.length);ue.push(K.charAt(be))}return ue.join("")}function dt(){return(0,O.ay)(O.b)}function nt(ue){return(0,O.az)("authEvent",ue.config.apiKey,ue.name)}function Hr(ue){if(!(null==ue?void 0:ue.includes("?")))return{};const[K,...q]=ue.split("?");return(0,re.zd)(q.join("?"))}function ns(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function pr(){var ue;return(null===(ue=null==self?void 0:self.location)||void 0===ue?void 0:ue.protocol)||null}function Hn(ue=(0,re.z$)()){return!("file:"!==pr()&&"ionic:"!==pr()&&"capacitor:"!==pr()||!ue.toLowerCase().match(/iphone|ipad|ipod|android/))}function Wr(){try{const ue=self.localStorage,K=O.aI();if(ue)return ue.setItem(K,"1"),ue.removeItem(K),!function(ue=(0,re.z$)()){return(0,re.w1)()&&11===(null==document?void 0:document.documentMode)||function(ue=(0,re.z$)()){return/Edge\/\d+/.test(ue)}(ue)}()||(0,re.hl)()}catch(ue){return Li()&&(0,re.hl)()}return!1}function Li(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ne(){return("http:"===pr()||"https:"===pr()||(0,re.ru)()||Hn())&&!((0,re.b$)()||(0,re.UG)())&&Wr()&&!Li()}function Gn(){return Hn()&&"undefined"!=typeof document}function Pr(){return(Pr=(0,f.Z)(function*(){return!!Gn()&&new Promise(ue=>{const K=setTimeout(()=>{ue(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(K),ue(!0)})})})).apply(this,arguments)}const wn={LOCAL:"local",NONE:"none",SESSION:"session"},Xe=O.ax,qn="persistence";function Pn(ue){return gr.apply(this,arguments)}function gr(){return(gr=(0,f.Z)(function*(ue){yield ue._initializationPromise;const K=Bt(),q=O.az(qn,ue.config.apiKey,ue.name);K&&K.setItem(q,ue._getPersistence())})).apply(this,arguments)}function Bt(){var ue;try{return(null===(ue="undefined"!=typeof window?window:null)||void 0===ue?void 0:ue.sessionStorage)||null}catch(K){return null}}const Ye=O.ax;class it{constructor(){this.browserResolver=O.ay(O.k),this.cordovaResolver=O.ay(class{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(K){var q=this;return(0,f.Z)(function*(){const be=K._key();let Be=q.eventManagers.get(be);return Be||(Be=new Qe(K),q.eventManagers.set(be,Be),q.attachCallbackListeners(K,Be)),Be})()}_openPopup(K){(0,O.at)(K,"operation-not-supported-in-this-environment")}_openRedirect(K,q,be,Be){var bt=this;return(0,f.Z)(function*(){!function(ue){var K,q,be,Be,bt,yt,Xt,Cn,ar,gn;const Et=se();(0,O.ax)("function"==typeof(null===(K=null==Et?void 0:Et.universalLinks)||void 0===K?void 0:K.subscribe),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(void 0!==(null===(q=null==Et?void 0:Et.BuildInfo)||void 0===q?void 0:q.packageName),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(bt=null===(Be=null===(be=null==Et?void 0:Et.cordova)||void 0===be?void 0:be.plugins)||void 0===Be?void 0:Be.browsertab)||void 0===bt?void 0:bt.openUrl),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(Cn=null===(Xt=null===(yt=null==Et?void 0:Et.cordova)||void 0===yt?void 0:yt.plugins)||void 0===Xt?void 0:Xt.browsertab)||void 0===Cn?void 0:Cn.isAvailable),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(gn=null===(ar=null==Et?void 0:Et.cordova)||void 0===ar?void 0:ar.InAppBrowser)||void 0===gn?void 0:gn.open),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(K);const yt=yield bt._initialize(K);yield yt.initialized(),yt.resetRedirect(),(0,O.aD)(),yield bt._originValidation(K);const Xt=function(ue,K,q=null){return{type:K,eventId:q,urlResponse:null,sessionId:ze(),postBody:null,tenantId:ue.tenantId,error:(0,O.aw)(ue,"no-auth-event")}}(K,be,Be);yield function(ue,K){return dt()._set(nt(ue),K)}(K,Xt);const Cn=yield function(ue,K,q){return V.apply(this,arguments)}(K,Xt,q),ar=yield function(ue){const{cordova:K}=se();return new Promise(q=>{K.plugins.browsertab.isAvailable(be=>{let Be=null;be?K.plugins.browsertab.openUrl(ue):Be=K.InAppBrowser.open(ue,(0,O.ap)()?"_blank":"_system","location=yes"),q(Be)})})}(Cn);return function(ue,K,q){return we.apply(this,arguments)}(K,yt,ar)})()}_isIframeWebStorageSupported(K,q){throw new Error("Method not implemented.")}_originValidation(K){const q=K._key();return this.originValidationPromises[q]||(this.originValidationPromises[q]=function(ue){return pe.apply(this,arguments)}(K)),this.originValidationPromises[q]}attachCallbackListeners(K,q){const{universalLinks:be,handleOpenURL:Be,BuildInfo:bt}=se(),yt=setTimeout((0,f.Z)(function*(){yield _t(K),q.onEvent(ns())}),500),Xt=function(){var gn=(0,f.Z)(function*(Et){clearTimeout(yt);const Yn=yield _t(K);let kr=null;Yn&&(null==Et?void 0:Et.url)&&(kr=function(ue,K){var q,be;const Be=function(ue){const K=Hr(ue),q=K.link?decodeURIComponent(K.link):void 0,be=Hr(q).link,Be=K.deep_link_id?decodeURIComponent(K.deep_link_id):void 0;return Hr(Be).link||Be||be||q||ue}(K);if(Be.includes("/__/auth/callback")){const bt=Hr(Be),yt=bt.firebaseError?function(ue){try{return JSON.parse(ue)}catch(K){return null}}(decodeURIComponent(bt.firebaseError)):null,Xt=null===(be=null===(q=null==yt?void 0:yt.code)||void 0===q?void 0:q.split("auth/"))||void 0===be?void 0:be[1],Cn=Xt?(0,O.aw)(Xt):null;return Cn?{type:ue.type,eventId:ue.eventId,tenantId:ue.tenantId,error:Cn,urlResponse:null,sessionId:null,postBody:null}:{type:ue.type,eventId:ue.eventId,tenantId:ue.tenantId,sessionId:ue.sessionId,urlResponse:Be,postBody:null}}return null}(Yn,Et.url)),q.onEvent(kr||ns())});return function(Yn){return gn.apply(this,arguments)}}();void 0!==be&&"function"==typeof be.subscribe&&be.subscribe(null,Xt);const Cn=Be,ar=`${bt.packageName.toLowerCase()}://`;se().handleOpenURL=function(){var gn=(0,f.Z)(function*(Et){if(Et.toLowerCase().startsWith(ar)&&Xt({url:Et}),"function"==typeof Cn)try{Cn(Et)}catch(Yn){console.error(Yn)}});return function(Et){return gn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(K){var q=this;return(0,f.Z)(function*(){return yield q.selectUnderlyingResolver(),q.assertedUnderlyingResolver._initialize(K)})()}_openPopup(K,q,be,Be){var bt=this;return(0,f.Z)(function*(){return yield bt.selectUnderlyingResolver(),bt.assertedUnderlyingResolver._openPopup(K,q,be,Be)})()}_openRedirect(K,q,be,Be){var bt=this;return(0,f.Z)(function*(){return yield bt.selectUnderlyingResolver(),bt.assertedUnderlyingResolver._openRedirect(K,q,be,Be)})()}_isIframeWebStorageSupported(K,q){this.assertedUnderlyingResolver._isIframeWebStorageSupported(K,q)}_originValidation(K){return this.assertedUnderlyingResolver._originValidation(K)}get _shouldInitProactively(){return Gn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ye(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var K=this;return(0,f.Z)(function*(){if(K.underlyingResolver)return;const q=yield function(){return Pr.apply(this,arguments)}();K.underlyingResolver=q?K.cordovaResolver:K.browserResolver})()}}function ws(ue){return ue.unwrap()}function Wt(ue){return Kn(ue)}function Kn(ue){const{_tokenResponse:K}=ue instanceof re.ZR?ue.customData:ue;if(!K)return null;if(!(ue instanceof re.ZR)&&"temporaryProof"in K&&"phoneNumber"in K)return O.P.credentialFromResult(ue);const q=K.providerId;if(!q||q===O.o.PASSWORD)return null;let be;switch(q){case O.o.GOOGLE:be=O.Q;break;case O.o.FACEBOOK:be=O.N;break;case O.o.GITHUB:be=O.T;break;case O.o.TWITTER:be=O.W;break;default:const{oauthIdToken:Be,oauthAccessToken:bt,oauthTokenSecret:yt,pendingToken:Xt,nonce:Cn}=K;return bt||yt||Be||Xt?Xt?q.startsWith("saml.")?O.aL._create(q,Xt):O.J._fromParams({providerId:q,signInMethod:q,pendingToken:Xt,idToken:Be,accessToken:bt}):new O.U(q).credential({idToken:Be,accessToken:bt,rawNonce:Cn}):null}return ue instanceof re.ZR?be.credentialFromError(ue):be.credentialFromResult(ue)}function Bn(ue,K){return K.catch(q=>{throw q instanceof re.ZR&&function(ue,K){var q,be;const Be=null===(q=K.customData)||void 0===q?void 0:q._tokenResponse;if("auth/multi-factor-auth-required"===(null===(be=K)||void 0===be?void 0:be.code))K.resolver=new $(ue,O.an(ue,K));else if(Be){const bt=Kn(K),yt=K;bt&&(yt.credential=bt,yt.tenantId=Be.tenantId||void 0,yt.email=Be.email||void 0,yt.phoneNumber=Be.phoneNumber||void 0)}}(ue,q),q}).then(q=>{const Be=q.user;return{operationType:q.operationType,credential:Wt(q),additionalUserInfo:O.al(q),user:J.getOrCreate(Be)}})}function ut(ue,K){return Q.apply(this,arguments)}function Q(){return(Q=(0,f.Z)(function*(ue,K){const q=yield K;return{verificationId:q.verificationId,confirm:be=>Bn(ue,q.confirm(be))}})).apply(this,arguments)}class ${constructor(K,q){this.resolver=q,this.auth=K.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(K){return Bn(ws(this.auth),this.resolver.resolveSignIn(K))}}class J{constructor(K){this._delegate=K,this.multiFactor=O.ao(K)}static getOrCreate(K){return J.USER_MAP.has(K)||J.USER_MAP.set(K,new J(K)),J.USER_MAP.get(K)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(K){return this._delegate.getIdTokenResult(K)}getIdToken(K){return this._delegate.getIdToken(K)}linkAndRetrieveDataWithCredential(K){return this.linkWithCredential(K)}linkWithCredential(K){var q=this;return(0,f.Z)(function*(){return Bn(q.auth,O.Z(q._delegate,K))})()}linkWithPhoneNumber(K,q){var be=this;return(0,f.Z)(function*(){return ut(be.auth,O.l(be._delegate,K,q))})()}linkWithPopup(K){var q=this;return(0,f.Z)(function*(){return Bn(q.auth,O.d(q._delegate,K,it))})()}linkWithRedirect(K){var q=this;return(0,f.Z)(function*(){return yield Pn(O.aE(q.auth)),O.g(q._delegate,K,it)})()}reauthenticateAndRetrieveDataWithCredential(K){return this.reauthenticateWithCredential(K)}reauthenticateWithCredential(K){var q=this;return(0,f.Z)(function*(){return Bn(q.auth,O._(q._delegate,K))})()}reauthenticateWithPhoneNumber(K,q){return ut(this.auth,O.r(this._delegate,K,q))}reauthenticateWithPopup(K){return Bn(this.auth,O.e(this._delegate,K,it))}reauthenticateWithRedirect(K){var q=this;return(0,f.Z)(function*(){return yield Pn(O.aE(q.auth)),O.h(q._delegate,K,it)})()}sendEmailVerification(K){return O.ab(this._delegate,K)}unlink(K){var q=this;return(0,f.Z)(function*(){return yield O.ak(q._delegate,K),q})()}updateEmail(K){return O.ag(this._delegate,K)}updatePassword(K){return O.ah(this._delegate,K)}updatePhoneNumber(K){return O.u(this._delegate,K)}updateProfile(K){return O.af(this._delegate,K)}verifyBeforeUpdateEmail(K,q){return O.ac(this._delegate,K,q)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}J.USER_MAP=new WeakMap;const W=O.ax;let B=(()=>{class ue{constructor(q,be){if(this.app=q,be.isInitialized())return this._delegate=be.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Be}=q.options;W(Be,"invalid-api-key",{appName:q.name}),W(Be,"invalid-api-key",{appName:q.name});const bt="undefined"!=typeof window?it:void 0;this._delegate=be.initialize({options:{persistence:Ve(Be,q.name),popupRedirectResolver:bt}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?J.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(q){this._delegate.languageCode=q}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(q){this._delegate.tenantId=q}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(q,be){O.G(this._delegate,q,be)}applyActionCode(q){return O.a2(this._delegate,q)}checkActionCode(q){return O.a3(this._delegate,q)}confirmPasswordReset(q,be){return O.a1(this._delegate,q,be)}createUserWithEmailAndPassword(q,be){var Be=this;return(0,f.Z)(function*(){return Bn(Be._delegate,O.a5(Be._delegate,q,be))})()}fetchProvidersForEmail(q){return this.fetchSignInMethodsForEmail(q)}fetchSignInMethodsForEmail(q){return O.aa(this._delegate,q)}isSignInWithEmailLink(q){return O.a8(this._delegate,q)}getRedirectResult(){var q=this;return(0,f.Z)(function*(){W(Ne(),q._delegate,"operation-not-supported-in-this-environment");const be=yield O.j(q._delegate,it);return be?Bn(q._delegate,Promise.resolve(be)):{credential:null,user:null}})()}addFrameworkForLogging(q){!function(ue,K){(0,O.aE)(ue)._logFramework(K)}(this._delegate,q)}onAuthStateChanged(q,be,Be){const{next:bt,error:yt,complete:Xt}=ve(q,be,Be);return this._delegate.onAuthStateChanged(bt,yt,Xt)}onIdTokenChanged(q,be,Be){const{next:bt,error:yt,complete:Xt}=ve(q,be,Be);return this._delegate.onIdTokenChanged(bt,yt,Xt)}sendSignInLinkToEmail(q,be){return O.a7(this._delegate,q,be)}sendPasswordResetEmail(q,be){return O.a0(this._delegate,q,be||void 0)}setPersistence(q){var be=this;return(0,f.Z)(function*(){let Be;switch(function(ue,K){Xe(Object.values(wn).includes(K),ue,"invalid-persistence-type"),(0,re.b$)()?Xe(K!==wn.SESSION,ue,"unsupported-persistence-type"):(0,re.UG)()?Xe(K===wn.NONE,ue,"unsupported-persistence-type"):Li()?Xe(K===wn.NONE||K===wn.LOCAL&&(0,re.hl)(),ue,"unsupported-persistence-type"):Xe(K===wn.NONE||Wr(),ue,"unsupported-persistence-type")}(be._delegate,q),q){case wn.SESSION:Be=O.a;break;case wn.LOCAL:Be=(yield O.ay(O.i)._isAvailable())?O.i:O.b;break;case wn.NONE:Be=O.L;break;default:return O.at("argument-error",{appName:be._delegate.name})}return be._delegate.setPersistence(Be)})()}signInAndRetrieveDataWithCredential(q){return this.signInWithCredential(q)}signInAnonymously(){return Bn(this._delegate,O.X(this._delegate))}signInWithCredential(q){return Bn(this._delegate,O.Y(this._delegate,q))}signInWithCustomToken(q){return Bn(this._delegate,O.$(this._delegate,q))}signInWithEmailAndPassword(q,be){return Bn(this._delegate,O.a6(this._delegate,q,be))}signInWithEmailLink(q,be){return Bn(this._delegate,O.a9(this._delegate,q,be))}signInWithPhoneNumber(q,be){return ut(this._delegate,O.s(this._delegate,q,be))}signInWithPopup(q){var be=this;return(0,f.Z)(function*(){return W(Ne(),be._delegate,"operation-not-supported-in-this-environment"),Bn(be._delegate,O.c(be._delegate,q,it))})()}signInWithRedirect(q){var be=this;return(0,f.Z)(function*(){return W(Ne(),be._delegate,"operation-not-supported-in-this-environment"),yield Pn(be._delegate),O.f(be._delegate,q,it)})()}updateCurrentUser(q){return this._delegate.updateCurrentUser(q)}verifyPasswordResetCode(q){return O.a4(this._delegate,q)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ue.Persistence=wn,ue})();function ve(ue,K,q){let be=ue;"function"!=typeof ue&&({next:be,error:K,complete:q}=ue);const Be=be;return{next:yt=>Be(yt&&J.getOrCreate(yt)),error:K,complete:q}}function Ve(ue,K){const q=function(ue,K){const q=Bt();if(!q)return[];const be=O.az(qn,ue,K);switch(q.getItem(be)){case wn.NONE:return[O.L];case wn.LOCAL:return[O.i,O.a];case wn.SESSION:return[O.a];default:return[]}}(ue,K);if("undefined"!=typeof self&&!q.includes(O.i)&&q.push(O.i),"undefined"!=typeof window)for(const be of[O.b,O.a])q.includes(be)||q.push(be);return q.includes(O.L)||q.push(O.L),q}class rt{constructor(){this.providerId="phone",this._delegate=new O.P(ws(j.Z.auth()))}static credential(K,q){return O.P.credential(K,q)}verifyPhoneNumber(K,q){return this._delegate.verifyPhoneNumber(K,q)}unwrap(){return this._delegate}}rt.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,rt.PROVIDER_ID=O.P.PROVIDER_ID;const Dt=O.ax;var ue;(ue=j.Z).INTERNAL.registerComponent(new ce.wA("auth-compat",K=>{const q=K.getProvider("app-compat").getImmediate(),be=K.getProvider("auth");return new B(q,be)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:rt,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:class{constructor(K,q,be=j.Z.app()){var Be;Dt(null===(Be=be.options)||void 0===Be?void 0:Be.apiKey,"invalid-api-key",{appName:be.name}),this._delegate=new O.R(K,q,be.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:O.W,Auth:B,AuthCredential:O.H,Error:re.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ue.registerVersion("@firebase/auth-compat","0.2.17")},3098:(Ze,me,F)=>{"use strict";F.d(me,{P:()=>te});var f=F(9193),j=F(5917),O=F(205);class te{constructor(ce,se,G){this.kind=ce,this.value=se,this.error=G,this.hasValue="N"===ce}observe(ce){switch(this.kind){case"N":return ce.next&&ce.next(this.value);case"E":return ce.error&&ce.error(this.error);case"C":return ce.complete&&ce.complete()}}do(ce,se,G){switch(this.kind){case"N":return ce&&ce(this.value);case"E":return se&&se(this.error);case"C":return G&&G()}}accept(ce,se,G){return ce&&"function"==typeof ce.next?this.observe(ce):this.do(ce,se,G)}toObservable(){switch(this.kind){case"N":return(0,j.of)(this.value);case"E":return(0,O._)(this.error);case"C":return(0,f.c)()}throw new Error("unexpected notification kind value")}static createNext(ce){return void 0!==ce?new te("N",ce):te.undefinedValueNotification}static createError(ce){return new te("E",void 0,ce)}static createComplete(){return te.completeNotification}}te.completeNotification=new te("C"),te.undefinedValueNotification=new te("N",void 0)},7574:(Ze,me,F)=>{"use strict";F.d(me,{y:()=>V});var f=F(7393),O=F(9181),re=F(6490),oe=F(6554),ce=F(4487);var L=F(2494);let V=(()=>{class pe{constructor(de){this._isScalar=!1,de&&(this._subscribe=de)}lift(de){const we=new pe;return we.source=this,we.operator=de,we}subscribe(de,we,Ue){const{operator:Ae}=this,Re=function(pe,Pe,de){if(pe){if(pe instanceof f.L)return pe;if(pe[O.b])return pe[O.b]()}return pe||Pe||de?new f.L(pe,Pe,de):new f.L(re.c)}(de,we,Ue);if(Re.add(Ae?Ae.call(Re,this.source):this.source||L.v.useDeprecatedSynchronousErrorHandling&&!Re.syncErrorThrowable?this._subscribe(Re):this._trySubscribe(Re)),L.v.useDeprecatedSynchronousErrorHandling&&Re.syncErrorThrowable&&(Re.syncErrorThrowable=!1,Re.syncErrorThrown))throw Re.syncErrorValue;return Re}_trySubscribe(de){try{return this._subscribe(de)}catch(we){L.v.useDeprecatedSynchronousErrorHandling&&(de.syncErrorThrown=!0,de.syncErrorValue=we),function(pe){for(;pe;){const{closed:Pe,destination:de,isStopped:we}=pe;if(Pe||we)return!1;pe=de&&de instanceof f.L?de:null}return!0}(de)?de.error(we):console.warn(we)}}forEach(de,we){return new(we=ne(we))((Ue,Ae)=>{let Re;Re=this.subscribe(Se=>{try{de(Se)}catch(Ce){Ae(Ce),Re&&Re.unsubscribe()}},Ae,Ue)})}_subscribe(de){const{source:we}=this;return we&&we.subscribe(de)}[oe.L](){return this}pipe(...de){return 0===de.length?this:function(pe){return 0===pe.length?ce.y:1===pe.length?pe[0]:function(de){return pe.reduce((we,Ue)=>Ue(we),de)}}(de)(this)}toPromise(de){return new(de=ne(de))((we,Ue)=>{let Ae;this.subscribe(Re=>Ae=Re,Re=>Ue(Re),()=>we(Ae))})}}return pe.create=Pe=>new pe(Pe),pe})();function ne(pe){if(pe||(pe=L.v.Promise||Promise),!pe)throw new Error("no Promise impl found");return pe}},6490:(Ze,me,F)=>{"use strict";F.d(me,{c:()=>O});var f=F(2494),j=F(4449);const O={closed:!0,next(re){},error(re){if(f.v.useDeprecatedSynchronousErrorHandling)throw re;(0,j.z)(re)},complete(){}}},9765:(Ze,me,F)=>{"use strict";F.d(me,{Yc:()=>ce,xQ:()=>se});var f=F(7574),j=F(7393),O=F(5319),re=F(7971),te=F(8858),oe=F(9181);class ce extends j.L{constructor(V){super(V),this.destination=V}}let se=(()=>{class L extends f.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[oe.b](){return new ce(this)}lift(ne){const pe=new G(this,this);return pe.operator=ne,pe}next(ne){if(this.closed)throw new re.N;if(!this.isStopped){const{observers:pe}=this,Pe=pe.length,de=pe.slice();for(let we=0;we<Pe;we++)de[we].next(ne)}}error(ne){if(this.closed)throw new re.N;this.hasError=!0,this.thrownError=ne,this.isStopped=!0;const{observers:pe}=this,Pe=pe.length,de=pe.slice();for(let we=0;we<Pe;we++)de[we].error(ne);this.observers.length=0}complete(){if(this.closed)throw new re.N;this.isStopped=!0;const{observers:ne}=this,pe=ne.length,Pe=ne.slice();for(let de=0;de<pe;de++)Pe[de].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(ne){if(this.closed)throw new re.N;return super._trySubscribe(ne)}_subscribe(ne){if(this.closed)throw new re.N;return this.hasError?(ne.error(this.thrownError),O.w.EMPTY):this.isStopped?(ne.complete(),O.w.EMPTY):(this.observers.push(ne),new te.W(this,ne))}asObservable(){const ne=new f.y;return ne.source=this,ne}}return L.create=(V,ne)=>new G(V,ne),L})();class G extends se{constructor(V,ne){super(),this.destination=V,this.source=ne}next(V){const{destination:ne}=this;ne&&ne.next&&ne.next(V)}error(V){const{destination:ne}=this;ne&&ne.error&&this.destination.error(V)}complete(){const{destination:V}=this;V&&V.complete&&this.destination.complete()}_subscribe(V){const{source:ne}=this;return ne?this.source.subscribe(V):O.w.EMPTY}}},8858:(Ze,me,F)=>{"use strict";F.d(me,{W:()=>j});var f=F(5319);class j extends f.w{constructor(re,te){super(),this.subject=re,this.subscriber=te,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const re=this.subject,te=re.observers;if(this.subject=null,!te||0===te.length||re.isStopped||re.closed)return;const oe=te.indexOf(this.subscriber);-1!==oe&&te.splice(oe,1)}}},7393:(Ze,me,F)=>{"use strict";F.d(me,{L:()=>ce});var f=F(9105),j=F(6490),O=F(5319),re=F(9181),te=F(2494),oe=F(4449);class ce extends O.w{constructor(L,V,ne){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=j.c;break;case 1:if(!L){this.destination=j.c;break}if("object"==typeof L){L instanceof ce?(this.syncErrorThrowable=L.syncErrorThrowable,this.destination=L,L.add(this)):(this.syncErrorThrowable=!0,this.destination=new se(this,L));break}default:this.syncErrorThrowable=!0,this.destination=new se(this,L,V,ne)}}[re.b](){return this}static create(L,V,ne){const pe=new ce(L,V,ne);return pe.syncErrorThrowable=!1,pe}next(L){this.isStopped||this._next(L)}error(L){this.isStopped||(this.isStopped=!0,this._error(L))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(L){this.destination.next(L)}_error(L){this.destination.error(L),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:L}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=L,this}}class se extends ce{constructor(L,V,ne,pe){super(),this._parentSubscriber=L;let Pe,de=this;(0,f.m)(V)?Pe=V:V&&(Pe=V.next,ne=V.error,pe=V.complete,V!==j.c&&(de=Object.create(V),(0,f.m)(de.unsubscribe)&&this.add(de.unsubscribe.bind(de)),de.unsubscribe=this.unsubscribe.bind(this))),this._context=de,this._next=Pe,this._error=ne,this._complete=pe}next(L){if(!this.isStopped&&this._next){const{_parentSubscriber:V}=this;te.v.useDeprecatedSynchronousErrorHandling&&V.syncErrorThrowable?this.__tryOrSetError(V,this._next,L)&&this.unsubscribe():this.__tryOrUnsub(this._next,L)}}error(L){if(!this.isStopped){const{_parentSubscriber:V}=this,{useDeprecatedSynchronousErrorHandling:ne}=te.v;if(this._error)ne&&V.syncErrorThrowable?(this.__tryOrSetError(V,this._error,L),this.unsubscribe()):(this.__tryOrUnsub(this._error,L),this.unsubscribe());else if(V.syncErrorThrowable)ne?(V.syncErrorValue=L,V.syncErrorThrown=!0):(0,oe.z)(L),this.unsubscribe();else{if(this.unsubscribe(),ne)throw L;(0,oe.z)(L)}}}complete(){if(!this.isStopped){const{_parentSubscriber:L}=this;if(this._complete){const V=()=>this._complete.call(this._context);te.v.useDeprecatedSynchronousErrorHandling&&L.syncErrorThrowable?(this.__tryOrSetError(L,V),this.unsubscribe()):(this.__tryOrUnsub(V),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(L,V){try{L.call(this._context,V)}catch(ne){if(this.unsubscribe(),te.v.useDeprecatedSynchronousErrorHandling)throw ne;(0,oe.z)(ne)}}__tryOrSetError(L,V,ne){if(!te.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{V.call(this._context,ne)}catch(pe){return te.v.useDeprecatedSynchronousErrorHandling?(L.syncErrorValue=pe,L.syncErrorThrown=!0,!0):((0,oe.z)(pe),!0)}return!1}_unsubscribe(){const{_parentSubscriber:L}=this;this._context=null,this._parentSubscriber=null,L.unsubscribe()}}},5319:(Ze,me,F)=>{"use strict";F.d(me,{w:()=>oe});var f=F(9796),j=F(1555),O=F(9105);const te=(()=>{function se(G){return Error.call(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((L,V)=>`${V+1}) ${L.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G,this}return se.prototype=Object.create(Error.prototype),se})();class oe{constructor(G){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,G&&(this._ctorUnsubscribe=!0,this._unsubscribe=G)}unsubscribe(){let G;if(this.closed)return;let{_parentOrParents:L,_ctorUnsubscribe:V,_unsubscribe:ne,_subscriptions:pe}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,L instanceof oe)L.remove(this);else if(null!==L)for(let Pe=0;Pe<L.length;++Pe)L[Pe].remove(this);if((0,O.m)(ne)){V&&(this._unsubscribe=void 0);try{ne.call(this)}catch(Pe){G=Pe instanceof te?ce(Pe.errors):[Pe]}}if((0,f.k)(pe)){let Pe=-1,de=pe.length;for(;++Pe<de;){const we=pe[Pe];if((0,j.K)(we))try{we.unsubscribe()}catch(Ue){G=G||[],Ue instanceof te?G=G.concat(ce(Ue.errors)):G.push(Ue)}}}if(G)throw new te(G)}add(G){let L=G;if(!G)return oe.EMPTY;switch(typeof G){case"function":L=new oe(G);case"object":if(L===this||L.closed||"function"!=typeof L.unsubscribe)return L;if(this.closed)return L.unsubscribe(),L;if(!(L instanceof oe)){const pe=L;L=new oe,L._subscriptions=[pe]}break;default:throw new Error("unrecognized teardown "+G+" added to Subscription.")}let{_parentOrParents:V}=L;if(null===V)L._parentOrParents=this;else if(V instanceof oe){if(V===this)return L;L._parentOrParents=[V,this]}else{if(-1!==V.indexOf(this))return L;V.push(this)}const ne=this._subscriptions;return null===ne?this._subscriptions=[L]:ne.push(L),L}remove(G){const L=this._subscriptions;if(L){const V=L.indexOf(G);-1!==V&&L.splice(V,1)}}}var se;function ce(se){return se.reduce((G,L)=>G.concat(L instanceof te?L.errors:L),[])}oe.EMPTY=((se=new oe).closed=!0,se)},2494:(Ze,me,F)=>{"use strict";F.d(me,{v:()=>j});let f=!1;const j={Promise:void 0,set useDeprecatedSynchronousErrorHandling(O){if(O){const re=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+re.stack)}else f&&console.log("RxJS: Back to a better error behavior. Thank you. <3");f=O},get useDeprecatedSynchronousErrorHandling(){return f}}},5345:(Ze,me,F)=>{"use strict";F.d(me,{IY:()=>re,Ds:()=>oe,ft:()=>se});var f=F(7393),j=F(7574),O=F(7444);class re extends f.L{constructor(L){super(),this.parent=L}_next(L){this.parent.notifyNext(L)}_error(L){this.parent.notifyError(L),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class oe extends f.L{notifyNext(L){this.destination.next(L)}notifyError(L){this.destination.error(L)}notifyComplete(){this.destination.complete()}}function se(G,L){if(L.closed)return;if(G instanceof j.y)return G.subscribe(L);let V;try{V=(0,O.s)(G)(L)}catch(ne){L.error(ne)}return V}},2441:(Ze,me,F)=>{"use strict";F.d(me,{c:()=>te,N:()=>oe});var f=F(9765),j=F(7574),O=F(5319),re=F(1307);class te extends j.y{constructor(V,ne){super(),this.source=V,this.subjectFactory=ne,this._refCount=0,this._isComplete=!1}_subscribe(V){return this.getSubject().subscribe(V)}getSubject(){const V=this._subject;return(!V||V.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let V=this._connection;return V||(this._isComplete=!1,V=this._connection=new O.w,V.add(this.source.subscribe(new ce(this.getSubject(),this))),V.closed&&(this._connection=null,V=O.w.EMPTY)),V}refCount(){return(0,re.x)()(this)}}const oe=(()=>{const L=te.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:L._subscribe},_isComplete:{value:L._isComplete,writable:!0},getSubject:{value:L.getSubject},connect:{value:L.connect},refCount:{value:L.refCount}}})();class ce extends f.Yc{constructor(V,ne){super(V),this.connectable=ne}_error(V){this._unsubscribe(),super._error(V)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const V=this.connectable;if(V){this.connectable=null;const ne=V._connection;V._refCount=0,V._subject=null,V._connection=null,ne&&ne.unsubscribe()}}}},9193:(Ze,me,F)=>{"use strict";F.d(me,{E:()=>j,c:()=>O});var f=F(7574);const j=new f.y(te=>te.complete());function O(te){return te?function(te){return new f.y(oe=>te.schedule(()=>oe.complete()))}(te):j}},4402:(Ze,me,F)=>{"use strict";F.d(me,{D:()=>de});var f=F(7574),j=F(7444),O=F(5319),re=F(6554),ce=F(4087),se=F(377),V=F(4072),ne=F(9489);function de(we,Ue){return Ue?function(we,Ue){if(null!=we){if(function(we){return we&&"function"==typeof we[re.L]}(we))return function(we,Ue){return new f.y(Ae=>{const Re=new O.w;return Re.add(Ue.schedule(()=>{const Se=we[re.L]();Re.add(Se.subscribe({next(Ce){Re.add(Ue.schedule(()=>Ae.next(Ce)))},error(Ce){Re.add(Ue.schedule(()=>Ae.error(Ce)))},complete(){Re.add(Ue.schedule(()=>Ae.complete()))}}))})),Re})}(we,Ue);if((0,V.t)(we))return function(we,Ue){return new f.y(Ae=>{const Re=new O.w;return Re.add(Ue.schedule(()=>we.then(Se=>{Re.add(Ue.schedule(()=>{Ae.next(Se),Re.add(Ue.schedule(()=>Ae.complete()))}))},Se=>{Re.add(Ue.schedule(()=>Ae.error(Se)))}))),Re})}(we,Ue);if((0,ne.z)(we))return(0,ce.r)(we,Ue);if(function(we){return we&&"function"==typeof we[se.hZ]}(we)||"string"==typeof we)return function(we,Ue){if(!we)throw new Error("Iterable cannot be null");return new f.y(Ae=>{const Re=new O.w;let Se;return Re.add(()=>{Se&&"function"==typeof Se.return&&Se.return()}),Re.add(Ue.schedule(()=>{Se=we[se.hZ](),Re.add(Ue.schedule(function(){if(Ae.closed)return;let Ce,Qe;try{const zt=Se.next();Ce=zt.value,Qe=zt.done}catch(zt){return void Ae.error(zt)}Qe?Ae.complete():(Ae.next(Ce),this.schedule())}))})),Re})}(we,Ue)}throw new TypeError((null!==we&&typeof we||we)+" is not observable")}(we,Ue):we instanceof f.y?we:new f.y((0,j.s)(we))}},6693:(Ze,me,F)=>{"use strict";F.d(me,{n:()=>re});var f=F(7574),j=F(5015),O=F(4087);function re(te,oe){return oe?(0,O.r)(te,oe):new f.y((0,j.V)(te))}},6682:(Ze,me,F)=>{"use strict";F.d(me,{T:()=>te});var f=F(7574),j=F(4869),O=F(3282),re=F(6693);function te(...oe){let ce=Number.POSITIVE_INFINITY,se=null,G=oe[oe.length-1];return(0,j.K)(G)?(se=oe.pop(),oe.length>1&&"number"==typeof oe[oe.length-1]&&(ce=oe.pop())):"number"==typeof G&&(ce=oe.pop()),null===se&&1===oe.length&&oe[0]instanceof f.y?oe[0]:(0,O.J)(ce)((0,re.n)(oe,se))}},5917:(Ze,me,F)=>{"use strict";F.d(me,{of:()=>re});var f=F(4869),j=F(6693),O=F(4087);function re(...te){let oe=te[te.length-1];return(0,f.K)(oe)?(te.pop(),(0,O.r)(te,oe)):(0,j.n)(te)}},205:(Ze,me,F)=>{"use strict";F.d(me,{_:()=>j});var f=F(7574);function j(re,te){return new f.y(te?oe=>te.schedule(O,0,{error:re,subscriber:oe}):oe=>oe.error(re))}function O({error:re,subscriber:te}){te.error(re)}},8002:(Ze,me,F)=>{"use strict";F.d(me,{U:()=>j});var f=F(7393);function j(te,oe){return function(se){if("function"!=typeof te)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return se.lift(new O(te,oe))}}class O{constructor(oe,ce){this.project=oe,this.thisArg=ce}call(oe,ce){return ce.subscribe(new re(oe,this.project,this.thisArg))}}class re extends f.L{constructor(oe,ce,se){super(oe),this.project=ce,this.count=0,this.thisArg=se||this}_next(oe){let ce;try{ce=this.project.call(this.thisArg,oe,this.count++)}catch(se){return void this.destination.error(se)}this.destination.next(ce)}}},3282:(Ze,me,F)=>{"use strict";F.d(me,{J:()=>O});var f=F(9773),j=F(4487);function O(re=Number.POSITIVE_INFINITY){return(0,f.zg)(j.y,re)}},9773:(Ze,me,F)=>{"use strict";F.d(me,{zg:()=>re});var f=F(8002),j=F(4402),O=F(5345);function re(se,G,L=Number.POSITIVE_INFINITY){return"function"==typeof G?V=>V.pipe(re((ne,pe)=>(0,j.D)(se(ne,pe)).pipe((0,f.U)((Pe,de)=>G(ne,Pe,pe,de))),L)):("number"==typeof G&&(L=G),V=>V.lift(new te(se,L)))}class te{constructor(G,L=Number.POSITIVE_INFINITY){this.project=G,this.concurrent=L}call(G,L){return L.subscribe(new oe(G,this.project,this.concurrent))}}class oe extends O.Ds{constructor(G,L,V=Number.POSITIVE_INFINITY){super(G),this.project=L,this.concurrent=V,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(G){this.active<this.concurrent?this._tryNext(G):this.buffer.push(G)}_tryNext(G){let L;const V=this.index++;try{L=this.project(G,V)}catch(ne){return void this.destination.error(ne)}this.active++,this._innerSub(L)}_innerSub(G){const L=new O.IY(this),V=this.destination;V.add(L);const ne=(0,O.ft)(G,L);ne!==L&&V.add(ne)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(G){this.destination.next(G)}notifyComplete(){const G=this.buffer;this.active--,G.length>0?this._next(G.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},4458:(Ze,me,F)=>{"use strict";F.d(me,{O:()=>j});var f=F(2441);function j(re,te){return function(ce){let se;if(se="function"==typeof re?re:function(){return re},"function"==typeof te)return ce.lift(new O(se,te));const G=Object.create(ce,f.N);return G.source=ce,G.subjectFactory=se,G}}class O{constructor(te,oe){this.subjectFactory=te,this.selector=oe}call(te,oe){const{selector:ce}=this,se=this.subjectFactory(),G=ce(se).subscribe(te);return G.add(oe.subscribe(se)),G}}},9746:(Ze,me,F)=>{"use strict";F.d(me,{QV:()=>O,ht:()=>te});var f=F(7393),j=F(3098);function O(ce,se=0){return function(L){return L.lift(new re(ce,se))}}class re{constructor(se,G=0){this.scheduler=se,this.delay=G}call(se,G){return G.subscribe(new te(se,this.scheduler,this.delay))}}class te extends f.L{constructor(se,G,L=0){super(se),this.scheduler=G,this.delay=L}static dispatch(se){const{notification:G,destination:L}=se;G.observe(L),this.unsubscribe()}scheduleMessage(se){this.destination.add(this.scheduler.schedule(te.dispatch,this.delay,new oe(se,this.destination)))}_next(se){this.scheduleMessage(j.P.createNext(se))}_error(se){this.scheduleMessage(j.P.createError(se)),this.unsubscribe()}_complete(){this.scheduleMessage(j.P.createComplete()),this.unsubscribe()}}class oe{constructor(se,G){this.notification=se,this.destination=G}}},1307:(Ze,me,F)=>{"use strict";F.d(me,{x:()=>j});var f=F(7393);function j(){return function(oe){return oe.lift(new O(oe))}}class O{constructor(oe){this.connectable=oe}call(oe,ce){const{connectable:se}=this;se._refCount++;const G=new re(oe,se),L=ce.subscribe(G);return G.closed||(G.connection=se.connect()),L}}class re extends f.L{constructor(oe,ce){super(oe),this.connectable=ce}_unsubscribe(){const{connectable:oe}=this;if(!oe)return void(this.connection=null);this.connectable=null;const ce=oe._refCount;if(ce<=0)return void(this.connection=null);if(oe._refCount=ce-1,ce>1)return void(this.connection=null);const{connection:se}=this,G=oe._connection;this.connection=null,G&&(!se||G===se)&&G.unsubscribe()}}},3101:(Ze,me,F)=>{"use strict";F.d(me,{R:()=>Ue});var f=F(7574);let j=1;const O=Promise.resolve(),re={};function te(Re){return Re in re&&(delete re[Re],!0)}const oe={setImmediate(Re){const Se=j++;return re[Se]=!0,O.then(()=>te(Se)&&Re()),Se},clearImmediate(Re){te(Re)}};var se=F(6465),L=F(6102);const pe=new class extends L.v{flush(Se){this.active=!0,this.scheduled=void 0;const{actions:Ce}=this;let Qe,zt=-1,fn=Ce.length;Se=Se||Ce.shift();do{if(Qe=Se.execute(Se.state,Se.delay))break}while(++zt<fn&&(Se=Ce.shift()));if(this.active=!1,Qe){for(;++zt<fn&&(Se=Ce.shift());)Se.unsubscribe();throw Qe}}}(class extends se.o{constructor(Se,Ce){super(Se,Ce),this.scheduler=Se,this.work=Ce}requestAsyncId(Se,Ce,Qe=0){return null!==Qe&&Qe>0?super.requestAsyncId(Se,Ce,Qe):(Se.actions.push(this),Se.scheduled||(Se.scheduled=oe.setImmediate(Se.flush.bind(Se,null))))}recycleAsyncId(Se,Ce,Qe=0){if(null!==Qe&&Qe>0||null===Qe&&this.delay>0)return super.recycleAsyncId(Se,Ce,Qe);0===Se.actions.length&&(oe.clearImmediate(Ce),Se.scheduled=void 0)}});var Pe=F(9796);class we extends f.y{constructor(Se,Ce=0,Qe=pe){var Re;super(),this.source=Se,this.delayTime=Ce,this.scheduler=Qe,(!(!(0,Pe.k)(Re=Ce)&&Re-parseFloat(Re)+1>=0)||Ce<0)&&(this.delayTime=0),(!Qe||"function"!=typeof Qe.schedule)&&(this.scheduler=pe)}static create(Se,Ce=0,Qe=pe){return new we(Se,Ce,Qe)}static dispatch(Se){const{source:Ce,subscriber:Qe}=Se;return this.add(Ce.subscribe(Qe))}_subscribe(Se){return this.scheduler.schedule(we.dispatch,this.delayTime,{source:this.source,subscriber:Se})}}function Ue(Re,Se=0){return function(Qe){return Qe.lift(new Ae(Re,Se))}}class Ae{constructor(Se,Ce){this.scheduler=Se,this.delay=Ce}call(Se,Ce){return new we(Ce,this.delay,this.scheduler).subscribe(Se)}}},8307:(Ze,me,F)=>{"use strict";F.d(me,{b:()=>re});var f=F(7393),j=F(8640),O=F(9105);function re(ce,se,G){return function(V){return V.lift(new te(ce,se,G))}}class te{constructor(se,G,L){this.nextOrObserver=se,this.error=G,this.complete=L}call(se,G){return G.subscribe(new oe(se,this.nextOrObserver,this.error,this.complete))}}class oe extends f.L{constructor(se,G,L,V){super(se),this._tapNext=j.Z,this._tapError=j.Z,this._tapComplete=j.Z,this._tapError=L||j.Z,this._tapComplete=V||j.Z,(0,O.m)(G)?(this._context=this,this._tapNext=G):G&&(this._context=G,this._tapNext=G.next||j.Z,this._tapError=G.error||j.Z,this._tapComplete=G.complete||j.Z)}_next(se){try{this._tapNext.call(this._context,se)}catch(G){return void this.destination.error(G)}this.destination.next(se)}_error(se){try{this._tapError.call(this._context,se)}catch(G){return void this.destination.error(G)}this.destination.error(se)}_complete(){try{this._tapComplete.call(this._context)}catch(se){return void this.destination.error(se)}return this.destination.complete()}}},4087:(Ze,me,F)=>{"use strict";F.d(me,{r:()=>O});var f=F(7574),j=F(5319);function O(re,te){return new f.y(oe=>{const ce=new j.w;let se=0;return ce.add(te.schedule(function(){se!==re.length?(oe.next(re[se++]),oe.closed||ce.add(this.schedule())):oe.complete()})),ce})}},6465:(Ze,me,F)=>{"use strict";F.d(me,{o:()=>O});var f=F(5319);class j extends f.w{constructor(te,oe){super()}schedule(te,oe=0){return this}}class O extends j{constructor(te,oe){super(te,oe),this.scheduler=te,this.work=oe,this.pending=!1}schedule(te,oe=0){if(this.closed)return this;this.state=te;const ce=this.id,se=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(se,ce,oe)),this.pending=!0,this.delay=oe,this.id=this.id||this.requestAsyncId(se,this.id,oe),this}requestAsyncId(te,oe,ce=0){return setInterval(te.flush.bind(te,this),ce)}recycleAsyncId(te,oe,ce=0){if(null!==ce&&this.delay===ce&&!1===this.pending)return oe;clearInterval(oe)}execute(te,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(te,oe);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(te,oe){let se,ce=!1;try{this.work(te)}catch(G){ce=!0,se=!!G&&G||new Error(G)}if(ce)return this.unsubscribe(),se}_unsubscribe(){const te=this.id,oe=this.scheduler,ce=oe.actions,se=ce.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==se&&ce.splice(se,1),null!=te&&(this.id=this.recycleAsyncId(oe,te,null)),this.delay=null}}},6102:(Ze,me,F)=>{"use strict";F.d(me,{v:()=>j});let f=(()=>{class O{constructor(te,oe=O.now){this.SchedulerAction=te,this.now=oe}schedule(te,oe=0,ce){return new this.SchedulerAction(this,te).schedule(ce,oe)}}return O.now=()=>Date.now(),O})();class j extends f{constructor(re,te=f.now){super(re,()=>j.delegate&&j.delegate!==this?j.delegate.now():te()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(re,te=0,oe){return j.delegate&&j.delegate!==this?j.delegate.schedule(re,te,oe):super.schedule(re,te,oe)}flush(re){const{actions:te}=this;if(this.active)return void te.push(re);let oe;this.active=!0;do{if(oe=re.execute(re.state,re.delay))break}while(re=te.shift());if(this.active=!1,oe){for(;re=te.shift();)re.unsubscribe();throw oe}}}},3637:(Ze,me,F)=>{"use strict";F.d(me,{z:()=>O,P:()=>re});var f=F(6465);const O=new(F(6102).v)(f.o),re=O},7771:(Ze,me,F)=>{"use strict";F.d(me,{c:()=>oe,N:()=>te});var f=F(6465),O=F(6102);const te=new class extends O.v{}(class extends f.o{constructor(se,G){super(se,G),this.scheduler=se,this.work=G}schedule(se,G=0){return G>0?super.schedule(se,G):(this.delay=G,this.state=se,this.scheduler.flush(this),this)}execute(se,G){return G>0||this.closed?super.execute(se,G):this._execute(se,G)}requestAsyncId(se,G,L=0){return null!==L&&L>0||null===L&&this.delay>0?super.requestAsyncId(se,G,L):se.flush(this)}}),oe=te},377:(Ze,me,F)=>{"use strict";F.d(me,{hZ:()=>j});const j="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Ze,me,F)=>{"use strict";F.d(me,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Ze,me,F)=>{"use strict";F.d(me,{b:()=>f});const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Ze,me,F)=>{"use strict";F.d(me,{N:()=>j});const j=(()=>{function O(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return O.prototype=Object.create(Error.prototype),O})()},4449:(Ze,me,F)=>{"use strict";function f(j){setTimeout(()=>{throw j},0)}F.d(me,{z:()=>f})},4487:(Ze,me,F)=>{"use strict";function f(j){return j}F.d(me,{y:()=>f})},9796:(Ze,me,F)=>{"use strict";F.d(me,{k:()=>f});const f=Array.isArray||(j=>j&&"number"==typeof j.length)},9489:(Ze,me,F)=>{"use strict";F.d(me,{z:()=>f});const f=j=>j&&"number"==typeof j.length&&"function"!=typeof j},9105:(Ze,me,F)=>{"use strict";function f(j){return"function"==typeof j}F.d(me,{m:()=>f})},1555:(Ze,me,F)=>{"use strict";function f(j){return null!==j&&"object"==typeof j}F.d(me,{K:()=>f})},4072:(Ze,me,F)=>{"use strict";function f(j){return!!j&&"function"!=typeof j.subscribe&&"function"==typeof j.then}F.d(me,{t:()=>f})},4869:(Ze,me,F)=>{"use strict";function f(j){return j&&"function"==typeof j.schedule}F.d(me,{K:()=>f})},8640:(Ze,me,F)=>{"use strict";function f(){}F.d(me,{Z:()=>f})},7444:(Ze,me,F)=>{"use strict";F.d(me,{s:()=>V});var f=F(5015),j=F(4449),re=F(377),oe=F(6554),se=F(9489),G=F(4072),L=F(1555);const V=ne=>{if(ne&&"function"==typeof ne[oe.L])return(ne=>pe=>{const Pe=ne[oe.L]();if("function"!=typeof Pe.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Pe.subscribe(pe)})(ne);if((0,se.z)(ne))return(0,f.V)(ne);if((0,G.t)(ne))return(ne=>pe=>(ne.then(Pe=>{pe.closed||(pe.next(Pe),pe.complete())},Pe=>pe.error(Pe)).then(null,j.z),pe))(ne);if(ne&&"function"==typeof ne[re.hZ])return(ne=>pe=>{const Pe=ne[re.hZ]();for(;;){let de;try{de=Pe.next()}catch(we){return pe.error(we),pe}if(de.done){pe.complete();break}if(pe.next(de.value),pe.closed)break}return"function"==typeof Pe.return&&pe.add(()=>{Pe.return&&Pe.return()}),pe})(ne);{const Pe=`You provided ${(0,L.K)(ne)?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Pe)}}},5015:(Ze,me,F)=>{"use strict";F.d(me,{V:()=>f});const f=j=>O=>{for(let re=0,te=j.length;re<te&&!O.closed;re++)O.next(j[re]);O.complete()}},3687:(Ze,me,F)=>{"use strict";var f=F(8720);let j=null;function O(){return j}const ce=new f.OlP("DocumentToken");let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:G,token:n,providedIn:"platform"}),n})();function G(){return(0,f.LFG)(V)}const L=new f.OlP("Location Initialized");let V=(()=>{class n extends se{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,a){ne()?this._history.pushState(t,r,a):this.location.hash=a}replaceState(t,r,a){ne()?this._history.replaceState(t,r,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=(0,f.Yz7)({factory:pe,token:n,providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function pe(){return new V((0,f.LFG)(ce))}function Pe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function de(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function we(n){return n&&"?"!==n[0]?"?"+n:n}let Ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:Ae,token:n,providedIn:"root"}),n})();function Ae(n){const e=(0,f.LFG)(ce).location;return new Se((0,f.LFG)(se),e&&e.origin||"")}const Re=new f.OlP("appBaseHref");let Se=(()=>{class n extends Ue{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Pe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+we(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${r}${a}`:r}pushState(t,r,a,c){const h=this.prepareExternalUrl(a+we(c));this._platformLocation.pushState(t,r,h)}replaceState(t,r,a,c){const h=this.prepareExternalUrl(a+we(c));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se),f.LFG(Re,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n extends Ue{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Pe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,a,c){let h=this.prepareExternalUrl(a+we(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,a,c){let h=this.prepareExternalUrl(a+we(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se),f.LFG(Re,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Qe=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const a=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=de(_t(a)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+we(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,_t(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",a=null){this._platformStrategy.pushState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+we(r)),a)}replaceState(t,r="",a=null){this._platformStrategy.replaceState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+we(r)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformStrategy).historyGo)||void 0===a||a.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(a=>a(t,r))}subscribe(t,r,a){return this._subject.subscribe({next:t,error:r,complete:a})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ue),f.LFG(se))},n.normalizeQueryParams=we,n.joinWithSlash=Pe,n.stripTrailingSlash=de,n.\u0275prov=(0,f.Yz7)({factory:zt,token:n,providedIn:"root"}),n})();function zt(){return new Qe((0,f.LFG)(Ue),(0,f.LFG)(se))}function _t(n){return n.replace(/\/index.html$/,"")}var ze=(()=>((ze=ze||{})[ze.Zero=0]="Zero",ze[ze.One=1]="One",ze[ze.Two=2]="Two",ze[ze.Few=3]="Few",ze[ze.Many=4]="Many",ze[ze.Other=5]="Other",ze))();const Li=f.kL8;class ai{}let at=(()=>{class n extends ai{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Li(r||this.locale)(t)){case ze.Zero:return"zero";case ze.One:return"one";case ze.Two:return"two";case ze.Few:return"few";case ze.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.soG))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Kt=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new vf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){sd("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){sd("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class vf{constructor(){this.$implicit=null,this.ngIf=null}}function sd(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let Ou=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[{provide:ai,useClass:at}]}),n})();function pd(n){return"browser"===n}function Jo(n){return"server"===n}let qs=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Df((0,f.LFG)(ce),window)}),n})();class Df{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=r.currentNode;for(;a;){const c=a.shadowRoot;if(c){const h=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(h)return h}a=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],a-c[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ui(this.window.history)||ui(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ui(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ss extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new ss,j||(j=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Pa=Pa||document.querySelector("base"),Pa?Pa.getAttribute("href"):null);return null==t?null:function(n){li=li||document.createElement("a"),li.setAttribute("href",n);const e=li.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Pa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[a,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(a.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let li,Pa=null;const Ws=new f.OlP("TRANSITION_ID"),Tf=[{provide:f.ip1,useFactory:function(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<a.length;c++)r.remove(a[c])})}},deps:[Ws,ce,f.zs3],multi:!0}];class ur{static init(){(0,f.VLi)(new ur)}addToWindow(e){f.dqk.getAngularTestability=(r,a=!0)=>{const c=e.findTestabilityInTree(r,a);if(null==c)throw new Error("Could not find testability for element.");return c},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const a=f.dqk.getAllAngularTestabilities();let c=a.length,h=!1;const y=function(b){h=h||b,c--,0==c&&r(h)};a.forEach(function(b){b.whenStable(y)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Fu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Cs=new f.OlP("EventManagerPlugins");let zs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,a){return this._findPluginFor(r).addEventListener(t,r,a)}addGlobalEventListener(t,r,a){return this._findPluginFor(r).addGlobalEventListener(t,r,a)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const a=this._plugins;for(let c=0;c<a.length;c++){const h=a[c];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Cs),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Zs{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const a=O().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,r)}}let Vu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),r.add(a))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n extends Vu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,a){t.forEach(c=>{const h=this._doc.createElement("style");h.textContent=c,a.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Vt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,a)=>{this._addStylesToHost(t,a,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Vt))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Vt(n){O().remove(n)}const ta={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Sn=/%COMP%/g;function ju(n,e,t){for(let r=0;r<e.length;r++){let a=e[r];Array.isArray(a)?ju(n,a,t):(a=a.replace(Sn,n),t.push(a))}return t}function Ys(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let tr=(()=>{class n{constructor(t,r,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new mr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let a=this.rendererByCompId.get(r.id);return a||(a=new Va(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,a)),a.applyToHost(t),a}case 1:case f.ifc.ShadowDom:return new yd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const a=ju(r.id,r.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(zs),f.LFG(Ie),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class mr{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(ta[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,a){if(a){t=a+":"+t;const c=ta[a];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const a=ta[r];a?e.removeAttributeNS(a,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,a){a&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,a&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ys(r)):this.eventManager.addEventListener(e,t,Ys(r))}}class Va extends mr{constructor(e,t,r,a){super(e),this.component=r;const c=ju(a+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(Sn,a+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Sn,n)}(a+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class yd extends mr{constructor(e,t,r,a){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=ju(a.id,a.styles,[]);for(let h=0;h<c.length;h++){const y=document.createElement("style");y.textContent=c[h],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ua=(()=>{class n extends Zs{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,a){return t.addEventListener(r,a,!1),()=>this.removeEventListener(t,r,a)}removeEventListener(t,r,a){return t.removeEventListener(r,a)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const ja=["alt","control","meta","shift"],Gu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$a={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},xn={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let qu=(()=>{class n extends Zs{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,a){const c=n.parseEventName(r),h=n.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,c.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),a=r.shift();if(0===r.length||"keydown"!==a&&"keyup"!==a)return null;const c=n._normalizeKey(r.pop());let h="";if(ja.forEach(b=>{const D=r.indexOf(b);D>-1&&(r.splice(D,1),h+=b+".")}),h+=c,0!=r.length||0===c.length)return null;const y={};return y.domEventName=a,y.fullKey=h,y}static getEventFullKey(t){let r="",a=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&$a.hasOwnProperty(e)&&(e=$a[e]))}return Gu[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),ja.forEach(c=>{c!=a&&xn[c](t)&&(r+=c+".")}),r+=a,r}static eventCallback(t,r,a){return c=>{n.getEventFullKey(c)===t&&a.runGuarded(()=>r(c))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ei=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function(){ss.makeCurrent(),ur.init()},multi:!0},{provide:ce,useFactory:function(){return(0,f.RDi)(document),document},deps:[]}]),Ed=[[],{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function(){return new f.qLn},deps:[]},{provide:Cs,useClass:Ua,multi:!0,deps:[ce,f.R0b,f.Lbi]},{provide:Cs,useClass:qu,multi:!0,deps:[ce]},[],{provide:tr,useClass:tr,deps:[zs,Ie,f.AFp]},{provide:f.FYo,useExisting:tr},{provide:Vu,useExisting:Ie},{provide:Ie,useClass:Ie,deps:[ce]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:zs,useClass:zs,deps:[Cs,f.R0b]},{provide:class{},useClass:Fu,deps:[]},[]];let Mf=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Ws,useExisting:f.AFp},Tf]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:Ed,imports:[Ou,f.hGG]}),n})();"undefined"!=typeof window&&window;var Fn=F(4402),ln=F(7574),Xs=F(9796),pt=F(8002),xo=F(1555);function ec(n,e){return new ln.y(t=>{const r=n.length;if(0===r)return void t.complete();const a=new Array(r);let c=0,h=0;for(let y=0;y<r;y++){const b=(0,Fn.D)(n[y]);let D=!1;t.add(b.subscribe({next:x=>{D||(D=!0,h++),a[y]=x},error:x=>t.error(x),complete:()=>{c++,(c===r||!D)&&(h===r&&t.next(e?e.reduce((x,P,z)=>(x[P]=a[z],x),{}):a),t.complete())}}))}})}let eo=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Ts=(()=>{class n extends eo{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const bi=new f.OlP("NgValueAccessor"),Ga={provide:bi,useExisting:(0,f.Gpc)(()=>to),multi:!0},Rn=new f.OlP("CompositionEventMode");let to=(()=>{class n extends eo{constructor(t,r,a){super(t,r),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Rn,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[f._Bn([Ga]),f.qOj]}),n})();const Mn=new f.OlP("NgValidators"),$i=new f.OlP("NgAsyncValidators");function Dd(n){return null!=n}function za(n){const e=(0,f.QGY)(n)?(0,Fn.D)(n):n;return(0,f.CqO)(e),e}function Dn(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Td(n,e){return e.map(t=>t(n))}function zg(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function xd(n){return null!=n?function(n){if(!n)return null;const e=n.filter(Dd);return 0==e.length?null:function(t){return Dn(Td(t,e))}}(zg(n)):null}function tc(n){return null!=n?function(n){if(!n)return null;const e=n.filter(Dd);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,Xs.k)(e))return ec(e,null);if((0,xo.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return ec(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return ec(n=1===n.length&&(0,Xs.k)(n[0])?n[0]:n,null).pipe((0,pt.U)(t=>e(...t)))}return ec(n,null)}(Td(t,e).map(za)).pipe((0,pt.U)(Dn))}}(zg(n)):null}function Za(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ka(n){return n?Array.isArray(n)?n:[n]:[]}function us(n,e){return Array.isArray(n)?n.includes(e):n===e}function pl(n,e){const t=Ka(e);return Ka(n).forEach(a=>{us(t,a)||t.push(a)}),t}function Ln(n,e){return Ka(e).filter(t=>!us(n,t))}let rc=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=xd(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=tc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n}),n})(),yr=(()=>{class n extends rc{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();class Mo extends rc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ic{constructor(e){this._cd=e}is(e){var t,r,a;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(a=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===a?void 0:a[e])}}let No=(()=>{class n extends ic{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Mo,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),ro=(()=>{class n extends ic{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(yr,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function X(n,e){et(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&jn(n,e)})}(n,e),function(n,e){const t=(r,a)=>{e.valueAccessor.writeValue(r),a&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&jn(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function De(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function et(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Za(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Za(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const a=()=>n.updateValueAndValidity();De(e._rawValidators,a),De(e._rawAsyncValidators,a)}function jn(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Ci(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const vn="VALID",ml="INVALID",yl="PENDING",Gi="DISABLED";function _l(n){return(ko(n)?n.validators:n)||null}function Lf(n){return Array.isArray(n)?xd(n):n||null}function vl(n,e){return(ko(e)?e.asyncValidators:n)||null}function Zg(n){return Array.isArray(n)?tc(n):n||null}function ko(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class As{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Lf(this._rawValidators),this._composedAsyncValidatorFn=Zg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===vn}get invalid(){return this.status===ml}get pending(){return this.status==yl}get disabled(){return this.status===Gi}get enabled(){return this.status!==Gi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Lf(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Zg(e)}addValidators(e){this.setValidators(pl(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(pl(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ln(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ln(e,this._rawAsyncValidators))}hasValidator(e){return us(this._rawValidators,e)}hasAsyncValidator(e){return us(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=yl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Gi,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vn,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vn||this.status===yl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gi:vn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=yl,this._hasOwnPendingAsyncValidator=!0;const t=za(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(a=>{r=r instanceof ds?r.controls.hasOwnProperty(a)?r.controls[a]:null:r instanceof M_&&r.at(a)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Gi:this.errors?ml:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yl)?yl:this._anyControlsHaveStatus(ml)?ml:vn}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ko(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Xa extends As{constructor(e=null,t,r){super(_l(t),vl(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ci(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ci(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class ds extends As{constructor(e,t,r){super(_l(t),vl(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,a)=>{r.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof Xa?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((a,c)=>{r=t(r,a,c)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class M_ extends As{constructor(e,t,r){super(_l(t),vl(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,a)=>{this.at(a)&&this.at(a).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,a)=>{r.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Xa?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Kg={provide:yr,useExisting:(0,f.Gpc)(()=>El)},fa=(()=>Promise.resolve(null))();let El=(()=>{class n extends yr{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new f.vpe,this.form=new ds({},xd(t),tc(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){fa.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),X(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){fa.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),Ci(this._directives,t)})}addFormGroup(t){fa.then(()=>{const r=this._findContainer(t.path),a=new ds({});(function(n,e){et(n,e)})(a,t),r.registerControl(t.name,a),a.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){fa.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){fa.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Mn,10),f.Y36($i,10))},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(c){return r.onSubmit(c)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([Kg]),f.qOj]}),n})();const O_={provide:Mo,useExisting:(0,f.Gpc)(()=>oc)},Vf=(()=>Promise.resolve(null))();let oc=(()=>{class n extends Mo{constructor(t,r,a,c){super(),this.control=new Xa,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(a),this.valueAccessor=function(n,e){if(!e)return null;let t,r,a;return Array.isArray(e),e.forEach(c=>{c.constructor===to?t=c:function(n){return Object.getPrototypeOf(n.constructor)===Ts}(c)?r=c:a=c}),a||r||t||null}(0,c)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){X(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Vf.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,a=""===r||r&&"false"!==r;Vf.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(yr,9),f.Y36(Mn,10),f.Y36($i,10),f.Y36(bi,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([O_]),f.qOj,f.TTD]}),n})(),Qg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Jg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const kd=new f.OlP("NgModelWithFormControlWarning"),Wf={provide:Mn,useExisting:(0,f.Gpc)(()=>Dl),multi:!0};let Dl=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function(n){return function(n){return null==n||0===n.length}(n.value)?{required:!0}:null}(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[f._Bn([Wf])]}),n})(),Oe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Jg]]}),n})(),ct=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Oe]}),n})(),tn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:kd,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Oe]}),n})();var Di=F(8939),di=F(9765),lt=F(5917),Ud=F(6682),ru=F(9746),iu=F(5345);function nr(n,e){return"function"==typeof e?t=>t.pipe(nr((r,a)=>(0,Fn.D)(n(r,a)).pipe((0,pt.U)((c,h)=>e(r,c,a,h))))):t=>t.lift(new Kf(n))}class Kf{constructor(e){this.project=e}call(e,t){return t.subscribe(new G_(e,this.project))}}class G_ extends iu.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(a){return void this.destination.error(a)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new iu.IY(this),a=this.destination;a.add(r),this.innerSubscription=(0,iu.ft)(e,r),this.innerSubscription!==r&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}var rb=F(7771),ma=F(5319),Yr=F(7971),q_=F(8858);class ib extends di.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new sb(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,c=r.length;let h;if(this.closed)throw new Yr.N;if(this.isStopped||this.hasError?h=ma.w.EMPTY:(this.observers.push(e),h=new q_.W(this,e)),a&&e.add(e=new ru.ht(e,a)),t)for(let y=0;y<c&&!e.closed;y++)e.next(r[y]);else for(let y=0;y<c&&!e.closed;y++)e.next(r[y].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),h}_getNow(){return(this.scheduler||rb.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,a=this._events,c=a.length;let h=0;for(;h<c&&!(e-a[h].time<r);)h++;return c>t&&(h=Math.max(h,c-t)),h>0&&a.splice(0,h),a}}class sb{constructor(e,t){this.time=e,this.value=t}}function hi(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},a=>a.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let a,h,c=0,y=!1,b=!1;return function(x){let P;c++,!a||y?(y=!1,a=new ib(n,e,r),P=a.subscribe(this),h=x.subscribe({next(z){a.next(z)},error(z){y=!0,a.error(z)},complete(){b=!0,h=void 0,a.complete()}}),b&&(h=void 0)):P=a.subscribe(this),this.add(()=>{c--,P.unsubscribe(),P=void 0,h&&!b&&t&&0===c&&(h.unsubscribe(),h=void 0,a=void 0)})}}(r))}const rm=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var io=F(7393);function qi(n,e){return function(r){return r.lift(new OT(n,e))}}class OT{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new ab(e,this.predicate,this.thisArg))}}class ab extends io.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}const W_=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();var lc=F(9193);function su(n){return e=>0===n?(0,lc.c)():e.lift(new PT(n))}class PT{constructor(e){if(this.total=e,this.total<0)throw new W_}call(e,t){return t.subscribe(new ub(e,this.total))}}class ub extends io.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function im(n=null){return e=>e.lift(new cb(n))}class cb{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new kT(e,this.defaultValue))}}class kT extends io.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function FT(n=LT){return e=>e.lift(new lb(n))}class lb{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new sm(e,this.errorFactory))}}class sm extends io.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function LT(){return new rm}var db=F(4487);function so(n,e){const t=arguments.length>=2;return r=>r.pipe(n?qi((a,c)=>n(a,c,r)):db.y,su(1),t?im(e):FT(()=>new rm))}function hb(n,e){return e?nr(()=>n,e):nr(()=>n)}var z_=F(3101),Qr=F(2274);F(2329);var _e=F(8239),Ti=F(8026),Bd=F(3910),$t=F(3854),dc=F(5422);const K_=new Map,Jf={activated:!1,tokenObservers:[]},mb={initialized:!1,enabled:!1};function Vr(n){return K_.get(n)||Jf}function Rs(n,e){K_.set(n,e)}function jd(){return mb}class J_{constructor(e,t,r,a,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new $t.BH,yield(n=t.getNextRun(e),new Promise(e=>{setTimeout(e,n)})),t.pending.resolve(),yield t.pending.promise,t.pending=new $t.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}var n})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Wi=new $t.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function yb(n){if(!Vr(n).activated)throw Wi.create("use-before-activation",{appName:n.name})}function ep(n,e){return lm.apply(this,arguments)}function lm(){return(lm=(0,_e.Z)(function*({url:n,body:e},t){var r,a;const c={"Content-Type":"application/json"},h=t.getImmediate({optional:!0});if(h){const ee=yield h.getHeartbeatsHeader();ee&&(c["X-Firebase-Client"]=ee)}const y={method:"POST",body:JSON.stringify(e),headers:c};let b,D;try{b=yield fetch(n,y)}catch(ee){throw Wi.create("fetch-network-error",{originalErrorMessage:null===(r=ee)||void 0===r?void 0:r.message})}if(200!==b.status)throw Wi.create("fetch-status-error",{httpStatus:b.status});try{D=yield b.json()}catch(ee){throw Wi.create("fetch-parse-error",{originalErrorMessage:null===(a=ee)||void 0===a?void 0:a.message})}const x=D.ttl.match(/^([\d.]+)(s)$/);if(!x||!x[2]||isNaN(Number(x[1])))throw Wi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${D.ttl}`});const P=1e3*Number(x[1]),z=Date.now();return{token:D.token,expireTimeMillis:z+P,issuedAtTimeMillis:z}})).apply(this,arguments)}function GT(n,e){const{projectId:t,appId:r,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const Lo="firebase-app-check-store";let tp=null;function Eb(){return tp||(tp=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=a=>{n(a.target.result)},r.onerror=a=>{var c;e(Wi.create("storage-open",{originalErrorMessage:null===(c=a.target.error)||void 0===c?void 0:c.message}))},r.onupgradeneeded=a=>{const c=a.target.result;switch(a.oldVersion){case 0:c.createObjectStore(Lo,{keyPath:"compositeKey"})}}}catch(r){e(Wi.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),tp)}function np(){return(np=(0,_e.Z)(function*(n,e){const r=(yield Eb()).transaction(Lo,"readwrite"),c=r.objectStore(Lo).put({compositeKey:n,value:e});return new Promise((h,y)=>{c.onsuccess=b=>{h()},r.onerror=b=>{var D;y(Wi.create("storage-set",{originalErrorMessage:null===(D=b.target.error)||void 0===D?void 0:D.message}))}})})).apply(this,arguments)}const Gd=new dc.Yd("@firebase/app-check");function fm(n,e){return(0,$t.hl)()?function(n,e){return function(n,e){return np.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Gd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ov(){return jd().enabled}function Ib(){return av.apply(this,arguments)}function av(){return(av=(0,_e.Z)(function*(){const n=jd();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const uv={error:"UNKNOWN_ERROR"};function Db(n){return $t.US.encodeString(JSON.stringify(n),!1)}function cv(n){return pm.apply(this,arguments)}function pm(){return(pm=(0,_e.Z)(function*(n,e=!1){const t=n.app;yb(t);const r=Vr(t);let c,a=r.token;if(!a){const b=yield r.cachedTokenPromise;b&&mm(b)&&(a=b)}if(!e&&a&&mm(a))return{token:a.token};let y,h=!1;if(ov()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ep(GT(t,yield Ib()),n.heartbeatServiceProvider).then(D=>(r.exchangeTokenPromise=void 0,D)),h=!0);const b=yield r.exchangeTokenPromise;return yield fm(t,b),Rs(t,Object.assign(Object.assign({},r),{token:b})),{token:b.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(b=>(r.exchangeTokenPromise=void 0,b)),h=!0),a=yield r.exchangeTokenPromise}catch(b){"appCheck/throttled"===b.code?Gd.warn(b.message):Gd.error(b),c=b}return a?(y={token:a.token},Rs(t,Object.assign(Object.assign({},r),{token:a})),yield fm(t,a)):y=Ab(c),h&&oo(t,y),y})).apply(this,arguments)}function gm(n,e){const t=Vr(n),r=t.tokenObservers.filter(a=>a.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Rs(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Tb(n){const{app:e}=n,t=Vr(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new J_((0,_e.Z)(function*(){let r;if(r=Vr(e).token?yield cv(n,!0):yield cv(n),r.error)throw r.error}),()=>!0,()=>{const t=Vr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Rs(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function oo(n,e){const t=Vr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(a){}}function mm(n){return n.expireTimeMillis-Date.now()>0}function Ab(n){return{token:Db(uv),error:n}}class zT{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Vr(this.app);for(const t of e)gm(this.app,t.next);return Promise.resolve()}}const Mb="app-check-internal";(0,Ti._registerComponent)(new Bd.wA("app-check",n=>function(n,e){return new zT(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Mb).initialize()})),(0,Ti._registerComponent)(new Bd.wA(Mb,n=>function(n){return{getToken:e=>cv(n,e),addTokenListener:e=>function(n,e,t,r){const{app:a}=n,c=Vr(a),h={next:t,error:r,type:e};if(Rs(a,Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,h]})),c.token&&mm(c.token)){const y=c.token;Promise.resolve().then(()=>{t({token:y.token}),Tb(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>Tb(n))}(n,"INTERNAL",e),removeTokenListener:e=>gm(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ti.registerVersion)("@firebase/app-check","0.5.10");class Ob{constructor(){return(0,Qr.vb)("app-check")}}"undefined"!=typeof window&&window;var au=F(7841);const Pb=new f.OlP("angularfire2.auth.use-emulator"),_v=new f.OlP("angularfire2.auth.settings"),Em=new f.OlP("angularfire2.auth.tenant-id"),vv=new f.OlP("angularfire2.auth.langugage-code"),wm=new f.OlP("angularfire2.auth.use-device-language"),kb=new f.OlP("angularfire.auth.persistence"),uu=(n,e,t,r,a,c,h,y)=>(0,Di.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const b=e.runOutsideAngular(()=>n.auth());if(t&&b.useEmulator(...t),r&&(b.tenantId=r),b.languageCode=a,c&&b.useDeviceLanguage(),h)for(const[D,x]of Object.entries(h))b.settings[D]=x;return y&&b.setPersistence(y),b},[t,r,a,c,h,y]);let ap=(()=>{class n{constructor(t,r,a,c,h,y,b,D,x,P,z,ee){const ye=new di.xQ,Le=(0,lt.of)(void 0).pipe((0,ru.QV)(h.outsideAngular),nr(()=>c.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,4828)))),(0,pt.U)(()=>(0,Di.on)(t,c,r)),(0,pt.U)($e=>uu($e,c,y,D,x,P,b,z)),hi({bufferSize:1,refCount:!1}));if(Jo(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,lt.of)(null);else{Le.pipe(so()).subscribe();const xt=Le.pipe(nr(Rt=>Rt.getRedirectResult().then(en=>en,()=>null)),Qr.iC,hi({bufferSize:1,refCount:!1})),kt=Le.pipe(nr(Rt=>new ln.y(en=>({unsubscribe:c.runOutsideAngular(()=>Rt.onAuthStateChanged(In=>en.next(In),In=>en.error(In),()=>en.complete()))})))),Lt=Le.pipe(nr(Rt=>new ln.y(en=>({unsubscribe:c.runOutsideAngular(()=>Rt.onIdTokenChanged(In=>en.next(In),In=>en.error(In),()=>en.complete()))}))));this.authState=xt.pipe(hb(kt),(0,z_.R)(h.outsideAngular),(0,ru.QV)(h.insideAngular)),this.user=xt.pipe(hb(Lt),(0,z_.R)(h.outsideAngular),(0,ru.QV)(h.insideAngular)),this.idToken=this.user.pipe(nr(Rt=>Rt?(0,Fn.D)(Rt.getIdToken()):(0,lt.of)(null))),this.idTokenResult=this.user.pipe(nr(Rt=>Rt?(0,Fn.D)(Rt.getIdTokenResult()):(0,lt.of)(null))),this.credential=(0,Ud.T)(xt,ye,this.authState.pipe(qi(Rt=>!Rt))).pipe((0,pt.U)(Rt=>(null==Rt?void 0:Rt.user)?Rt:null),(0,z_.R)(h.outsideAngular),(0,ru.QV)(h.insideAngular))}return(0,Di.pX)(this,Le,c,{spy:{apply:($e,xt,kt)=>{($e.startsWith("signIn")||$e.startsWith("createUser"))&&kt.then(Lt=>ye.next(Lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Di.Dh),f.LFG(Di.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Qr.HU),f.LFG(Pb,8),f.LFG(_v,8),f.LFG(Em,8),f.LFG(vv,8),f.LFG(wm,8),f.LFG(kb,8),f.LFG(Ob,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),sA=(()=>{class n{constructor(){au.Z.registerVersion("angularfire",Qr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[ap]}),n})();var oA=F(3637),Wd=F(3282);function up(...n){return(0,Wd.J)(1)((0,lt.of)(...n))}var Fb=F(4869);function bm(...n){const e=n[n.length-1];return(0,Fb.K)(e)?(n.pop(),t=>up(n,t,e)):t=>up(n,t)}function Tl(){return n=>n.lift(new zd)}class zd{call(e,t){return t.subscribe(new Ev(e))}}class Ev extends io.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function _a(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(a){return a.lift(new cp(n,e,t))}}class cp{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new Zd(e,this.accumulator,this.seed,this.hasSeed))}}class Zd extends io.L{constructor(e,t,r,a){super(e),this.accumulator=t,this._seed=r,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(a){this.destination.error(a)}this.seed=r,this.destination.next(r)}}class Lb{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Vb(e,this.compare,this.keySelector))}}class Vb extends io.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:a}=this;t=a?a(e):e}catch(a){return this.destination.error(a)}let r=!1;if(this.hasKey)try{const{compare:a}=this;r=a(this.key,t)}catch(a){return this.destination.error(a)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}F(4828);var tt,wv=F(3394),Bb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ao={},Im=Im||{},Mt=Bb||self;function lp(){}function Cm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function dp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var bv="closure_uid_"+(1e9*Math.random()>>>0),cA=0;function Ns(n,e,t){return n.call.apply(n.bind,arguments)}function lA(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,r),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function fi(n,e,t){return(fi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ns:lA).apply(null,arguments)}function Iv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ai(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,a,c){for(var h=Array(arguments.length-2),y=2;y<arguments.length;y++)h[y-2]=arguments[y];return e.prototype[a].apply(r,h)}}function cu(){this.s=this.s,this.o=this.o}var dA={};cu.prototype.s=!1,cu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,bv)&&n[bv]||(n[bv]=++cA)}(this);delete dA[n]}},cu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Dm=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Cv=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,a="string"==typeof n?n.split(""):n;for(let c=0;c<r;c++)c in a&&e.call(t,a[c],c,n)};function $b(n){return Array.prototype.concat.apply([],arguments)}function Dv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function hp(n){return/^[\s\xa0]*$/.test(n)}var zi,Hb=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Si(n,e){return-1!=n.indexOf(e)}function Tv(n,e){return n<e?-1:n>e?1:0}e:{var Av=Mt.navigator;if(Av){var Sv=Av.userAgent;if(Sv){zi=Sv;break e}}zi=""}function xv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Vo(n){const e={};for(const t in n)e[t]=n[t];return e}var Tm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gb(n,e){let t,r;for(let a=1;a<arguments.length;a++){for(t in r=arguments[a],r)n[t]=r[t];for(let c=0;c<Tm.length;c++)t=Tm[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Rv(n){return Rv[" "](n),n}Rv[" "]=lp;var Al,n,qb=Si(zi,"Opera"),Kd=Si(zi,"Trident")||Si(zi,"MSIE"),Wb=Si(zi,"Edge"),Mv=Wb||Kd,Am=Si(zi,"Gecko")&&!(Si(zi.toLowerCase(),"webkit")&&!Si(zi,"Edge"))&&!(Si(zi,"Trident")||Si(zi,"MSIE"))&&!Si(zi,"Edge"),fA=Si(zi.toLowerCase(),"webkit")&&!Si(zi,"Edge");function zb(){var n=Mt.document;return n?n.documentMode:void 0}e:{var fp="",Nv=(n=zi,Am?/rv:([^\);]+)(\)|;)/.exec(n):Wb?/Edge\/([\d\.]+)/.exec(n):Kd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):fA?/WebKit\/(\S+)/.exec(n):qb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Nv&&(fp=Nv?Nv[1]:""),Kd){var pp=zb();if(null!=pp&&pp>parseFloat(fp)){Al=String(pp);break e}}Al=fp}var Ov={};function Zb(){return e=Ov,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=Hb(String(Al)).split("."),t=Hb("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var a=e[h]||"",c=t[h]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==a[0].length&&0==c[0].length)break;n=Tv(0==a[1].length?0:parseInt(a[1],10),0==c[1].length?0:parseInt(c[1],10))||Tv(0==a[2].length,0==c[2].length)||Tv(a[2],c[2]),a=a[3],c=c[3]}while(0==n)}return 0<=n}();var e}var kv=Mt.document&&Kd&&(zb()||parseInt(Al,10))||void 0,zR=function(){if(!Mt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Mt.addEventListener("test",lp,e),Mt.removeEventListener("test",lp,e)}catch(t){}return n}();function xi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Yd(n,e){if(xi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Am){e:{try{Rv(e.nodeName);var a=!0;break e}catch(c){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Yb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Yd.Z.h.call(this)}}xi.prototype.h=function(){this.defaultPrevented=!0},Ai(Yd,xi);var Yb={2:"touch",3:"pen",4:"mouse"};Yd.prototype.h=function(){Yd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Qd="closure_listenable_"+(1e6*Math.random()|0),Qb=0;function Jb(n,e,t,r,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=a,this.key=++Qb,this.ca=this.fa=!1}function uo(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Sl(n){this.src=n,this.g={},this.h=0}function Fv(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],a=Dm(r,e);(c=0<=a)&&Array.prototype.splice.call(r,a,1),c&&(uo(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Lv(n,e,t,r){for(var a=0;a<n.length;++a){var c=n[a];if(!c.ca&&c.listener==e&&c.capture==!!t&&c.ia==r)return a}return-1}Sl.prototype.add=function(n,e,t,r,a){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var h=Lv(n,e,r,a);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new Jb(e,this.src,c,!!r,a)).fa=t,n.push(e)),e};var Xb="closure_lm_"+(1e6*Math.random()|0),fc={};function Vv(n,e,t,r,a){if(r&&r.once)return eI(n,e,t,r,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Vv(n,e[c],t,r,a);return null}return t=Bv(t),n&&n[Qd]?n.N(e,t,dp(r)?!!r.capture:!!r,a):Jd(n,e,t,!1,r,a)}function Jd(n,e,t,r,a,c){if(!e)throw Error("Invalid event type");var h=dp(a)?!!a.capture:!!a,y=Uv(n);if(y||(n[Xb]=y=new Sl(n)),(t=y.add(e,t,r,h,c)).proxy)return t;if(r=function(){var e=nI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)zR||(a=h),void 0===a&&(a=!1),n.addEventListener(e.toString(),r,a);else if(n.attachEvent)n.attachEvent(tI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function eI(n,e,t,r,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)eI(n,e[c],t,r,a);return null}return t=Bv(t),n&&n[Qd]?n.O(e,t,dp(r)?!!r.capture:!!r,a):Jd(n,e,t,!0,r,a)}function Sm(n,e,t,r,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)Sm(n,e[c],t,r,a);else r=dp(r)?!!r.capture:!!r,t=Bv(t),n&&n[Qd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Lv(c=n.g[e],t,r,a))&&(uo(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=Uv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Lv(e,t,r,a)),(t=-1<n?e[n]:null)&&xm(t))}function xm(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Qd])Fv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(tI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Uv(e))?(Fv(t,n),0==t.h&&(t.src=null,e[Xb]=null)):uo(n)}}}function tI(n){return n in fc?fc[n]:fc[n]="on"+n}function nI(n,e){if(n.ca)n=!0;else{e=new Yd(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&xm(n),n=t.call(r,e)}return n}function Uv(n){return(n=n[Xb])instanceof Sl?n:null}var mp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bv(n){return"function"==typeof n?n:(n[mp]||(n[mp]=function(e){return n.handleEvent(e)}),n[mp])}function Jr(){cu.call(this),this.i=new Sl(this),this.P=this,this.I=null}function Xr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new xi(e,n);else if(e instanceof xi)e.target=e.target||n;else{var a=e;Gb(e=new xi(r,n),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var h=e.g=t[c];a=lu(h,r,!0,e)&&a}if(a=lu(h=e.g=n,r,!0,e)&&a,a=lu(h,r,!1,e)&&a,t)for(c=0;c<t.length;c++)a=lu(h=e.g=t[c],r,!1,e)&&a}function lu(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var h=e[c];if(h&&!h.ca&&h.capture==t){var y=h.listener,b=h.ia||h.src;h.fa&&Fv(n.i,h),a=!1!==y.call(b,r)&&a}}return a&&!r.defaultPrevented}Ai(Jr,cu),Jr.prototype[Qd]=!0,Jr.prototype.removeEventListener=function(n,e,t,r){Sm(this,n,e,t,r)},Jr.prototype.M=function(){if(Jr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)uo(t[r]);delete n.g[e],n.h--}}this.I=null},Jr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Jr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Rm=Mt.JSON.stringify;function pA(){var n=Gv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var $v,xl=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new mA,n=>n.reset());class mA{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function yA(n){Mt.setTimeout(()=>{throw n},0)}function jv(n,e){$v||function(){var n=Mt.Promise.resolve(void 0);$v=function(){n.then(zn)}}(),Hv||($v(),Hv=!0),Gv.add(n,e)}var Hv=!1,Gv=new class{constructor(){this.h=this.g=null}add(e,t){const r=xl.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function zn(){for(var n;n=pA();){try{n.h.call(n.g)}catch(t){yA(t)}var e=xl;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Hv=!1}function Xd(n,e){Jr.call(this),this.h=n||1,this.g=e||Mt,this.j=fi(this.kb,this),this.l=Date.now()}function rI(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Uo(n,e,t){if("function"==typeof n)t&&(n=fi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=fi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Mt.setTimeout(n,e||0)}function Mm(n){n.g=Uo(()=>{n.g=null,n.i&&(n.i=!1,Mm(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ai(Xd,Jr),(tt=Xd.prototype).da=!1,tt.S=null,tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Xr(this,"tick"),this.da&&(rI(this),this.start()))}},tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.M=function(){Xd.Z.M.call(this),rI(this),delete this.g};class qv extends cu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Mm(this)}M(){super.M(),this.g&&(Mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nm(n){cu.call(this),this.h=n,this.g={}}Ai(Nm,cu);var iI=[];function sI(n,e,t,r){Array.isArray(t)||(t&&(iI[0]=t.toString()),t=iI);for(var a=0;a<t.length;a++){var c=Vv(e,t[a],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function Wv(n){xv(n.g,function(e,t){this.g.hasOwnProperty(t)&&xm(e)},n),n.g={}}function yp(){this.g=!0}function eh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var h=1;h<a.length;h++)a[h]=""}}}return Rm(t)}catch(y){return e}}(n,t)+(r?" "+r:"")})}Nm.prototype.M=function(){Nm.Z.M.call(this),Wv(this)},Nm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yp.prototype.Aa=function(){this.g=!1},yp.prototype.info=function(){};var du={},zv=null;function vp(){return zv=zv||new Jr}function Zv(n){xi.call(this,du.Ma,n)}function th(n){const e=vp();Xr(e,new Zv(e,n))}function uI(n,e){xi.call(this,du.STAT_EVENT,n),this.stat=e}function Zi(n){const e=vp();Xr(e,new uI(e,n))}function cI(n,e){xi.call(this,du.Na,n),this.size=e}function Ep(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Mt.setTimeout(function(){n()},e)}du.Ma="serverreachability",Ai(Zv,xi),du.STAT_EVENT="statevent",Ai(uI,xi),du.Na="timingevent",Ai(cI,xi);var wp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},vA={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Om(){}function dI(){}Om.prototype.h=null;var Kv,Pm={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function hI(){xi.call(this,"d")}function bp(){xi.call(this,"c")}function Ip(){}function nh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Nm(this),this.P=Bo,this.W=new Xd(n=Mv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new EA}function EA(){this.i=null,this.g="",this.h=!1}Ai(hI,xi),Ai(bp,xi),Ai(Ip,Om),Ip.prototype.g=function(){return new XMLHttpRequest},Ip.prototype.i=function(){return{}},Kv=new Ip;var Bo=45e3,fI={},Yv={};function pI(n,e,t){n.K=1,n.v=mc(Ur(e)),n.s=t,n.U=!0,Qv(n,null)}function Qv(n,e){n.F=Date.now(),km(n),n.A=Ur(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),sE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new EA,n.g=xA(n.l,t?e:null,!n.s),0<n.O&&(n.L=new qv(fi(n.Ia,n,n.g),n.O)),sI(n.V,n.g,"readystatechange",n.gb),e=n.H?Vo(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),th(1),function(n,e,t,r,a,c){n.info(function(){if(n.g)if(c)for(var h="",y=c.split("&"),b=0;b<y.length;b++){var D=y[b].split("=");if(1<D.length){var x=D[0];D=D[1];var P=x.split("_");h=2<=P.length&&"type"==P[1]?h+(x+"=")+D+"&":h+(x+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Jv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Xv(n,e,t){let a,r=!0;for(;!n.I&&n.C<t.length;){if(a=wA(n,t),a==Yv){4==e&&(n.o=4,Zi(14),r=!1),eh(n.j,n.m,null,"[Incomplete Response]");break}if(a==fI){n.o=4,Zi(15),eh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}eh(n.j,n.m,a,null),tE(n,a)}Jv(n)&&a!=Yv&&a!=fI&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Zi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),gE(e),e.L=!0,Zi(11))):(eh(n.j,n.m,t,"[Invalid Chunked Response]"),hu(n),Cp(n))}function wA(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Yv:(t=Number(e.substring(t,r)),isNaN(t)?fI:(r+=1)+t>e.length?Yv:(e=e.substr(r,t),n.C=r+t,e))}function km(n){n.Y=Date.now()+n.P,eE(n,n.P)}function eE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ep(fi(n.eb,n),e)}function rh(n){n.B&&(Mt.clearTimeout(n.B),n.B=null)}function Cp(n){0==n.l.G||n.I||mE(n.l,n)}function hu(n){rh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,rI(n.W),Wv(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function tE(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Um(t.i,n)))if(t.I=n.N,!n.J&&Um(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(D){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0])e:if(t.u)t.ta=a[1],0<t.ta-t.U&&37500>a[2]&&t.N&&0==t.A&&!t.v&&(t.v=Ep(fi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Zm(t),fu(t)}pE(t),Zi(18)}if(1>=uE(t.i)&&t.ka){try{t.ka()}catch(D){}t.ka=void 0}}else vc(t,11)}else if((n.J||t.g==n)&&Zm(t),!hp(e))for(a=t.Ca.g.parse(e),e=0;e<a.length;e++){let D=a[e];if(t.U=D[0],D=D[1],2==t.G)if("c"==D[0]){t.J=D[1],t.la=D[2];const x=D[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const P=D[4];null!=P&&(t.za=P,t.h.info("SVER="+t.za));const z=D[5];null!=z&&"number"==typeof z&&0<z&&(t.K=r=1.5*z,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const ee=n.g;if(ee){const ye=ee.g?ee.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ye){var c=r.i;!c.g&&(Si(ye,"spdy")||Si(ye,"quic")||Si(ye,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(cE(c,c.h),c.h=null))}if(r.D){const Le=ee.g?ee.g.getResponseHeader("X-HTTP-Session-Id"):null;Le&&(r.sa=Le,un(r.F,r.D,Le))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=Km(r,r.H?r.la:null,r.W),h.J){lE(r.i,h);var y=h,b=r.K;b&&y.setTimeout(b),y.B&&(rh(y),km(y)),r.g=h}else TI(r);0<t.l.length&&zm(t)}else"stop"!=D[0]&&"close"!=D[0]||vc(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?vc(t,7):hE(t):"noop"!=D[0]&&t.j&&t.j.wa(D),t.A=0)}th(4)}catch(D){}}function nE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Cm(n)||"string"==typeof n)Cv(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Cm(n)||"string"==typeof n){t=[];for(var r=n.length,a=0;a<r;a++)t.push(a)}else for(a in t=[],r=0,n)t[r++]=a;a=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Cm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var c=0;c<a;c++)e.call(void 0,r[c],t&&t[c],n)}}function ih(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof ih)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function rE(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Rl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var a={};for(t=e=0;e<n.g.length;)Rl(a,r=n.g[e])||(n.g[t++]=r,a[r]=1),e++;n.g.length=t}}function Rl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(tt=nh.prototype).setTimeout=function(n){this.P=n},tt.gb=function(n){n=n.target;const e=this.L;e&&3==_c(n)?e.l():this.Ia(n)},tt.Ia=function(n){try{if(n==this.g)e:{const x=_c(this.g);var e=this.g.Da();const P=this.g.ba();if(!(3>x)&&(3!=x||Mv||this.g&&(this.h.h||this.g.ga()||AA(this.g)))){this.I||4!=x||7==e||th(8==e||0>=P?3:2),rh(this);var t=this.g.ba();this.N=t;t:if(Jv(this)){var r=AA(this.g);n="";var a=r.length,c=4==_c(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){hu(this),Cp(this);var h="";break t}this.h.i=new Mt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==a-1});r.splice(0,a),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function(n,e,t,r,a,c,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+h})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var y,b=this.g;if((y=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hp(y)){var D=y;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Zi(12),hu(this),Cp(this);break e}eh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,tE(this,t)}this.U?(Xv(this,x,h),Mv&&this.i&&3==x&&(sI(this.V,this.W,"tick",this.fb),this.W.start())):(eh(this.j,this.m,h,null),tE(this,h)),4==x&&hu(this),this.i&&!this.I&&(4==x?mE(this.l,this):(this.i=!1,km(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,Zi(12)):(this.o=0,Zi(13)),hu(this),Cp(this)}}}catch(x){}},tt.fb=function(){if(this.g){var n=_c(this.g),e=this.g.ga();this.C<e.length&&(rh(this),Xv(this,n,e),this.i&&4!=n&&km(this))}},tt.cancel=function(){this.I=!0,hu(this)},tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(th(3),Zi(17)),hu(this),this.o=2,Cp(this)):eE(this,this.Y-n)},(tt=ih.prototype).R=function(){rE(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},tt.T=function(){return rE(this),this.g.concat()},tt.get=function(n,e){return Rl(this.h,n)?this.h[n]:e},tt.set=function(n,e){Rl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var a=t[r],c=this.get(a);n.call(e,c,a,this)}};var Dp=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function pc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof pc){this.g=void 0!==e?e:n.g,gc(this,n.j),this.s=n.s,Fm(this,n.i),Lm(this,n.m),this.l=n.l,e=n.h;var t=new va;t.i=e.i,e.g&&(t.g=new ih(e.g),t.h=e.h),Vm(this,t),this.o=n.o}else n&&(t=String(n).match(Dp))?(this.g=!!e,gc(this,t[1]||"",!0),this.s=yc(t[2]||""),Fm(this,t[3]||"",!0),Lm(this,t[4]),this.l=yc(t[5]||"",!0),Vm(this,t[6]||"",!0),this.o=yc(t[7]||"")):(this.g=!!e,this.h=new va(null,this.g))}function Ur(n){return new pc(n)}function gc(n,e,t){n.j=t?yc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Fm(n,e,t){n.i=t?yc(e,!0):e}function Lm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Vm(n,e,t){e instanceof va?(n.h=e,function(n,e){e&&!n.j&&(Os(n),n.i=null,n.g.forEach(function(t,r){var a=r.toLowerCase();r!=a&&(Ol(this,r),sE(this,a,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Mi(e,uh)),n.h=new va(e,n.g))}function un(n,e,t){n.h.set(e,t)}function mc(n){return un(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function yc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Mi(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,iE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function iE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}pc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Mi(e,Nl,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Mi(e,Nl,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Mi(t,"/"==t.charAt(0)?ah:oh,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Mi(t,ch)),n.join("")};var Nl=/[#\/\?@]/g,oh=/[#\?:]/g,ah=/[#\?]/g,uh=/[#\?@]/g,ch=/#/g;function va(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Os(n){n.g||(n.g=new ih,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),a=null;if(0<=r){var c=n[t].substring(0,r);a=n[t].substring(r+1)}else c=n[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ol(n,e){Os(n),e=kl(n,e),Rl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Rl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&rE(n)))}function Pl(n,e){return Os(n),e=kl(n,e),Rl(n.g.h,e)}function sE(n,e,t){Ol(n,e),0<t.length&&(n.i=null,n.g.set(kl(n,e),Dv(t)),n.h+=t.length)}function kl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function oE(n){this.l=n||yI,n=Mt.PerformanceNavigationTiming?0<(n=Mt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Mt.g&&Mt.g.Ea&&Mt.g.Ea()&&Mt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=va.prototype).add=function(n,e){Os(this),this.i=null,n=kl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){Os(this),this.g.forEach(function(t,r){Cv(t,function(a){n.call(e,a,r,this)},this)},this)},tt.T=function(){Os(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var a=n[r],c=0;c<a.length;c++)t.push(e[r]);return t},tt.R=function(n){Os(this);var e=[];if("string"==typeof n)Pl(this,n)&&(e=$b(e,this.g.get(kl(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=$b(e,n[t])}return e},tt.set=function(n,e){return Os(this),this.i=null,Pl(this,n=kl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],a=encodeURIComponent(String(r));r=this.R(r);for(var c=0;c<r.length;c++){var h=a;""!==r[c]&&(h+="="+encodeURIComponent(String(r[c]))),n.push(h)}}return this.i=n.join("&")};var yI=10;function aE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function uE(n){return n.h?1:n.g?n.g.size:0}function Um(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function cE(n,e){n.g?n.g.add(e):n.h=e}function lE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function _I(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Dv(n.i)}function Bm(){}function vI(){this.g=new Bm}function IA(n,e,t){const r=t||"";try{nE(n,function(a,c){let h=a;dp(a)&&(h=Rm(a)),e.push(r+c+"="+encodeURIComponent(h))})}catch(a){throw e.push(r+"type="+encodeURIComponent("_badmap")),a}}function jm(n,e,t,r,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(r)}catch(c){}}function lh(n){this.l=n.$b||null,this.j=n.ib||!1}function $m(n,e){Jr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Hm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}oE.prototype.cancel=function(){if(this.i=_I(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Bm.prototype.stringify=function(n){return Mt.JSON.stringify(n,void 0)},Bm.prototype.parse=function(n){return Mt.JSON.parse(n,void 0)},Ai(lh,Om),lh.prototype.g=function(){return new $m(this.l,this.j)},lh.prototype.i=function(n){return function(){return n}}({}),Ai($m,Jr);var Hm=0;function EI(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Tp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Gm(n)}function Gm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=$m.prototype).open=function(n,e){if(this.readyState!=Hm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Gm(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Mt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Tp(this)),this.readyState=Hm},tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Gm(this)),this.g&&(this.readyState=3,Gm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Mt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;EI(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Tp(this):Gm(this),3==this.readyState&&EI(this)}},tt.Ua=function(n){this.g&&(this.response=this.responseText=n,Tp(this))},tt.Ta=function(n){this.g&&(this.response=n,Tp(this))},tt.ha=function(){this.g&&Tp(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty($m.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var CA=Mt.JSON.parse;function vr(n){Jr.call(this),this.headers=new ih,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=DA,this.K=this.L=!1}Ai(vr,Jr);var DA="",YR=/^https?$/i,QR=["POST","PUT"];function JR(n){return"content-type"==n.toLowerCase()}function wI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,bI(n),dh(n)}function bI(n){n.D||(n.D=!0,Xr(n,"complete"),Xr(n,"error"))}function qm(n){if(n.h&&void 0!==Im&&(!n.C[1]||4!=_c(n)||2!=n.ba()))if(n.v&&4==_c(n))Uo(n.Fa,0,n);else if(Xr(n,"readystatechange"),4==_c(n)){n.h=!1;try{const y=n.ba();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===y){var a=String(n.H).match(Dp)[1]||null;if(!a&&Mt.self&&Mt.self.location){var c=Mt.self.location.protocol;a=c.substr(0,c.length-1)}r=!YR.test(a?a.toLowerCase():"")}t=r}if(t)Xr(n,"complete"),Xr(n,"success");else{n.m=6;try{var h=2<_c(n)?n.g.statusText:""}catch(b){h=""}n.j=h+" ["+n.ba()+"]",bI(n)}}finally{dh(n)}}}function dh(n,e){if(n.g){II(n);const t=n.g,r=n.C[0]?lp:null;n.g=null,n.C=null,e||Xr(n,"ready");try{t.onreadystatechange=r}catch(a){}}}function II(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Mt.clearTimeout(n.A),n.A=null)}function _c(n){return n.g?n.g.readyState:0}function AA(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case DA:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function dE(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return xv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):un(n,e,t))}function hh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function SA(n){this.za=0,this.l=[],this.h=new yp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=hh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=hh("baseRetryDelayMs",5e3,n),this.$a=hh("retryDelaySeedMs",1e4,n),this.Ya=hh("forwardChannelMaxRetries",2,n),this.ra=hh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new oE(n&&n.concurrentRequestLimit),this.Ca=new vI,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function hE(n){if(CI(n),3==n.G){var e=n.V++,t=Ur(n.F);un(t,"SID",n.J),un(t,"RID",e),un(t,"TYPE","terminate"),Sp(n,t),(e=new nh(n,n.h,e,void 0)).K=2,e.v=mc(Ur(t)),t=!1,Mt.navigator&&Mt.navigator.sendBeacon&&(t=Mt.navigator.sendBeacon(e.v.toString(),"")),!t&&Mt.Image&&((new Image).src=e.v,t=!0),t||(e.g=xA(e.l,null),e.g.ea(e.v)),e.F=Date.now(),km(e)}yE(n)}function fu(n){n.g&&(gE(n),n.g.cancel(),n.g=null)}function CI(n){fu(n),n.u&&(Mt.clearTimeout(n.u),n.u=null),Zm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Mt.clearTimeout(n.m),n.m=null)}function Wm(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&zm(n)}function zm(n){aE(n.i)||n.m||(n.m=!0,jv(n.Ha,n),n.C=0)}function Ap(n,e){var t;t=e?e.m:n.V++;const r=Ur(n.F);un(r,"SID",n.J),un(r,"RID",t),un(r,"AID",n.U),Sp(n,r),n.o&&n.s&&dE(r,n.o,n.s),t=new nh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=fE(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),cE(n.i,t),pI(t,r,e)}function Sp(n,e){n.j&&nE({},function(t,r){un(e,r,t)})}function fE(n,e,t){t=Math.min(n.l.length,t);var r=n.j?fi(n.j.Oa,n.j,n):null;e:{var a=n.l;let c=-1;for(;;){const h=["count="+t];-1==c?0<t?(c=a[0].h,h.push("ofs="+c)):c=0:h.push("ofs="+c);let y=!0;for(let b=0;b<t;b++){let D=a[b].h;const x=a[b].g;if(D-=c,0>D)c=Math.max(0,a[b].h-100),y=!1;else try{IA(x,h,"req"+D+"_")}catch(P){r&&r(x)}}if(y){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function TI(n){n.g||n.u||(n.Y=1,jv(n.Ga,n),n.A=0)}function pE(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Ep(fi(n.Ga,n),SI(n,n.A)),n.A++,0))}function gE(n){null!=n.B&&(Mt.clearTimeout(n.B),n.B=null)}function AI(n){n.g=new nh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ur(n.oa);un(e,"RID","rpc"),un(e,"SID",n.J),un(e,"CI",n.N?"0":"1"),un(e,"AID",n.U),Sp(n,e),un(e,"TYPE","xmlhttp"),n.o&&n.s&&dE(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=mc(Ur(e)),t.s=null,t.U=!0,Qv(t,n)}function Zm(n){null!=n.v&&(Mt.clearTimeout(n.v),n.v=null)}function mE(n,e){var t=null;if(n.g==e){Zm(n),gE(n),n.g=null;var r=2}else{if(!Um(n.i,e))return;t=e.D,lE(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;Xr(r=vp(),new cI(r,t,e,a)),zm(n)}else TI(n);else if(3==(a=e.o)||0==a&&0<n.I||!(1==r&&function(n,e){return!(uE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Ep(fi(n.Ha,n,e),SI(n,n.C)),n.C++,0)))}(n,e)||2==r&&pE(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:vc(n,5);break;case 4:vc(n,10);break;case 3:vc(n,6);break;default:vc(n,2)}}function SI(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function vc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=fi(n.jb,n);t||(t=new pc("//www.google.com/images/cleardot.gif"),Mt.location&&"http"==Mt.location.protocol||gc(t,"https"),mc(t)),function(n,e){const t=new yp;if(Mt.Image){const r=new Image;r.onload=Iv(jm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Iv(jm,t,r,"TestLoadImage: error",!1,e),r.onabort=Iv(jm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Iv(jm,t,r,"TestLoadImage: timeout",!1,e),Mt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Zi(2);n.G=0,n.j&&n.j.va(e),yE(n),CI(n)}function yE(n){n.G=0,n.I=-1,n.j&&((0!=_I(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Dv(n.l),n.l.length=0),n.j.ua())}function Km(n,e,t){let r=function(n){return n instanceof pc?Ur(n):new pc(n,void 0)}(t);if(""!=r.i)e&&Fm(r,e+"."+r.i),Lm(r,r.m);else{const a=Mt.location;r=function(n,e,t,r){var a=new pc(null,void 0);return n&&gc(a,n),e&&Fm(a,e),t&&Lm(a,t),r&&(a.l=r),a}(a.protocol,e?e+"."+a.hostname:a.hostname,+a.port,t)}return n.aa&&xv(n.aa,function(a,c){un(r,c,a)}),t=n.sa,(e=n.D)&&t&&un(r,e,t),un(r,"VER",n.ma),Sp(n,r),r}function xA(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vr(t&&n.Ba&&!n.qa?new lh({ib:!0}):n.qa)).L=n.H,e}function Ym(){}function Qm(){if(Kd&&!(10<=Number(kv)))throw Error("Environmental error: no available transport.")}function co(n,e){Jr.call(this),this.g=new SA(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!hp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hp(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ec(this)}function fh(n){hI.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function xI(){bp.call(this),this.status=1}function Ec(n){this.g=n}(tt=vr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Kv.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Kv),this.g.onreadystatechange=fi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void wI(this,c)}n=t||"";const a=new ih(this.headers);r&&nE(r,function(c,h){a.set(h,c)}),r=function(n){e:{var e=JR;const t=n.length,r="string"==typeof n?n.split(""):n;for(let a=0;a<t;a++)if(a in r&&e.call(void 0,r[a],a,n)){e=a;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(a.T()),t=Mt.FormData&&n instanceof Mt.FormData,!(0<=Dm(QR,e))||r||t||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(c,h){this.g.setRequestHeader(h,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{II(this),0<this.B&&((this.K=function(n){return Kd&&Zb()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fi(this.pa,this)):this.A=Uo(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){wI(this,c)}},tt.pa=function(){void 0!==Im&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xr(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Xr(this,"complete"),Xr(this,"abort"),dh(this))},tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),dh(this,!0)),vr.Z.M.call(this)},tt.Fa=function(){this.s||(this.F||this.v||this.l?qm(this):this.cb())},tt.cb=function(){qm(this)},tt.ba=function(){try{return 2<_c(this)?this.g.status:-1}catch(n){return-1}},tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),CA(e)}},tt.Da=function(){return this.m},tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=SA.prototype).ma=8,tt.G=1,tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const a=new nh(this,this.h,n,void 0);let c=this.s;if(this.P&&(c?(c=Vo(c),Gb(c,this.P)):c=this.P),null===this.o&&(a.H=c),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=fE(this,a,e),un(t=Ur(this.F),"RID",n),un(t,"CVER",22),this.D&&un(t,"X-HTTP-Session-Id",this.D),Sp(this,t),this.o&&c&&dE(t,this.o,c),cE(this.i,a),this.Ra&&un(t,"TYPE","init"),this.ja?(un(t,"$req",e),un(t,"SID","null"),a.$=!0,pI(a,t,null)):pI(a,t,e),this.G=2}}else 3==this.G&&(n?Ap(this,n):0==this.l.length||aE(this.i)||Ap(this))},tt.Ga=function(){if(this.u=null,AI(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Ep(fi(this.bb,this),n)}},tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Zi(10),fu(this),AI(this))},tt.ab=function(){null!=this.v&&(this.v=null,fu(this),pE(this),Zi(19))},tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Zi(2)):(this.h.info("Failed to ping google.com"),Zi(1))},(tt=Ym.prototype).xa=function(){},tt.wa=function(){},tt.va=function(){},tt.ua=function(){},tt.Oa=function(){},Qm.prototype.g=function(n,e){return new co(n,e)},Ai(co,Jr),co.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),jv(fi(n.hb,n,e))),Zi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Km(n,null,n.W),zm(n)},co.prototype.close=function(){hE(this.g)},co.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Wm(this.g,e)}else this.v?((e={}).__data__=Rm(n),Wm(this.g,e)):Wm(this.g,n)},co.prototype.M=function(){this.g.j=null,delete this.j,hE(this.g),delete this.g,co.Z.M.call(this)},Ai(fh,hI),Ai(xI,bp),Ai(Ec,Ym),Ec.prototype.xa=function(){Xr(this.g,"a")},Ec.prototype.wa=function(n){Xr(this.g,new fh(n))},Ec.prototype.va=function(n){Xr(this.g,new xI(n))},Ec.prototype.ua=function(){Xr(this.g,"b")},Qm.prototype.createWebChannel=Qm.prototype.g,co.prototype.send=co.prototype.u,co.prototype.open=co.prototype.m,co.prototype.close=co.prototype.close,wp.NO_ERROR=0,wp.TIMEOUT=8,wp.HTTP_ERROR=6,vA.COMPLETE="complete",dI.EventType=Pm,Pm.OPEN="a",Pm.CLOSE="b",Pm.ERROR="c",Pm.MESSAGE="d",Jr.prototype.listen=Jr.prototype.N,vr.prototype.listenOnce=vr.prototype.O,vr.prototype.getLastError=vr.prototype.La,vr.prototype.getLastErrorCode=vr.prototype.Da,vr.prototype.getStatus=vr.prototype.ba,vr.prototype.getResponseJson=vr.prototype.Qa,vr.prototype.getResponseText=vr.prototype.ga,vr.prototype.send=vr.prototype.ea;var _E=ao.createWebChannelTransport=function(){return new Qm},RA=ao.getStatEventTarget=function(){return vp()},xp=ao.ErrorCode=wp,vE=ao.EventType=vA,RI=ao.Event=du,MA=ao.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},NA=ao.FetchXmlHttpFactory=lh,Rp=ao.WebChannel=dI,MI=ao.XhrIo=vr;const NI="@firebase/firestore";class Br{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Br.UNAUTHENTICATED=new Br(null),Br.GOOGLE_CREDENTIALS=new Br("google-credentials-uid"),Br.FIRST_PARTY=new Br("first-party-uid"),Br.MOCK_USER=new Br("mock-user");let wc="9.8.4";const pu=new dc.Yd("@firebase/firestore");function Mp(){return pu.logLevel}function ke(n,...e){if(pu.logLevel<=dc.in.DEBUG){const t=e.map(Jm);pu.debug(`Firestore (${wc}): ${n}`,...t)}}function Rr(n,...e){if(pu.logLevel<=dc.in.ERROR){const t=e.map(Jm);pu.error(`Firestore (${wc}): ${n}`,...t)}}function ph(n,...e){if(pu.logLevel<=dc.in.WARN){const t=e.map(Jm);pu.warn(`Firestore (${wc}): ${n}`,...t)}}function Jm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Je(n="Unexpected state"){const e=`FIRESTORE (${wc}) INTERNAL ASSERTION FAILED: `+n;throw Rr(e),new Error(e)}function It(n,e){n||Je()}function Ke(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends $t.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class wE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Br.UNAUTHENTICATED))}shutdown(){}}class PI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kI{constructor(e){this.t=e,this.currentUser=Br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let a=this.i;const c=D=>this.i!==a?(a=this.i,t(D)):Promise.resolve();let h=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Mr,e.enqueueRetryable(()=>c(this.currentUser))};const y=()=>{const D=h;e.enqueueRetryable((0,_e.Z)(function*(){yield D.promise,yield c(r.currentUser)}))},b=D=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(D=>b(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?b(D):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Mr)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new wE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new Br(e)}}class FI{constructor(e,t,r){this.type="FirstParty",this.user=Br.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const a=e.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class LI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new FI(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VI{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=c=>{null!=c.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.p;return this.p=c.token,ke("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const a=c=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.g.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.g.getImmediate({optional:!0});c?a(c):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.p=t.token,new bE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function PA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class UI{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const a=PA(40);for(let c=0;c<a.length;++c)r.length<20&&a[c]<t&&(r+=e.charAt(a[c]%e.length))}return r}}function Ot(n,e){return n<e?-1:n>e?1:0}function gh(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}function Nr(n){return n+"\0"}class $n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $n.fromMillis(Date.now())}static fromDate(e){return $n.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new $n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ot(this.nanoseconds,e.nanoseconds):Ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new $n(0,0))}static max(){return new wt(new $n(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Np{constructor(e,t,r){void 0===t?t=0:t>e.length&&Je(),void 0===r?r=e.length-t:r>e.length-t&&Je(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Np.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Np?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const c=e.get(a),h=t.get(a);if(c<h)return-1;if(c>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nn extends Np{construct(e,t,r){return new nn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new nn(t)}static emptyPath(){return new nn([])}}const kA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends Np{construct(e,t,r){return new lr(e,t,r)}static isValidIdentifier(e){return kA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new lr(["__name__"])}static fromServerFormat(e){const t=[];let r="",a=0;const c=()=>{if(0===r.length)throw new xe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;a<e.length;){const y=e[a];if("\\"===y){if(a+1===e.length)throw new xe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[a+1];if("\\"!==b&&"."!==b&&"`"!==b)throw new xe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=b,a+=2}else"`"===y?(h=!h,a++):"."!==y||h?(r+=y,a++):(c(),a++)}if(c(),h)throw new xe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(t)}static emptyPath(){return new lr([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(nn.fromString(e))}static fromName(e){return new qe(nn.fromString(e).popFirst(5))}static empty(){return new qe(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new nn(e.slice()))}}class gu{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function IE(n){return n.fields.find(e=>2===e.kind)}function Fl(n){return n.fields.filter(e=>2!==e.kind)}gu.UNKNOWN_ID=-1;class Op{constructor(e,t){this.fieldPath=e,this.kind=t}}class Pp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Pp(0,hs.min())}}function CE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=wt.fromTimestamp(1e9===r?new $n(t+1,0):new $n(t,r));return new hs(a,qe.empty(),e)}function FA(n){return new hs(n.readTime,n.key,-1)}class hs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new hs(wt.min(),qe.empty(),-1)}static max(){return new hs(wt.max(),qe.empty(),-1)}}function kp(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Ot(n.largestBatchId,e.largestBatchId))}const jo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function bc(n){return lo.apply(this,arguments)}function lo(){return(lo=(0,_e.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==jo)throw n;ke("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let a=0,c=0,h=!1;e.forEach(y=>{++a,y.next(()=>{++c,h&&c===a&&t()},b=>r(b))}),h=!0,c===a&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(a=>a?ae.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,c)=>{r.push(t.call(this,a,c))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,a)=>{const c=e.length,h=new Array(c);let y=0;for(let b=0;b<c;b++){const D=b;t(e[D]).next(x=>{h[D]=x,++y,y===c&&r(h)},x=>a(x))}})}static doWhile(e,t){return new ae((r,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):r()};c()})}}class fs{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Mr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Fp(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const a=Vl(r.target.error);this.T.reject(new Fp(e,a))}}static open(e,t,r,a){try{return new fs(t,e.transaction(a,r))}catch(c){throw new Fp(t,c)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new LA(t)}}class ho{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===ho.v((0,$t.z$)())&&Rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Ll(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,$t.hl)())return!1;if(ho.S())return!0;const e=(0,$t.z$)(),t=ho.v(e),r=0<t&&t<10,a=ho.D(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,_e.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=h=>{r(h.target.result)},c.onblocked=()=>{a(new Fp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=h=>{const y=h.target.error;a("VersionError"===y.name?new xe(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new xe(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new Fp(e,y))},c.onupgradeneeded=h=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.P.O(h.target.result,c.transaction,h.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,a){var c=this;return(0,_e.Z)(function*(){const h="readonly"===t;let y=0;for(;;){++y;try{c.db=yield c.k(e);const b=fs.open(c.db,e,h?"readonly":"readwrite",r),D=a(b).next(x=>(b.R(),x)).catch(x=>(b.abort(x),ae.reject(x))).toPromise();return D.catch(()=>{}),yield b.A,D}catch(b){const D=b,x="FirebaseError"!==D.name&&y<3;if(ke("SimpleDb","Transaction failed with error:",D.message,"Retrying:",x),c.close(),!x)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class jI{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Ll(this.$.delete())}}class Fp extends xe{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ic(n){return"IndexedDbTransactionError"===n.name}class LA{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ll(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Ll(this.store.add(e))}get(e){return Ll(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Ll(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Ll(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const a=this.cursor(r),c=[];return this.G(a,(h,y)=>{c.push(y)}).next(()=>c)}{const a=this.store.getAll(r.range);return new ae((c,h)=>{a.onerror=y=>{h(y.target.error)},a.onsuccess=y=>{c(y.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ae((a,c)=>{r.onerror=h=>{c(h.target.error)},r.onsuccess=h=>{a(h.target.result)}})}W(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const a=this.cursor(r);return this.G(a,(c,h,y)=>y.delete())}J(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.G(a,t)}Y(e){const t=this.cursor({});return new ae((r,a)=>{t.onerror=c=>{const h=Vl(c.target.error);a(h)},t.onsuccess=c=>{const h=c.target.result;h?e(h.primaryKey,h.value).next(y=>{y?h.continue():r()}):r()}})}G(e,t){const r=[];return new ae((a,c)=>{e.onerror=h=>{c(h.target.error)},e.onsuccess=h=>{const y=h.target.result;if(!y)return void a();const b=new jI(y),D=t(y.primaryKey,y.value,b);if(D instanceof ae){const x=D.catch(P=>(b.done(),ae.reject(P)));r.push(x)}b.isDone?a():null===b.U?y.continue():y.continue(b.U)}}).next(()=>ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ll(n){return new ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const a=Vl(r.target.error);t(a)}})}let Xm=!1;function Vl(n){const e=ho.v((0,$t.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Xm||(Xm=!0,setTimeout(()=>{throw r},0)),r}}return n}class VA{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){Ic(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield bc(r)}yield t.Z(1)}))}}class $I{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let a=t,c=!0;return ae.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(h=>{if(null!==h&&!r.has(h))return ke("IndexBackiller",`Processing collection: ${h}`),this.nt(e,h,a).next(y=>{a-=y,r.add(h)});c=!1})).next(()=>t-a)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(c=>{const h=c.changes;return this.localStore.indexManager.updateIndexEntries(e,h).next(()=>this.st(a,c)).next(y=>(ke("IndexBackiller",`Updating offset: ${y}`),this.localStore.indexManager.updateCollectionGroup(e,t,y))).next(()=>h.size)}))}st(e,t){let r=e;return t.changes.forEach((a,c)=>{const h=FA(c);kp(h,r)>0&&(r=h)}),new hs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ps{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function DE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Cc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Lp(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ps.ot=-1;class dr{constructor(e,t){this.comparator=e,this.root=t||ei.EMPTY}insert(e,t){return new dr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ei.BLACK,null,null))}remove(e){return new dr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vp(this.root,e,this.comparator,!0)}}class Vp{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ei{constructor(e,t,r,a,c){this.key=e,this.value=t,this.color=null!=r?r:ei.RED,this.left=null!=a?a:ei.EMPTY,this.right=null!=c?c:ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,c){return new ei(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const c=r(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,r),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return ei.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Je();const e=this.left.check();if(e!==this.right.check())throw Je();return e+(this.isRed()?0:1)}}ei.EMPTY=null,ei.RED=!0,ei.BLACK=!1,ei.EMPTY=new class{constructor(){this.size=0}get key(){throw Je()}get value(){throw Je()}get color(){throw Je()}get left(){throw Je()}get right(){throw Je()}copy(n,e,t,r,a){return this}insert(n,e,t){return new ei(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class En{constructor(e){this.comparator=e,this.data=new dr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ey(this.data.getIterator())}getIteratorFrom(e){return new ey(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class ey{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ul(n){return n.hasNext()?n.getNext():void 0}class gs{constructor(e){this.fields=e,e.sort(lr.comparator)}static empty(){return new gs([])}unionWith(e){let t=new En(lr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new gs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Or(t)}static fromUint8Array(e){const t=function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a}(e);return new Or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Or.EMPTY_BYTE_STRING=new Or("");const GI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mu(n){if(It(!!n),"string"==typeof n){let e=0;const t=GI.exec(n);if(It(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rr(n.seconds),nanos:rr(n.nanos)}}function rr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Dc(n){return"string"==typeof n?Or.fromBase64String(n):Or.fromUint8Array(n)}function TE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function qI(n){const e=n.mapValue.fields.__previous_value__;return TE(e)?qI(e):e}function Up(n){const e=mu(n.mapValue.fields.__local_write_time__.timestampValue);return new $n(e.seconds,e.nanos)}class UA{constructor(e,t,r,a,c,h,y,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=y,this.useFetchStreams=b}}class yu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new yu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}function Bp(n){return null==n}function jp(n){return 0===n&&1/n==-1/0}function WI(n){return"number"==typeof n&&Number.isInteger(n)&&!jp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Tc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ty={nullValue:"NULL_VALUE"};function Bl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?TE(n)?4:RE(n)?9007199254740991:10:Je()}function Ea(n,e){if(n===e)return!0;const t=Bl(n);if(t!==Bl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Up(n).isEqual(Up(e));case 3:return function(r,a){if("string"==typeof r.timestampValue&&"string"==typeof a.timestampValue&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=mu(r.timestampValue),h=mu(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Dc(n.bytesValue).isEqual(Dc(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,a){return rr(r.geoPointValue.latitude)===rr(a.geoPointValue.latitude)&&rr(r.geoPointValue.longitude)===rr(a.geoPointValue.longitude)}(n,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return rr(r.integerValue)===rr(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=rr(r.doubleValue),h=rr(a.doubleValue);return c===h?jp(c)===jp(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return gh(n.arrayValue.values||[],e.arrayValue.values||[],Ea);case 10:return function(r,a){const c=r.mapValue.fields||{},h=a.mapValue.fields||{};if(DE(c)!==DE(h))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(void 0===h[y]||!Ea(c[y],h[y])))return!1;return!0}(n,e);default:return Je()}var a}function $p(n,e){return void 0!==(n.values||[]).find(t=>Ea(t,e))}function Ac(n,e){if(n===e)return 0;const t=Bl(n),r=Bl(e);if(t!==r)return Ot(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ot(n.booleanValue,e.booleanValue);case 2:return function(a,c){const h=rr(a.integerValue||a.doubleValue),y=rr(c.integerValue||c.doubleValue);return h<y?-1:h>y?1:h===y?0:isNaN(h)?isNaN(y)?0:-1:1}(n,e);case 3:return zI(n.timestampValue,e.timestampValue);case 4:return zI(Up(n),Up(e));case 5:return Ot(n.stringValue,e.stringValue);case 6:return function(a,c){const h=Dc(a),y=Dc(c);return h.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),y=c.split("/");for(let b=0;b<h.length&&b<y.length;b++){const D=Ot(h[b],y[b]);if(0!==D)return D}return Ot(h.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const h=Ot(rr(a.latitude),rr(c.latitude));return 0!==h?h:Ot(rr(a.longitude),rr(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,c){const h=a.values||[],y=c.values||[];for(let b=0;b<h.length&&b<y.length;++b){const D=Ac(h[b],y[b]);if(D)return D}return Ot(h.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===Tc.mapValue&&c===Tc.mapValue)return 0;if(a===Tc.mapValue)return 1;if(c===Tc.mapValue)return-1;const h=a.fields||{},y=Object.keys(h),b=c.fields||{},D=Object.keys(b);y.sort(),D.sort();for(let x=0;x<y.length&&x<D.length;++x){const P=Ot(y[x],D[x]);if(0!==P)return P;const z=Ac(h[y[x]],b[D[x]]);if(0!==z)return z}return Ot(y.length,D.length)}(n.mapValue,e.mapValue);default:throw Je()}}function zI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ot(n,e);const t=mu(n),r=mu(e),a=Ot(t.seconds,r.seconds);return 0!==a?a:Ot(t.nanos,r.nanos)}function mh(n){return AE(n)}function AE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const a=mu(r);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Dc(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let a="[",c=!0;for(const h of r.values||[])c?c=!1:a+=",",a+=AE(h);return a+"]"}(n.arrayValue):"mapValue"in n?function(r){const a=Object.keys(r.fields||{}).sort();let c="{",h=!0;for(const y of a)h?h=!1:c+=",",c+=`${y}:${AE(r.fields[y])}`;return c+"}"}(n.mapValue):Je();var e}function jl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ny(n){return!!n&&"integerValue"in n}function yh(n){return!!n&&"arrayValue"in n}function SE(n){return!!n&&"nullValue"in n}function xE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hp(n){return!!n&&"mapValue"in n}function _h(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Cc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=_h(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_h(n.arrayValue.values[t]);return e}return Object.assign({},n)}function RE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ZI(n){return"nullValue"in n?ty:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?jl(yu.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Je()}function KI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?jl(yu.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Tc:Je()}function ry(n,e){const t=Ac(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ME(n,e){const t=Ac(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ir{constructor(e){this.value=e}static empty(){return new ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_h(t)}setAll(e){let t=lr.emptyPath(),r={},a=[];e.forEach((h,y)=>{if(!t.isImmediateParentOf(y)){const b=this.getFieldsMap(t);this.applyChanges(b,r,a),r={},a=[],t=y.popLast()}h?r[y.lastSegment()]=_h(h):a.push(y.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,a)}delete(e){const t=this.field(e.popLast());Hp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ea(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Hp(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Cc(t,(a,c)=>e[a]=c);for(const a of r)delete e[a]}clone(){return new ir(_h(this.value))}}function YI(n){const e=[];return Cc(n.fields,(t,r)=>{const a=new lr([t]);if(Hp(r)){const c=YI(r.mapValue).fields;if(0===c.length)e.push(a);else for(const h of c)e.push(a.child(h))}else e.push(a)}),new gs(e)}class Vn{constructor(e,t,r,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Vn(e,0,wt.min(),wt.min(),ir.empty(),0)}static newFoundDocument(e,t,r){return new Vn(e,1,t,wt.min(),r,0)}static newNoDocument(e,t){return new Vn(e,2,t,wt.min(),ir.empty(),0)}static newUnknownDocument(e,t){return new Vn(e,3,t,wt.min(),ir.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vh{constructor(e,t=null,r=[],a=[],c=null,h=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=c,this.startAt=h,this.endAt=y,this.ut=null}}function BA(n,e=null,t=[],r=[],a=null,c=null,h=null){return new vh(n,e,t,r,a,c,h)}function _u(n){const e=Ke(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(a=r).field.canonicalString()+a.op.toString()+mh(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(a=r).field.canonicalString()+a.dir;var a}).join(","),Bp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>mh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>mh(r)).join(",")),e.ut=t}return e.ut}function Eh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!XI(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(r=e.filters[a]).op||!t.field.isEqual(r.field)||!Ea(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!PE(n.startAt,e.startAt)&&PE(n.endAt,e.endAt)}function Gp(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function NE(n,e){return n.filters.filter(t=>t instanceof pi&&t.field.isEqual(e))}function mt(n,e,t){let r=ty,a=!0;for(const c of NE(n,e)){let h=ty,y=!0;switch(c.op){case"<":case"<=":h=ZI(c.value);break;case"==":case"in":case">=":h=c.value;break;case">":h=c.value,y=!1;break;case"!=":case"not-in":h=ty}ry({value:r,inclusive:a},{value:h,inclusive:y})<0&&(r=h,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const h=t.position[c];ry({value:r,inclusive:a},{value:h,inclusive:t.inclusive})<0&&(r=h,a=t.inclusive);break}return{value:r,inclusive:a}}function QI(n,e,t){let r=Tc,a=!0;for(const c of NE(n,e)){let h=Tc,y=!0;switch(c.op){case">=":case">":h=KI(c.value),y=!1;break;case"==":case"in":case"<=":h=c.value;break;case"<":h=c.value,y=!1;break;case"!=":case"not-in":h=Tc}ME({value:r,inclusive:a},{value:h,inclusive:y})>0&&(r=h,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const h=t.position[c];ME({value:r,inclusive:a},{value:h,inclusive:t.inclusive})>0&&(r=h,a=t.inclusive);break}return{value:r,inclusive:a}}class pi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new jA(e,t,r):"array-contains"===t?new sy(e,r):"in"===t?new hr(e,r):"not-in"===t?new tM(e,r):"array-contains-any"===t?new JI(e,r):new pi(e,t,r)}static ct(e,t,r){return"in"===t?new iy(e,r):new $A(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Ac(t,this.value)):null!==t&&Bl(this.value)===Bl(t)&&this.at(Ac(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Je()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class jA extends pi{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.at(t)}}class iy extends pi{constructor(e,t){super(e,"in",t),this.keys=qp(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $A extends pi{constructor(e,t){super(e,"not-in",t),this.keys=qp(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function qp(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class sy extends pi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yh(t)&&$p(t.arrayValue,this.value)}}class hr extends pi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&$p(this.value.arrayValue,t)}}class tM extends pi{constructor(e,t){super(e,"not-in",t)}matches(e){if($p(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!$p(this.value.arrayValue,t)}}class JI extends pi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$p(this.value.arrayValue,r))}}class wa{constructor(e,t){this.position=e,this.inclusive=t}}class wh{constructor(e,t="asc"){this.field=e,this.dir=t}}function XI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function OE(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const c=e[a],h=n.position[a];if(r=c.field.isKeyField()?qe.comparator(qe.fromName(h.referenceValue),t.key):Ac(h,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function PE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ea(n.position[t],e.position[t]))return!1;return!0}class ba{constructor(e,t=null,r=[],a=[],c=null,h="F",y=null,b=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=c,this.limitType=h,this.startAt=y,this.endAt=b,this.lt=null,this.ft=null}}function eC(n,e,t,r,a,c,h,y){return new ba(n,e,t,r,a,c,h,y)}function bh(n){return new ba(n)}function $l(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function kE(n){for(const e of n.filters)if(e.ht())return e.field;return null}function FE(n){return null!==n.collectionGroup}function Ih(n){const e=Ke(n);if(null===e.lt){e.lt=[];const t=kE(e),r=$l(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new wh(t)),e.lt.push(new wh(lr.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e.lt.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new wh(lr.keyField(),c))}}}return e.lt}function Ki(n){const e=Ke(n);if(!e.ft)if("F"===e.limitType)e.ft=BA(e.path,e.collectionGroup,Ih(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of Ih(e))t.push(new wh(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new wa(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new wa(e.startAt.position,e.startAt.inclusive):null;e.ft=BA(e.path,e.collectionGroup,t,e.filters,e.limit,r,a)}return e.ft}function LE(n,e,t){return new ba(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ch(n,e){return Eh(Ki(n),Ki(e))&&n.limitType===e.limitType}function VE(n){return`${_u(Ki(n))}|lt:${n.limitType}`}function UE(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${mh(r.value)}`;var r}).join(", ")}]`),Bp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>mh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>mh(t)).join(",")),`Target(${e})`}(Ki(n))}; limitType=${n.limitType})`}function Hl(n,e){return e.isFoundDocument()&&function(t,r){const a=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):qe.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,r){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===r.data.field(a.field))return!1;return!0}(n,e)&&function(t,r){for(const a of t.filters)if(!a.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(a,c,h){const y=OE(a,c,h);return a.inclusive?y<=0:y<0}(t.startAt,Ih(t),r)||t.endAt&&!function(a,c,h){const y=OE(a,c,h);return a.inclusive?y>=0:y>0}(t.endAt,Ih(t),r)));var t,r}function Dh(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function tC(n){return(e,t)=>{let r=!1;for(const a of Ih(n)){const c=GA(a,e,t);if(0!==c)return c;r=r||a.field.isKeyField()}return 0}}function GA(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(a,c,h){const y=c.data.field(a),b=h.data.field(a);return null!==y&&null!==b?Ac(y,b):Je()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Je()}}function nC(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jp(e)?"-0":e}}function BE(n){return{integerValue:""+n}}function jE(n,e){return WI(e)?BE(e):nC(n,e)}class Wp{constructor(){this._=void 0}}function qA(n,e,t){return n instanceof Th?function(r,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof Ah?WA(n,e):n instanceof Sh?zA(n,e):function(r,a){const c=iC(r,a),h=zp(c)+zp(r._t);return ny(c)&&ny(r._t)?BE(h):nC(r.wt,h)}(n,e)}function rC(n,e,t){return n instanceof Ah?WA(n,e):n instanceof Sh?zA(n,e):t}function iC(n,e){return n instanceof Gl?ny(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Th extends Wp{}class Ah extends Wp{constructor(e){super(),this.elements=e}}function WA(n,e){const t=sC(e);for(const r of n.elements)t.some(a=>Ea(a,r))||t.push(r);return{arrayValue:{values:t}}}class Sh extends Wp{constructor(e){super(),this.elements=e}}function zA(n,e){let t=sC(e);for(const r of n.elements)t=t.filter(a=>!Ea(a,r));return{arrayValue:{values:t}}}class Gl extends Wp{constructor(e,t){super(),this.wt=e,this._t=t}}function zp(n){return rr(n.integerValue||n.doubleValue)}function sC(n){return yh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Zp{constructor(e,t){this.field=e,this.transform=t}}class Kp{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ay{}function aC(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Rh(n.key,sr.none()):new $o(n.key,n.data,sr.none());{const t=n.data,r=ir.empty();let a=new En(lr.comparator);for(let c of e.fields)if(!a.has(c)){let h=t.field(c);null===h&&c.length>1&&(c=c.popLast(),h=t.field(c)),null===h?r.delete(c):r.set(c,h),a=a.add(c)}return new vu(n.key,r,new gs(a.toArray()),sr.none())}}function ZA(n,e,t){n instanceof $o?function(r,a,c){const h=r.value.clone(),y=cC(r.fieldTransforms,a,c.transformResults);h.setAll(y),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof vu?function(r,a,c){if(!oy(r.precondition,a))return void a.convertToUnknownDocument(c.version);const h=cC(r.fieldTransforms,a,c.transformResults),y=a.data;y.setAll($E(r)),y.setAll(h),a.convertToFoundDocument(c.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xh(n,e,t,r){return n instanceof $o?function(a,c,h,y){if(!oy(a.precondition,c))return h;const b=a.value.clone(),D=HE(a.fieldTransforms,y,c);return b.setAll(D),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),null}(n,e,t,r):n instanceof vu?function(a,c,h,y){if(!oy(a.precondition,c))return h;const b=HE(a.fieldTransforms,y,c),D=c.data;return D.setAll($E(a)),D.setAll(b),c.convertToFoundDocument(c.version,D).setHasLocalMutations(),null===h?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(x=>x.field))}(n,e,t,r):(h=t,oy(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h);var c,h}function KA(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),c=iC(r.transform,a||null);null!=c&&(null===t&&(t=ir.empty()),t.set(r.field,c))}return t||null}function uC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&gh(t,r,(a,c)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ah&&r instanceof Ah||t instanceof Sh&&r instanceof Sh?gh(t.elements,r.elements,Ea):t instanceof Gl&&r instanceof Gl?Ea(t._t,r._t):t instanceof Th&&r instanceof Th);var t,r}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class $o extends ay{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class vu extends ay{constructor(e,t,r,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function $E(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function cC(n,e,t){const r=new Map;It(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],h=c.transform,y=e.data.field(c.field);r.set(c.field,rC(h,y,t[a]))}return r}function HE(n,e,t){const r=new Map;for(const a of n){const c=a.transform,h=t.data.field(a.field);r.set(a.field,qA(c,h,e))}return r}class Rh extends ay{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uy extends ay{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class YA{constructor(e){this.count=e}}var fr,on;function GE(n){switch(n){default:return Je();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function qE(n){if(void 0===n)return Rr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case fr.OK:return fe.OK;case fr.CANCELLED:return fe.CANCELLED;case fr.UNKNOWN:return fe.UNKNOWN;case fr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case fr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case fr.INTERNAL:return fe.INTERNAL;case fr.UNAVAILABLE:return fe.UNAVAILABLE;case fr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case fr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case fr.NOT_FOUND:return fe.NOT_FOUND;case fr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case fr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case fr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case fr.ABORTED:return fe.ABORTED;case fr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case fr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case fr.DATA_LOSS:return fe.DATA_LOSS;default:return Je()}}(on=fr||(fr={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS";class Sc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[a,c]of r)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return 1===r.length?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Cc(this.inner,(t,r)=>{for(const[a,c]of r)e(a,c)})}isEmpty(){return Lp(this.inner)}size(){return this.innerSize}}const QA=new dr(qe.comparator);function ms(){return QA}const cy=new dr(qe.comparator);function Yp(...n){let e=cy;for(const t of n)e=e.insert(t.key,t);return e}function WE(n){let e=cy;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ia(){return Qp()}function lC(){return Qp()}function Qp(){return new Sc(n=>n.toString(),(n,e)=>n.isEqual(e))}const JA=new dr(qe.comparator),XA=new En(qe.comparator);function Ut(...n){let e=XA;for(const t of n)e=e.add(t);return e}const eS=new En(Ot);function ly(){return eS}class Mh{constructor(e,t,r,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Nh.createSynthesizedTargetChangeForCurrentChange(e,t)),new Mh(wt.min(),r,ly(),ms(),Ut())}}class Nh{constructor(e,t,r,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Nh(Or.EMPTY_BYTE_STRING,t,Ut(),Ut(),Ut())}}class dy{constructor(e,t,r,a){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=a}}class dC{constructor(e,t){this.targetId=e,this.It=t}}class zE{constructor(e,t,r=Or.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class hC{constructor(){this.Tt=0,this.Et=hy(),this.At=Or.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Ut(),t=Ut(),r=Ut();return this.Et.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Je()}}),new Nh(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=hy()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class tS{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=ms(),this.Bt=fC(),this.Lt=new En(Ot)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:Je()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,a)=>{this.jt(a)&&t(a)})}zt(e){const t=e.targetId,r=e.It.count,a=this.Ht(t);if(a){const c=a.target;if(Gp(c))if(0===r){const h=new qe(c.path);this.Kt(t,h,Vn.newNoDocument(h,wt.min()))}else It(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((c,h)=>{const y=this.Ht(h);if(y){if(c.current&&Gp(y.target)){const b=new qe(y.target.path);null!==this.$t.get(b)||this.Xt(h,b)||this.Kt(h,b,Vn.newNoDocument(b,e))}c.vt&&(t.set(h,c.St()),c.Dt())}});let r=Ut();this.Bt.forEach((c,h)=>{let y=!0;h.forEachWhile(b=>{const D=this.Ht(b);return!D||2===D.purpose||(y=!1,!1)}),y&&(r=r.add(c))}),this.$t.forEach((c,h)=>h.setReadTime(e));const a=new Mh(e,t,this.Lt,this.$t,r);return this.$t=ms(),this.Bt=fC(),this.Lt=new En(Ot),a}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const a=this.Qt(e);this.Xt(e,t)?a.Ct(t,1):a.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new hC,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new En(Ot),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new hC),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function fC(){return new dr(qe.comparator)}function hy(){return new dr(qe.comparator)}const ZE={asc:"ASCENDING",desc:"DESCENDING"},pC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class KE{constructor(e,t){this.databaseId=e,this.dt=t}}function Jp(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gC(n,e){return n.dt?e.toBase64():e.toUint8Array()}function YE(n,e){return Jp(n,e.toTimestamp())}function ti(n){return It(!!n),wt.fromTimestamp(function(e){const t=mu(e);return new $n(t.seconds,t.nanos)}(n))}function fy(n,e){return(t=n,new nn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function mC(n){const e=nn.fromString(n);return It(ew(e)),e}function Oh(n,e){return fy(n.databaseId,e.path)}function Ho(n,e){const t=mC(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(ql(t))}function py(n,e){return fy(n.databaseId,e)}function nS(n){const e=mC(n);return 4===e.length?nn.emptyPath():ql(e)}function Xp(n){return new nn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ql(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function rS(n,e,t){return{name:Oh(n,e),fields:t.value.mapValue.fields}}function gy(n,e,t){const r=Ho(n,e.name),a=ti(e.updateTime),c=new ir({mapValue:{fields:e.fields}}),h=Vn.newFoundDocument(r,a,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Ca(n,e){let t;if(e instanceof $o)t={update:rS(n,e.key,e.value)};else if(e instanceof Rh)t={delete:Oh(n,e.key)};else if(e instanceof vu)t={update:rS(n,e.key,e.data),updateMask:XE(e.fieldMask)};else{if(!(e instanceof uy))return Je();t={verify:Oh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const h=c.transform;if(h instanceof Th)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Ah)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Sh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Gl)return{fieldPath:c.field.canonicalString(),increment:h._t};throw Je()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:YE(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Je()),t;var a}function QE(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?sr.updateTime(ti(a.updateTime)):void 0!==a.exists?sr.exists(a.exists):sr.none():sr.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,h){let y=null;"setToServerValue"in h?(It("REQUEST_TIME"===h.setToServerValue),y=new Th):"appendMissingElements"in h?y=new Ah(h.appendMissingElements.values||[]):"removeAllFromArray"in h?y=new Sh(h.removeAllFromArray.values||[]):"increment"in h?y=new Gl(c,h.increment):Je();const b=lr.fromServerFormat(h.fieldPath);return new Zp(b,y)}(n,a)):[];var a;if(e.update){const a=Ho(n,e.update.name),c=new ir({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new gs((e.updateMask.fieldPaths||[]).map(D=>lr.fromServerFormat(D)));return new vu(a,c,h,t,r)}return new $o(a,c,t,r)}if(e.delete){const a=Ho(n,e.delete);return new Rh(a,t)}if(e.verify){const a=Ho(n,e.verify);return new uy(a,t)}return Je()}function yC(n,e){return{documents:[py(n,e.path)]}}function Go(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=py(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=py(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const a=function(b){if(0===b.length)return;const D=b.map(x=>function(P){if("=="===P.op){if(xE(P.value))return{unaryFilter:{field:tg(P.field),op:"IS_NAN"}};if(SE(P.value))return{unaryFilter:{field:tg(P.field),op:"IS_NULL"}}}else if("!="===P.op){if(xE(P.value))return{unaryFilter:{field:tg(P.field),op:"IS_NOT_NAN"}};if(SE(P.value))return{unaryFilter:{field:tg(P.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tg(P.field),op:oS(P.op),value:P.value}}}(x));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);a&&(t.structuredQuery.where=a);const c=function(b){if(0!==b.length)return b.map(D=>{return{field:tg((x=D).field),direction:sS(x.dir)};var x})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=(D=e.limit,n.dt||Bp(D)?D:{value:D});var D,y,b;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt={before:!(b=e.endAt).inclusive,values:b.position}),t}function JE(n){let e=nS(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){It(1===r);const x=t.from[0];x.allDescendants?a=x.collectionId:e=e.child(x.collectionId)}let c=[];t.where&&(c=eg(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(x=>{return new wh(Ph((P=x).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction));var P}));let y=null;t.limit&&(y=function(x){let P;return P="object"==typeof x?x.value:x,Bp(P)?null:P}(t.limit));let b=null;var x;t.startAt&&(b=new wa((x=t.startAt).values||[],!!x.before));let D=null;return t.endAt&&(D=function(x){return new wa(x.values||[],!x.before)}(t.endAt)),eC(e,a,h,c,y,"F",b,D)}function eg(n){return n?void 0!==n.unaryFilter?[uS(n)]:void 0!==n.fieldFilter?[aS(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>eg(e)).reduce((e,t)=>e.concat(t)):Je():[]}function sS(n){return ZE[n]}function oS(n){return pC[n]}function tg(n){return{fieldPath:n.canonicalString()}}function Ph(n){return lr.fromServerFormat(n.fieldPath)}function aS(n){return pi.create(Ph(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Je()}}(n.fieldFilter.op),n.fieldFilter.value)}function uS(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ph(n.unaryFilter.field);return pi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ph(n.unaryFilter.field);return pi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ph(n.unaryFilter.field);return pi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ph(n.unaryFilter.field);return pi.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Je()}}function XE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ew(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function gi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vC(e)),e=_C(n.get(t),e);return vC(e)}function _C(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const c=n.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function vC(n){return n+"\x01\x01"}function Eu(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),nn.emptyPath();const t=e-2,r=[];let a="";for(let c=0;c<e;){const h=n.indexOf("\x01",c);switch((h<0||h>t)&&Je(),n.charAt(h+1)){case"\x01":const y=n.substring(c,h);let b;0===a.length?b=y:(a+=y,b=a,a=""),r.push(b);break;case"\x10":a+=n.substring(c,h),a+="\0";break;case"\x11":a+=n.substring(c,h+1);break;default:Je()}c=h+2}return new nn(r)}const EC=["userId","batchId"];function yy(n,e){return[n,gi(e)]}function wC(n,e,t){return[n,gi(e),t]}const bC={},IC=["prefixPath","collectionGroup","readTime","documentId"],CC=["prefixPath","collectionGroup","documentId"],cS=["collectionGroup","readTime","prefixPath","documentId"],lS=["canonicalId","targetId"],DC=["targetId","path"],_y=["path","targetId"],dS=["collectionId","parent"],TC=["indexId","uid"],vy=["uid","sequenceNumber"],Ey=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ng=["indexId","uid","orderedDocumentKey"],hS=["userId","collectionPath","documentId"],fS=["userId","collectionPath","largestBatchId"],iM=["userId","collectionGroup","largestBatchId"],AC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pS=[...AC,"documentOverlays"],SC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xC=SC,gS=[...xC,"indexConfiguration","indexState","indexEntries"];class tw extends BI{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function ni(n,e){const t=Ke(n);return ho.N(t.ee,e)}class nw{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&ZA(c,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=xh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=xh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=lC();return this.mutations.forEach(a=>{const c=e.get(a.key),h=c.overlayedDocument;let y=this.applyToLocalView(h,c.mutatedFields);y=t.has(a.key)?null:y;const b=aC(h,y);null!==b&&r.set(a.key,b),h.isValidDocument()||h.convertToNoDocument(wt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ut())}isEqual(e){return this.batchId===e.batchId&&gh(this.mutations,e.mutations,(t,r)=>uC(t,r))&&gh(this.baseMutations,e.baseMutations,(t,r)=>uC(t,r))}}class rw{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){It(e.mutations.length===r.length);let a=JA;const c=e.mutations;for(let h=0;h<c.length;h++)a=a.insert(c[h].key,r[h].version);return new rw(e,t,r,a)}}class RC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xc{constructor(e,t,r,a,c=wt.min(),h=wt.min(),y=Or.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=y}withSequenceNumber(e){return new xc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new xc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new xc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class kh{constructor(e){this.ne=e}}function MC(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:wy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Oh(a=n.ne,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:Jp(a,c.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Da(e.version)};else{if(!e.isUnknownDocument())return Je();r.unknownDocument={path:t.path.toArray(),version:Da(e.version)}}var a,c;return r}function wy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Da(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ps(n){const e=new $n(n.seconds,n.nanoseconds);return wt.fromTimestamp(e)}function Rc(n,e){const t=(e.baseMutations||[]).map(c=>QE(n.ne,c));for(let c=0;c<e.mutations.length-1;++c){const h=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(h.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>QE(n.ne,c)),a=$n.fromMillis(e.localWriteTimeMs);return new nw(e.batchId,a,t,r)}function rg(n){const e=Ps(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ps(n.lastLimboFreeSnapshotVersion):wt.min();let r;var a;return void 0!==n.query.documents?(It(1===(a=n.query).documents.length),r=Ki(bh(nS(a.documents[0])))):r=Ki(JE(n.query)),new xc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Or.fromBase64String(n.resumeToken))}function yS(n,e){const t=Da(e.snapshotVersion),r=Da(e.lastLimboFreeSnapshotVersion);let a;a=Gp(e.target)?yC(n.ne,e.target):Go(n.ne,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_u(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function iw(n){const e=JE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?LE(e,e.limit,"L"):e}function Fh(n,e){return new RC(e.largestBatchId,QE(n.ne,e.overlayMutation))}function NC(n,e){const t=e.path.lastSegment();return[n,gi(e.path.popLast()),t]}function OC(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Da(r.readTime),documentKey:gi(r.documentKey.path),largestBatchId:r.largestBatchId}}class PC{getBundleMetadata(e,t){return sw(e).get(t).next(r=>{if(r)return{id:(a=r).bundleId,createTime:Ps(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return sw(e).put({bundleId:(r=t).id,createTime:Da(ti(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return by(e).get(t).next(r=>{if(r)return{name:(a=r).name,query:iw(a.bundledQuery),readTime:Ps(a.readTime)};var a})}saveNamedQuery(e,t){return by(e).put({name:(r=t).name,readTime:Da(ti(r.readTime)),bundledQuery:r.bundledQuery});var r}}function sw(n){return ni(n,"bundles")}function by(n){return ni(n,"namedQueries")}class ig{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new ig(e,t.uid||"")}getOverlay(e,t){return Lh(e).get(NC(this.userId,t)).next(r=>r?Fh(this.wt,r):null)}getOverlays(e,t){const r=Ia();return ae.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&r.set(a,c)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((c,h)=>{const y=new RC(t,h);a.push(this.ie(e,y))}),ae.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(h=>a.add(gi(h.getCollectionPath())));const c=[];return a.forEach(h=>{const y=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);c.push(Lh(e).W("collectionPathOverlayIndex",y))}),ae.waitFor(c)}getOverlaysForCollection(e,t,r){const a=Ia(),c=gi(t),h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Lh(e).K("collectionPathOverlayIndex",h).next(y=>{for(const b of y){const D=Fh(this.wt,b);a.set(D.getKey(),D)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const c=Ia();let h;const y=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Lh(e).J({index:"collectionGroupOverlayIndex",range:y},(b,D,x)=>{const P=Fh(this.wt,D);c.size()<a||P.largestBatchId===h?(c.set(P.getKey(),P),h=P.largestBatchId):x.done()}).next(()=>c)}ie(e,t){return Lh(e).put(function(r,a,c){const[h,y,b]=NC(a,c.mutation.key);return{userId:a,collectionPath:y,documentId:b,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Ca(r.ne,c.mutation)}}(this.wt,this.userId,t))}}function Lh(n){return ni(n,"documentOverlays")}class Wl{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(rr(e.integerValue));else if("doubleValue"in e){const r=rr(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),jp(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Dc(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?RE(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Je()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const a of Object.keys(r))this.le(a,t),this.oe(r[a],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const a of r)this.oe(a,t)}_e(e,t){this.ce(t,37),qe.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function _S(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function ow(n){const e=64-function(t){let r=0;for(let a=0;a<8;++a){const c=_S(255&t[a]);if(r+=c,8!==c)break}return r}(n);return Math.ceil(e/8)}Wl.ye=new Wl;class vS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const a=t.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const a=t.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}this.Re()}ve(e){const t=this.Ve(e),r=ow(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}De(e){const t=this.Ve(e),r=ow(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class kC{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class Iy{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Mc{constructor(){this.Me=new vS,this.Fe=new kC(this.Me),this.$e=new Iy(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Vh{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Vh(this.indexId,this.documentKey,this.arrayValue,r)}}function qo(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=hn(n.arrayValue,e.arrayValue),0!==t?t:(t=hn(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function hn(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Nc{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=IE(e);if(void 0!==t&&!this.Qe(t))return!1;const r=Fl(e);let a=0,c=0;for(;a<r.length&&this.Qe(r[a]);++a);if(a===r.length)return!0;if(void 0!==this.Ke){const h=r[a];if(!this.je(this.Ke,h)||!this.We(this.Ue[c++],h))return!1;++a}for(;a<r.length;++a){const h=r[a];if(c>=this.Ue.length||!this.We(this.Ue[c++],h))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Uh{constructor(){this.ze=new zl}addToCollectionParentIndex(e,t){return this.ze.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(hs.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(hs.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class zl{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new En(nn.comparator),c=!a.has(r);return this.index[t]=a.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new En(nn.comparator)).toArray()}}const aw=new Uint8Array(0);class St{constructor(e,t){this.user=e,this.databaseId=t,this.He=new zl,this.Je=new Sc(r=>_u(r),(r,a)=>Eh(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const c={collectionId:r,parent:gi(a)};return ks(e).put(c)}return ae.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[Nr(t),""],!1,!0);return ks(e).K(a).next(c=>{for(const h of c){if(h.collectionId!==t)break;r.push(Eu(h.parent))}return r})}addFieldIndex(e,t){const r=Ta(e),a={indexId:(h=t).indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var h;delete a.indexId;const c=r.add(a);if(t.indexState){const h=Cy(e);return c.next(y=>{h.put(OC(y,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const r=Ta(e),a=Cy(e),c=Zl(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Zl(e);let a=!0;const c=new Map;return ae.forEach(this.Ye(t),h=>this.Xe(e,h).next(y=>{a&&(a=!!y),c.set(h,y)})).next(()=>{if(a){let h=Ut();const y=[];return ae.forEach(c,(b,D)=>{var x;ke("IndexedDbIndexManager",`Using index ${x=b,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(Lt=>`${Lt.fieldPath}:${Lt.kind}`).join(",")}`} to execute ${_u(t)}`);const P=function(Lt,Rt){const en=IE(Rt);if(void 0===en)return null;for(const In of NE(Lt,en.fieldPath))switch(In.op){case"array-contains-any":return In.value.arrayValue.values||[];case"array-contains":return[In.value]}return null}(D,b),z=function(Lt,Rt){const en=new Map;for(const In of Fl(Rt))for(const vs of NE(Lt,In.fieldPath))switch(vs.op){case"==":case"in":en.set(In.fieldPath.canonicalString(),vs.value);break;case"not-in":case"!=":return en.set(In.fieldPath.canonicalString(),vs.value),Array.from(en.values())}return null}(D,b),ee=function(Lt,Rt){const en=[];let In=!0;for(const vs of Fl(Rt)){const Q0=0===vs.kind?mt(Lt,vs.fieldPath,Lt.startAt):QI(Lt,vs.fieldPath,Lt.startAt);en.push(Q0.value),In&&(In=Q0.inclusive)}return new wa(en,In)}(D,b),ye=function(Lt,Rt){const en=[];let In=!0;for(const vs of Fl(Rt)){const Q0=0===vs.kind?QI(Lt,vs.fieldPath,Lt.endAt):mt(Lt,vs.fieldPath,Lt.endAt);en.push(Q0.value),In&&(In=Q0.inclusive)}return new wa(en,In)}(D,b),Le=this.Ze(b,D,ee),$e=this.Ze(b,D,ye),xt=this.tn(b,D,z),kt=this.en(b.indexId,P,Le,ee.inclusive,$e,ye.inclusive,xt);return ae.forEach(kt,Lt=>r.j(Lt,t.limit).next(Rt=>{Rt.forEach(en=>{const In=qe.fromSegments(en.documentKey);h.has(In)||(h=h.add(In),y.push(In))})}))}).next(()=>y)}return ae.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,a,c,h,y){const b=(null!=t?t.length:1)*Math.max(r.length,c.length),D=b/(null!=t?t.length:1),x=[];for(let P=0;P<b;++P){const z=t?this.nn(t[P/D]):aw,ee=this.sn(e,z,r[P%D],a),ye=this.rn(e,z,c[P%D],h),Le=y.map($e=>this.sn(e,z,$e,!0));x.push(...this.createRange(ee,ye,Le))}return x}sn(e,t,r,a){const c=new Vh(e,qe.empty(),t,r);return a?c:c.Le()}rn(e,t,r,a){const c=new Vh(e,qe.empty(),t,r);return a?c.Le():c}Xe(e,t){const r=new Nc(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let h=null;for(const y of c)r.Ge(y)&&(!h||y.fields.length>h.fields.length)&&(h=y);return h})}getIndexType(e,t){let r=2;return ae.forEach(this.Ye(t),a=>this.Xe(e,a).next(c=>{c?0!==r&&c.fields.length<function(h){let y=new En(lr.comparator),b=!1;for(const D of h.filters){const x=D;x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?b=!0:y=y.add(x.field))}for(const D of h.orderBy)D.field.isKeyField()||(y=y.add(D.field));return y.size+(b?1:0)}(a)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new Mc;for(const a of Fl(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const h=r.Be(a.kind);Wl.ye.re(c,h)}return r.Oe()}nn(e){const t=new Mc;return Wl.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new Mc;return Wl.ye.re(jl(this.databaseId,t),r.Be(function(a){const c=Fl(a);return 0===c.length?0:c[c.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let a=[];a.push(new Mc);let c=0;for(const h of Fl(e)){const y=r[c++];for(const b of a)if(this.cn(t,h.fieldPath)&&yh(y))a=this.an(a,h,y);else{const D=b.Be(h.kind);Wl.ye.re(y,D)}}return this.hn(a)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const a=[...e],c=[];for(const h of r.arrayValue.values||[])for(const y of a){const b=new Mc;b.seed(y.Oe()),Wl.ye.re(h,b.Be(t.kind)),c.push(b)}return c}cn(e,t){return!!e.filters.find(r=>r instanceof pi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Ta(e),a=Cy(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(c=>{const h=[];return ae.forEach(c,y=>a.get([y.indexId,this.uid]).next(b=>{h.push(function(D,x){const P=x?new Pp(x.sequenceNumber,new hs(Ps(x.readTime),new qe(Eu(x.documentKey)),x.largestBatchId)):Pp.empty(),z=D.fields.map(([ee,ye])=>new Op(lr.fromServerFormat(ee),ye));return new gu(D.indexId,D.collectionGroup,z,P)}(y,b))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,a)=>{const c=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:Ot(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=Ta(e),c=Cy(e);return this.ln(e).next(h=>a.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(y=>ae.forEach(y,b=>c.put(OC(b.indexId,this.user,h,r)))))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,(a,c)=>{const h=r.get(a.collectionGroup);return(h?ae.resolve(h):this.getFieldIndexes(e,a.collectionGroup)).next(y=>(r.set(a.collectionGroup,y),ae.forEach(y,b=>this.fn(e,a,b).next(D=>{const x=this.dn(c,b);return D.isEqual(x)?ae.resolve():this._n(e,c,b,D,x)}))))})}wn(e,t,r,a){return Zl(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,a){return Zl(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const a=Zl(e);let c=new En(qo);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(h,y)=>{c=c.add(new Vh(r.indexId,t,y.arrayValue,y.directionalValue))}).next(()=>c)}dn(e,t){let r=new En(qo);const a=this.on(t,e);if(null==a)return r;const c=IE(t);if(null!=c){const h=e.data.field(c.fieldPath);if(yh(h))for(const y of h.arrayValue.values||[])r=r.add(new Vh(t.indexId,e.key,this.nn(y),a))}else r=r.add(new Vh(t.indexId,e.key,aw,a));return r}_n(e,t,r,a,c){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(y,b,D,x,P){const z=y.getIterator(),ee=b.getIterator();let ye=Ul(z),Le=Ul(ee);for(;ye||Le;){let $e=!1,xt=!1;if(ye&&Le){const kt=D(ye,Le);kt<0?xt=!0:kt>0&&($e=!0)}else null!=ye?xt=!0:$e=!0;$e?(x(Le),Le=Ul(ee)):xt?(P(ye),ye=Ul(z)):(ye=Ul(z),Le=Ul(ee))}}(a,c,qo,y=>{h.push(this.wn(e,t,r,y))},y=>{h.push(this.mn(e,t,r,y))}),ae.waitFor(h)}ln(e){let t=1;return Cy(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,y)=>qo(h,y)).filter((h,y,b)=>!y||0!==qo(h,b[y-1]));const a=[];a.push(e);for(const h of r){const y=qo(h,e),b=qo(h,t);if(0===y)a[0]=e.Le();else if(y>0&&b<0)a.push(h),a.push(h.Le());else if(b>0)break}a.push(t);const c=[];for(let h=0;h<a.length;h+=2)c.push(IDBKeyRange.bound([a[h].indexId,this.uid,a[h].arrayValue,a[h].directionalValue,aw,[]],[a[h+1].indexId,this.uid,a[h+1].arrayValue,a[h+1].directionalValue,aw,[]]));return c}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(uw)}getMinOffset(e,t){return ae.mapArray(this.Ye(t),r=>this.Xe(e,r).next(a=>a||Je())).next(uw)}}function ks(n){return ni(n,"collectionParents")}function Zl(n){return ni(n,"indexEntries")}function Ta(n){return ni(n,"indexConfiguration")}function Cy(n){return ni(n,"indexState")}function uw(n){It(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;kp(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new hs(e.readTime,e.documentKey,t)}const cw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Fs(e,Fs.DEFAULT_COLLECTION_PERCENTILE,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function FC(n,e,t){const r=n.store("mutations"),a=n.store("documentMutations"),c=[],h=IDBKeyRange.only(t.batchId);let y=0;const b=r.J({range:h},(x,P,z)=>(y++,z.delete()));c.push(b.next(()=>{It(1===y)}));const D=[];for(const x of t.mutations){const P=wC(e,x.key.path,t.batchId);c.push(a.delete(P)),D.push(x.key)}return ae.waitFor(c).next(()=>D)}function Dy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Je();e=n.noDocument}return JSON.stringify(e).length}Fs.DEFAULT_COLLECTION_PERCENTILE=10,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fs.DEFAULT=new Fs(41943040,Fs.DEFAULT_COLLECTION_PERCENTILE,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fs.DISABLED=new Fs(-1,0,0);class Yi{constructor(e,t,r,a){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=a,this.gn={}}static se(e,t,r,a){It(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Yi(c,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ri(e).J({index:"userMutationsIndex",range:r},(a,c,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const c=Kl(e),h=ri(e);return h.add({}).next(y=>{It("number"==typeof y);const b=new nw(y,t,r,a),D=function(z,ee,ye){const Le=ye.baseMutations.map(xt=>Ca(z.ne,xt)),$e=ye.mutations.map(xt=>Ca(z.ne,xt));return{userId:ee,batchId:ye.batchId,localWriteTimeMs:ye.localWriteTime.toMillis(),baseMutations:Le,mutations:$e}}(this.wt,this.userId,b),x=[];let P=new En((z,ee)=>Ot(z.canonicalString(),ee.canonicalString()));for(const z of a){const ee=wC(this.userId,z.key.path,y);P=P.add(z.key.path.popLast()),x.push(h.put(D)),x.push(c.put(ee,bC))}return P.forEach(z=>{x.push(this.indexManager.addToCollectionParentIndex(e,z))}),e.addOnCommittedListener(()=>{this.gn[y]=b.keys()}),ae.waitFor(x).next(()=>b)})}lookupMutationBatch(e,t){return ri(e).get(t).next(r=>r?(It(r.userId===this.userId),Rc(this.wt,r)):null)}yn(e,t){return this.gn[t]?ae.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.gn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return ri(e).J({index:"userMutationsIndex",range:a},(h,y,b)=>{y.userId===this.userId&&(It(y.batchId>=r),c=Rc(this.wt,y)),b.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ri(e).J({index:"userMutationsIndex",range:t,reverse:!0},(a,c,h)=>{r=c.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ri(e).K("userMutationsIndex",t).next(r=>r.map(a=>Rc(this.wt,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=yy(this.userId,t.path),a=IDBKeyRange.lowerBound(r),c=[];return Kl(e).J({range:a},(h,y,b)=>{const[D,x,P]=h,z=Eu(x);if(D===this.userId&&t.path.isEqual(z))return ri(e).get(P).next(ee=>{if(!ee)throw Je();It(ee.userId===this.userId),c.push(Rc(this.wt,ee))});b.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(Ot);const a=[];return t.forEach(c=>{const h=yy(this.userId,c.path),y=IDBKeyRange.lowerBound(h),b=Kl(e).J({range:y},(D,x,P)=>{const[z,ee,ye]=D,Le=Eu(ee);z===this.userId&&c.path.isEqual(Le)?r=r.add(ye):P.done()});a.push(b)}),ae.waitFor(a).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,c=yy(this.userId,r),h=IDBKeyRange.lowerBound(c);let y=new En(Ot);return Kl(e).J({range:h},(b,D,x)=>{const[P,z,ee]=b,ye=Eu(z);P===this.userId&&r.isPrefixOf(ye)?ye.length===a&&(y=y.add(ee)):x.done()}).next(()=>this.pn(e,y))}pn(e,t){const r=[],a=[];return t.forEach(c=>{a.push(ri(e).get(c).next(h=>{if(null===h)throw Je();It(h.userId===this.userId),r.push(Rc(this.wt,h))}))}),ae.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return FC(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),ae.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),a=[];return Kl(e).J({range:r},(c,h,y)=>{if(c[0]===this.userId){const b=Eu(c[1]);a.push(b)}else y.done()}).next(()=>{It(0===a.length)})})}containsKey(e,t){return Zn(e,this.userId,t)}Tn(e){return LC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Zn(n,e,t){const r=yy(e,t.path),a=r[1],c=IDBKeyRange.lowerBound(r);let h=!1;return Kl(n).J({range:c,H:!0},(y,b,D)=>{const[x,P,z]=y;x===e&&P===a&&(h=!0),D.done()}).next(()=>h)}function ri(n){return ni(n,"mutations")}function Kl(n){return ni(n,"documentMutations")}function LC(n){return ni(n,"mutationQueues")}class Oc{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Oc(0)}static Rn(){return new Oc(-1)}}class lw{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Oc(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>wt.fromTimestamp(new $n(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Pn(e,a)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Wo(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let a=0;const c=[];return Wo(e).J((h,y)=>{const b=rg(y);b.sequenceNumber<=t&&null===r.get(b.targetId)&&(a++,c.push(this.removeTargetData(e,b)))}).next(()=>ae.waitFor(c)).next(()=>a)}forEachTarget(e,t){return Wo(e).J((r,a)=>{const c=rg(a);t(c)})}bn(e){return Bh(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}Pn(e,t){return Bh(e).put("targetGlobalKey",t)}vn(e,t){return Wo(e).put(yS(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=_u(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return Wo(e).J({range:a,index:"queryTargetsIndex"},(h,y,b)=>{const D=rg(y);Eh(t,D.target)&&(c=D,b.done())}).next(()=>c)}addMatchingKeys(e,t,r){const a=[],c=Pc(e);return t.forEach(h=>{const y=gi(h.path);a.push(c.put({targetId:r,path:y})),a.push(this.referenceDelegate.addReference(e,r,h))}),ae.waitFor(a)}removeMatchingKeys(e,t,r){const a=Pc(e);return ae.forEach(t,c=>{const h=gi(c.path);return ae.waitFor([a.delete([r,h]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=Pc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Pc(e);let c=Ut();return a.J({range:r,H:!0},(h,y,b)=>{const D=Eu(h[1]),x=new qe(D);c=c.add(x)}).next(()=>c)}containsKey(e,t){const r=gi(t.path),a=IDBKeyRange.bound([r],[Nr(r)],!1,!0);let c=0;return Pc(e).J({index:"documentTargetsIndex",H:!0,range:a},([h,y],b,D)=>{0!==h&&(c++,D.done())}).next(()=>c>0)}te(e,t){return Wo(e).get(t).next(r=>r?rg(r):null)}}function Wo(n){return ni(n,"targets")}function Bh(n){return ni(n,"targetGlobal")}function Pc(n){return ni(n,"targetDocuments")}function kc([n,e],[t,r]){const a=Ot(n,t);return 0===a?Ot(e,r):a}class ES{constructor(e){this.Sn=e,this.buffer=new En(kc),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();kc(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ic(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield bc(r)}yield t.kn(3e5)}))}}class dw{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(ps.ot);const r=new ES(t);return this.On.forEachTarget(e,a=>r.xn(a.sequenceNumber)).next(()=>this.On.Fn(e,a=>r.xn(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(cw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cw):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,a,c,h,y,b,D;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(P=>(P>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),a=this.params.maximumSequenceNumbersToCollect):a=P,h=Date.now(),this.nthSequenceNumber(e,a))).next(P=>(r=P,y=Date.now(),this.removeTargets(e,r,t))).next(P=>(c=P,b=Date.now(),this.removeOrphanedDocuments(e,r))).next(P=>(D=Date.now(),Mp()<=dc.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-x}ms\n\tDetermined least recently used ${a} in `+(y-h)+`ms\n\tRemoved ${c} targets in `+(b-y)+`ms\n\tRemoved ${P} documents in `+(D-b)+`ms\nTotal Duration: ${D-x}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:P})))}}class sg{constructor(e,t){this.db=e,this.garbageCollector=new dw(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,a)=>t(a))}addReference(e,t,r){return jh(e,r)}removeReference(e,t,r){return jh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return jh(e,t)}Un(e,t){return function(r,a){let c=!1;return LC(r).Y(h=>Zn(r,h,a).next(y=>(y&&(c=!0),ae.resolve(!y)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Ln(e,(h,y)=>{if(y<=t){const b=this.Un(e,h).next(D=>{if(!D)return c++,r.getEntry(e,h).next(()=>(r.removeEntry(h,wt.min()),Pc(e).delete([0,gi(h.path)])))});a.push(b)}}).next(()=>ae.waitFor(a)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return jh(e,t)}Ln(e,t){const r=Pc(e);let a,c=ps.ot;return r.J({index:"documentTargetsIndex"},([h,y],{path:b,sequenceNumber:D})=>{0===h?(c!==ps.ot&&t(new qe(Eu(a)),c),c=D,a=b):c=ps.ot}).next(()=>{c!==ps.ot&&t(new qe(Eu(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jh(n,e){return Pc(n).put((r=n.currentSequenceNumber,{targetId:0,path:gi(e.path),sequenceNumber:r}));var r}class hw{constructor(){this.changes=new Sc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $h{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Fc(e).put(r)}removeEntry(e,t,r){return Fc(e).delete(function(a,c){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],wy(c),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=Vn.newInvalidDocument(t);return Fc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Hh(t))},(a,c)=>{r=this.Kn(t,c)}).next(()=>r)}Gn(e,t){let r={size:0,document:Vn.newInvalidDocument(t)};return Fc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Hh(t))},(a,c)=>{r={document:this.Kn(t,c),size:Dy(c)}}).next(()=>r)}getEntries(e,t){let r=ms();return this.Qn(e,t,(a,c)=>{const h=this.Kn(a,c);r=r.insert(a,h)}).next(()=>r)}jn(e,t){let r=ms(),a=new dr(qe.comparator);return this.Qn(e,t,(c,h)=>{const y=this.Kn(c,h);r=r.insert(c,y),a=a.insert(c,Dy(h))}).next(()=>({documents:r,Wn:a}))}Qn(e,t,r){if(t.isEmpty())return ae.resolve();let a=new En(BC);t.forEach(b=>a=a.add(b));const c=IDBKeyRange.bound(Hh(a.first()),Hh(a.last())),h=a.getIterator();let y=h.getNext();return Fc(e).J({index:"documentKeyIndex",range:c},(b,D,x)=>{const P=qe.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;y&&BC(y,P)<0;)r(y,null),y=h.getNext();y&&y.isEqual(P)&&(r(y,D),y=h.hasNext()?h.getNext():null),y?x.q(Hh(y)):x.done()}).next(()=>{for(;y;)r(y,null),y=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const a=[t.popLast().toArray(),t.lastSegment(),wy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fc(e).K(IDBKeyRange.bound(a,c,!0)).next(h=>{let y=ms();for(const b of h){const D=this.Kn(qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);y=y.insert(D.key,D)}return y})}getAllFromCollectionGroup(e,t,r,a){let c=ms();const h=og(t,r),y=og(t,hs.max());return Fc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,y,!0)},(b,D,x)=>{const P=this.Kn(qe.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);c=c.insert(P.key,P),c.size===a&&x.done()}).next(()=>c)}newChangeBuffer(e){return new Ty(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return fw(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}qn(e,t){return fw(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function(n,e){let t;if(e.document)t=gy(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),a=Ps(e.noDocument.readTime);t=Vn.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Je();{const r=qe.fromSegments(e.unknownDocument.path),a=Ps(e.unknownDocument.version);t=Vn.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(r){const a=new $n(r[0],r[1]);return wt.fromTimestamp(a)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(wt.min()))return r}return Vn.newInvalidDocument(e)}}function UC(n){return new $h(n)}class Ty extends hw{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Sc(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new En((c,h)=>Ot(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const y=this.Hn.get(c);if(t.push(this.zn.removeEntry(e,c,y.readTime)),h.isValidDocument()){const b=MC(this.zn.wt,h);a=a.add(c.path.popLast()),r+=Dy(b)-y.size,t.push(this.zn.addEntry(e,c,b))}else if(r-=y.size,this.trackRemovals){const b=MC(this.zn.wt,h.convertToNoDocument(wt.min()));t.push(this.zn.addEntry(e,c,b))}}),a.forEach(c=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.zn.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:a})=>(a.forEach((c,h)=>{this.Hn.set(c,{size:h,readTime:r.get(c).readTime})}),r))}}function fw(n){return ni(n,"remoteDocumentGlobal")}function Fc(n){return ni(n,"remoteDocumentsV14")}function Hh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function og(n,e){const t=e.documentKey.path.toArray();return[n,wy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function BC(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<r.length-2;++c)if(a=Ot(t[c],r[c]),a)return a;return a=Ot(t.length,r.length),a||(a=Ot(t[t.length-2],r[r.length-2]),a||Ot(t[t.length-1],r[r.length-1]))}class pw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ay{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.getBaseDocument(e,t,r))).next(a=>(null!==r&&xh(r.mutation,a,gs.empty(),$n.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ut()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ut()){const a=Ia();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(c=>{let h=Yp();return c.forEach((y,b)=>{h=h.insert(y,b.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const r=Ia();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ut()))}populateOverlays(e,t,r){const a=[];return r.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((h,y)=>{t.set(h,y)})})}computeViews(e,t,r,a){let c=ms();const h=Qp(),y=Qp();return t.forEach((b,D)=>{const x=r.get(D.key);a.has(D.key)&&(void 0===x||x.mutation instanceof vu)?c=c.insert(D.key,D):void 0!==x&&(h.set(D.key,x.mutation.getFieldMask()),xh(x.mutation,D,x.mutation.getFieldMask(),$n.now()))}),this.recalculateAndSaveOverlays(e,c).next(b=>(b.forEach((D,x)=>h.set(D,x)),t.forEach((D,x)=>{var P;return y.set(D,new pw(x,null!==(P=h.get(D))&&void 0!==P?P:null))}),y))}recalculateAndSaveOverlays(e,t){const r=Qp();let a=new dr((h,y)=>h-y),c=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const y of h)y.keys().forEach(b=>{const D=t.get(b);if(null===D)return;let x=r.get(b)||gs.empty();x=y.applyToLocalView(D,x),r.set(b,x);const P=(a.get(y.batchId)||Ut()).add(b);a=a.insert(y.batchId,P)})}).next(()=>{const h=[],y=a.getReverseIterator();for(;y.hasNext();){const b=y.getNext(),D=b.key,x=b.value,P=lC();x.forEach(z=>{if(!c.has(z)){const ee=aC(t.get(z),r.get(z));null!==ee&&P.set(z,ee),c=c.add(z)}}),h.push(this.documentOverlayCache.saveOverlays(e,D,P))}return ae.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):FE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var a}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(c=>{const h=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-c.size):ae.resolve(Ia());let y=-1,b=c;return h.next(D=>ae.forEach(D,(x,P)=>(y<P.largestBatchId&&(y=P.largestBatchId),c.get(x)?ae.resolve():this.getBaseDocument(e,x,P).next(z=>{b=b.insert(x,z)}))).next(()=>this.populateOverlays(e,D,c)).next(()=>this.computeViews(e,b,D,Ut())).next(x=>({batchId:y,changes:WE(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let a=Yp();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const a=t.collectionGroup;let c=Yp();return this.indexManager.getCollectionParents(e,a).next(h=>ae.forEach(h,y=>{const b=(D=t,x=y.child(a),new ba(x,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,x;return this.getDocumentsMatchingCollectionQuery(e,b,r).next(D=>{D.forEach((x,P)=>{c=c.insert(x,P)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r){let a;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(c=>(a=c,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(c=>{c.forEach((y,b)=>{const D=b.getKey();null===a.get(D)&&(a=a.insert(D,Vn.newInvalidDocument(D)))});let h=Yp();return a.forEach((y,b)=>{const D=c.get(y);void 0!==D&&xh(D.mutation,b,gs.empty(),$n.now()),Hl(t,b)&&(h=h.insert(y,b))}),h})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ae.resolve(Vn.newInvalidDocument(t))}}class sM{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return ae.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:ti(r.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:iw(r.bundledQuery),readTime:ti(r.readTime)}),ae.resolve();var r}}class oM{constructor(){this.overlays=new dr(qe.comparator),this.Xn=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ia();return ae.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&r.set(a,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,c)=>{this.ie(e,t,c)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Xn.get(r);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.Xn.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const a=Ia(),c=t.length+1,h=new qe(t.child("")),y=this.overlays.getIteratorFrom(h);for(;y.hasNext();){const b=y.getNext().value,D=b.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===c&&b.largestBatchId>r&&a.set(b.getKey(),b)}return ae.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let c=new dr((D,x)=>D-x);const h=this.overlays.getIterator();for(;h.hasNext();){const D=h.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let x=c.get(D.largestBatchId);null===x&&(x=Ia(),c=c.insert(D.largestBatchId,x)),x.set(D.getKey(),D)}}const y=Ia(),b=c.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach((D,x)=>y.set(D,x)),!(y.size()>=a)););return ae.resolve(y)}ie(e,t,r){const a=this.overlays.get(r.key);if(null!==a){const h=this.Xn.get(a.largestBatchId).delete(r.key);this.Xn.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new RC(t,r));let c=this.Xn.get(t);void 0===c&&(c=Ut(),this.Xn.set(t,c)),this.Xn.set(t,c.add(r.key))}}class Ct{constructor(){this.Zn=new En(mi.ts),this.es=new En(mi.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new mi(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new mi(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new qe(new nn([])),r=new mi(t,e),a=new mi(t,e+1),c=[];return this.es.forEachInRange([r,a],h=>{this.rs(h),c.push(h.key)}),c}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new qe(new nn([])),r=new mi(t,e),a=new mi(t,e+1);let c=Ut();return this.es.forEachInRange([r,a],h=>{c=c.add(h.key)}),c}containsKey(e){const t=new mi(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class mi{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return qe.comparator(e.key,t.key)||Ot(e.ls,t.ls)}static ns(e,t){return Ot(e.ls,t.ls)||qe.comparator(e.key,t.key)}}class ag{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new En(mi.ts)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,a){const c=this.fs;this.fs++;const h=new nw(c,t,r,a);this.mutationQueue.push(h);for(const y of a)this.ds=this.ds.add(new mi(y.key,c)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return ae.resolve(h)}lookupMutationBatch(e,t){return ae.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ws(t+1),c=a<0?0:a;return ae.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new mi(t,0),a=new mi(t,Number.POSITIVE_INFINITY),c=[];return this.ds.forEachInRange([r,a],h=>{const y=this._s(h.ls);c.push(y)}),ae.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(Ot);return t.forEach(a=>{const c=new mi(a,0),h=new mi(a,Number.POSITIVE_INFINITY);this.ds.forEachInRange([c,h],y=>{r=r.add(y.ls)})}),ae.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let c=r;qe.isDocumentKey(c)||(c=c.child(""));const h=new mi(new qe(c),0);let y=new En(Ot);return this.ds.forEachWhile(b=>{const D=b.key.path;return!!r.isPrefixOf(D)&&(D.length===a&&(y=y.add(b.ls)),!0)},h),ae.resolve(this.gs(y))}gs(e){const t=[];return e.forEach(r=>{const a=this._s(r);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){It(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return ae.forEach(t.mutations,a=>{const c=new mi(a.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new mi(t,0),a=this.ds.firstAfterOrEqual(r);return ae.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return ae.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wS{constructor(e){this.ps=e,this.docs=new dr(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),c=a?a.size:0,h=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():Vn.newInvalidDocument(t))}getEntries(e,t){let r=ms();return t.forEach(a=>{const c=this.docs.get(a);r=r.insert(a,c?c.document.mutableCopy():Vn.newInvalidDocument(a))}),ae.resolve(r)}getAllFromCollection(e,t,r){let a=ms();const c=new qe(t.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:y,value:{document:b}}=h.getNext();if(!t.isPrefixOf(y.path))break;y.path.length>t.length+1||kp(FA(b),r)<=0||(a=a.insert(b.key,b.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,t,r,a){Je()}Is(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bS(this)}getSize(e){return ae.resolve(this.size)}}class bS extends hw{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.zn.addEntry(e,a)):this.zn.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class IS{constructor(e){this.persistence=e,this.Ts=new Sc(t=>_u(t),Eh),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.Es=0,this.As=new Ct,this.targetCount=0,this.Rs=Oc.An()}forEachTarget(e,t){return this.Ts.forEach((r,a)=>t(a)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),ae.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Oc(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.vn(t),ae.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let a=0;const c=[];return this.Ts.forEach((h,y)=>{y.sequenceNumber<=t&&null===r.get(y.targetId)&&(this.Ts.delete(h),c.push(this.removeMatchingKeysForTargetId(e,y.targetId)),a++)}),ae.waitFor(c).next(()=>a)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(h=>{c.push(a.markPotentiallyOrphaned(e,h))}),ae.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.As.containsKey(t))}}class CS{constructor(e,t){this.bs={},this.overlays={},this.Ps=new ps(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new IS(this),this.indexManager=new Uh,this.remoteDocumentCache=new wS(r=>this.referenceDelegate.Ss(r)),this.wt=new kh(t),this.Ds=new sM(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new ag(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const a=new aM(this.Ps.next());return this.referenceDelegate.Cs(),r(a).next(c=>this.referenceDelegate.xs(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ns(e,t){return ae.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class aM extends BI{constructor(e){super(),this.currentSequenceNumber=e}}class Sy{constructor(e){this.persistence=e,this.ks=new Ct,this.Os=null}static Ms(e){return new Sy(e)}get Fs(){if(this.Os)return this.Os;throw Je()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),ae.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(a=>this.Fs.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Fs.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Fs,r=>{const a=qe.fromPath(r);return this.$s(e,a).next(c=>{c||t.removeEntry(a,wt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return ae.or([()=>ae.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class Ni{constructor(e){this.wt=e}O(e,t,r,a){const c=new fs("createOrUpgrade",t);var y;r<1&&a>=1&&(e.createObjectStore("owner"),(y=e).createObjectStore("mutationQueues",{keyPath:"userId"}),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",EC,{unique:!0}),y.createObjectStore("documentMutations"),jC(e),function(y){y.createObjectStore("remoteDocuments")}(e));let h=ae.resolve();return r<3&&a>=3&&(0!==r&&(function(y){y.deleteObjectStore("targetDocuments"),y.deleteObjectStore("targets"),y.deleteObjectStore("targetGlobal")}(e),jC(e)),h=h.next(()=>function(y){const b=y.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wt.min().toTimestamp(),targetCount:0};return b.put("targetGlobalKey",D)}(c))),r<4&&a>=4&&(0!==r&&(h=h.next(()=>function(y,b){return b.store("mutations").K().next(D=>{y.deleteObjectStore("mutations"),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",EC,{unique:!0});const x=b.store("mutations"),P=D.map(z=>x.put(z));return ae.waitFor(P)})}(e,c))),h=h.next(()=>{!function(y){y.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&a>=5&&(h=h.next(()=>this.Bs(c))),r<6&&a>=6&&(h=h.next(()=>(function(y){y.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(c)))),r<7&&a>=7&&(h=h.next(()=>this.Us(c))),r<8&&a>=8&&(h=h.next(()=>this.qs(e,c))),r<9&&a>=9&&(h=h.next(()=>{!function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&a>=10&&(h=h.next(()=>this.Ks(c))),r<11&&a>=11&&(h=h.next(()=>{(function(y){y.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(y){y.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&a>=12&&(h=h.next(()=>{!function(y){const b=y.createObjectStore("documentOverlays",{keyPath:hS});b.createIndex("collectionPathOverlayIndex",fS,{unique:!1}),b.createIndex("collectionGroupOverlayIndex",iM,{unique:!1})}(e)})),r<13&&a>=13&&(h=h.next(()=>function(y){const b=y.createObjectStore("remoteDocumentsV14",{keyPath:IC});b.createIndex("documentKeyIndex",CC),b.createIndex("collectionGroupIndex",cS)}(e)).next(()=>this.Gs(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&a>=14&&(h=h.next(()=>this.Qs(e,c))),r<15&&a>=15&&(h=h.next(()=>function(y){y.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),y.createObjectStore("indexState",{keyPath:TC}).createIndex("sequenceNumberIndex",vy,{unique:!1}),y.createObjectStore("indexEntries",{keyPath:Ey}).createIndex("documentKeyIndex",ng,{unique:!1})}(e))),h}Ls(e){let t=0;return e.store("remoteDocuments").J((r,a)=>{t+=Dy(a)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(a=>ae.forEach(a,c=>{const h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",h).next(y=>ae.forEach(y,b=>{It(b.userId===c.userId);const D=Rc(this.wt,b);return FC(e,c.userId,D).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return r.J((h,y)=>{const b=new nn(h),D=[0,gi(b)];c.push(t.get(D).next(x=>x?ae.resolve():t.put({targetId:0,path:gi(b),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>ae.waitFor(c))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:dS});const r=t.store("collectionParents"),a=new zl,c=h=>{if(a.add(h)){const y=h.lastSegment(),b=h.popLast();return r.put({collectionId:y,parent:gi(b)})}};return t.store("remoteDocuments").J({H:!0},(h,y)=>{const b=new nn(h);return c(b.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([h,y,b],D)=>{const x=Eu(y);return c(x.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,a)=>{const c=rg(a),h=yS(this.wt,c);return t.put(h)})}Gs(e,t){const r=t.store("remoteDocuments"),a=[];return r.J((c,h)=>{const y=t.store("remoteDocumentsV14"),b=(D=h,D.document?new qe(nn.fromString(D.document.name).popFirst(5)):D.noDocument?qe.fromSegments(D.noDocument.path):D.unknownDocument?qe.fromSegments(D.unknownDocument.path):Je()).path.toArray();var D;const x={prefixPath:b.slice(0,b.length-2),collectionGroup:b[b.length-2],documentId:b[b.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};a.push(y.put(x))}).next(()=>ae.waitFor(a))}Qs(e,t){const r=t.store("mutations"),a=UC(this.wt),c=new CS(Sy.Ms,this.wt.ne);return r.K().next(h=>{const y=new Map;return h.forEach(b=>{var D;let x=null!==(D=y.get(b.userId))&&void 0!==D?D:Ut();Rc(this.wt,b).keys().forEach(P=>x=x.add(P)),y.set(b.userId,x)}),ae.forEach(y,(b,D)=>{const x=new Br(D),P=ig.se(this.wt,x),z=c.getIndexManager(x),ee=Yi.se(x,this.wt,z,c.referenceDelegate);return new Ay(a,ee,P,z).recalculateAndSaveOverlaysForDocumentKeys(new tw(t,ps.ot),b).next()})})}}function jC(n){n.createObjectStore("targetDocuments",{keyPath:DC}).createIndex("documentTargetsIndex",_y,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lS,{unique:!0}),n.createObjectStore("targetGlobal")}const gw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ug{constructor(e,t,r,a,c,h,y,b,D,x,P=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=c,this.window=h,this.document=y,this.Ws=D,this.zs=x,this.Hs=P,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=z=>Promise.resolve(),!ug.V())throw new xe(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sg(this,a),this.ei=t+"main",this.wt=new kh(b),this.ni=new ho(this.ei,this.Hs,new Ni(this.wt)),this.Vs=new lw(this.referenceDelegate,this.wt),this.remoteDocumentCache=UC(this.wt),this.Ds=new PC,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===x&&Rr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(fe.FAILED_PRECONDITION,gw);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new ps(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,_e.Z)(function*(a){if(t.started)return e(a)});return function(a){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>xy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Ic(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return cg(e).get("owner").next(t=>ae.resolve(this.di(t)))}_i(e){return xy(e).delete(this.clientId)}wi(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const a=ni(r,"clientMetadata");return a.K().next(c=>{const h=e.gi(c,18e5),y=c.filter(b=>-1===h.indexOf(b));return ae.forEach(y,b=>a.delete(b.clientId)).next(()=>y)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?ae.resolve(!0):cg(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new xe(fe.FAILED_PRECONDITION,gw);return!1}}return!(!this.networkEnabled||!this.inForeground)||xy(e).K().next(r=>void 0===this.gi(r,5e3).find(a=>{if(this.clientId!==a.clientId){const h=!this.inForeground&&a.inForeground,y=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||h&&y)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new tw(t,ps.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>xy(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return Yi.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new St(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return ig.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(h=this.Hs)?gS:14===h?xC:13===h?SC:12===h?pS:11===h?AC:void Je();var h;let y;return this.ni.runTransaction(e,a,c,b=>(y=new tw(b,this.Ps?this.Ps.next():ps.ot),"readwrite-primary"===t?this.ai(y).next(D=>!!D||this.hi(y)).next(D=>{if(!D)throw Rr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new xe(fe.FAILED_PRECONDITION,jo);return r(y)}).next(D=>this.fi(y).next(()=>D)):this.bi(y).next(()=>r(y)))).then(b=>(y.raiseOnCommittedEvent(),b))}bi(e){return cg(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(fe.FAILED_PRECONDITION,gw)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cg(e).put("owner",t)}static V(){return ho.V()}li(e){const t=cg(e);return t.get("owner").next(r=>this.di(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Rr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,$t.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Rr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Rr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cg(n){return ni(n,"owner")}function xy(n){return ni(n,"clientMetadata")}function mw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class yw{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=a}static Vi(e,t){let r=Ut(),a=Ut();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new yw(e,t.fromCache,r,a)}}class $C{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,a){return this.Ci(e,t).next(c=>c||this.xi(e,t,a,r)).next(c=>c||this.Ni(e,t))}Ci(e,t){return ae.resolve(null)}xi(e,t,r,a){return function(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||a.isEqual(wt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(c=>{const h=this.ki(t,c);return this.Oi(t,h,r,a)?this.Ni(e,t):(Mp()<=dc.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),UE(t)),this.Mi(e,h,t,CE(a,-1)))})}ki(e,t){let r=new En(tC(e));return t.forEach((a,c)=>{Hl(e,c)&&(r=r.add(c))}),r}Oi(e,t,r,a){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ni(e,t){return Mp()<=dc.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",UE(t)),this.Di.getDocumentsMatchingQuery(e,t,hs.min())}Mi(e,t,r,a){return this.Di.getDocumentsMatchingQuery(e,r,a).next(c=>(t.forEach(h=>{c=c.insert(h.key,h)}),c))}}class DS{constructor(e,t,r,a){this.persistence=e,this.Fi=t,this.wt=a,this.$i=new dr(Ot),this.Bi=new Sc(c=>_u(c),Eh),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ay(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function Ry(n,e,t,r){return new DS(n,e,t,r)}function HC(n,e){return _w.apply(this,arguments)}function _w(){return(_w=(0,_e.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(c=>(a=c,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const h=[],y=[];let b=Ut();for(const D of a){h.push(D.batchId);for(const x of D.mutations)b=b.add(x.key)}for(const D of c){y.push(D.batchId);for(const x of D.mutations)b=b.add(x.key)}return t.localDocuments.getDocuments(r,b).next(D=>({Ki:D,removedBatchIds:h,addedBatchIds:y}))})})})).apply(this,arguments)}function GC(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),c=t.Ui.newChangeBuffer({trackRemovals:!0});return function(h,y,b,D){const x=b.batch,P=x.keys();let z=ae.resolve();return P.forEach(ee=>{z=z.next(()=>D.getEntry(y,ee)).next(ye=>{const Le=b.docVersions.get(ee);It(null!==Le),ye.version.compareTo(Le)<0&&(x.applyToRemoteDocument(ye,b),ye.isValidDocument()&&(ye.setReadTime(b.commitVersion),D.addEntry(ye)))})}),z.next(()=>h.mutationQueue.removeMutationBatch(y,x))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let y=Ut();for(let b=0;b<h.mutationResults.length;++b)h.mutationResults[b].transformResults.length>0&&(y=y.add(h.batch.mutations[b].key));return y}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function My(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function TS(n,e){const t=Ke(n),r=e.snapshotVersion;let a=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=t.Ui.newChangeBuffer({trackRemovals:!0});a=t.$i;const y=[];e.targetChanges.forEach((x,P)=>{const z=a.get(P);if(!z)return;y.push(t.Vs.removeMatchingKeys(c,x.removedDocuments,P).next(()=>t.Vs.addMatchingKeys(c,x.addedDocuments,P)));let ee=z.withSequenceNumber(c.currentSequenceNumber);var ye,Le,$e;e.targetMismatches.has(P)?ee=ee.withResumeToken(Or.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):x.resumeToken.approximateByteSize()>0&&(ee=ee.withResumeToken(x.resumeToken,r)),a=a.insert(P,ee),Le=ee,$e=x,(0===(ye=z).resumeToken.approximateByteSize()||Le.snapshotVersion.toMicroseconds()-ye.snapshotVersion.toMicroseconds()>=3e8||$e.addedDocuments.size+$e.modifiedDocuments.size+$e.removedDocuments.size>0)&&y.push(t.Vs.updateTargetData(c,ee))});let b=ms(),D=Ut();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(c,x))}),y.push(AS(c,h,e.documentUpdates).next(x=>{b=x.Gi,D=x.Qi})),!r.isEqual(wt.min())){const x=t.Vs.getLastRemoteSnapshotVersion(c).next(P=>t.Vs.setTargetsMetadata(c,c.currentSequenceNumber,r));y.push(x)}return ae.waitFor(y).next(()=>h.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,b,D)).next(()=>b)}).then(c=>(t.$i=a,c))}function AS(n,e,t){let r=Ut(),a=Ut();return t.forEach(c=>r=r.add(c)),e.getEntries(n,r).next(c=>{let h=ms();return t.forEach((y,b)=>{const D=c.get(y);b.isFoundDocument()!==D.isFoundDocument()&&(a=a.add(y)),b.isNoDocument()&&b.version.isEqual(wt.min())?(e.removeEntry(y,b.readTime),h=h.insert(y,b)):!D.isValidDocument()||b.version.compareTo(D.version)>0||0===b.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(b),h=h.insert(y,b)):ke("LocalStore","Ignoring outdated watch update for ",y,". Current version:",D.version," Watch version:",b.version)}),{Gi:h,Qi:a}})}function SS(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Gh(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Vs.getTargetData(r,e).next(c=>c?(a=c,ae.resolve(a)):t.Vs.allocateTargetId(r).next(h=>(a=new xc(e,h,0,r.currentSequenceNumber),t.Vs.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.$i.get(r.targetId);return(null===a||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function qh(n,e,t){return vw.apply(this,arguments)}function vw(){return(vw=(0,_e.Z)(function*(n,e,t){const r=Ke(n),a=r.$i.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,h=>r.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!Ic(h))throw h;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.$i=r.$i.remove(e),r.Bi.delete(a.target)})).apply(this,arguments)}function Ny(n,e,t){const r=Ke(n);let a=wt.min(),c=Ut();return r.persistence.runTransaction("Execute query","readonly",h=>function(y,b,D){const x=Ke(y),P=x.Bi.get(D);return void 0!==P?ae.resolve(x.$i.get(P)):x.Vs.getTargetData(b,D)}(r,h,Ki(e)).next(y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(h,y.targetId).next(b=>{c=b})}).next(()=>r.Fi.getDocumentsMatchingQuery(h,e,t?a:wt.min(),t?c:Ut())).next(y=>(WC(r,Dh(e),y),{documents:y,ji:c})))}function qC(n,e){const t=Ke(n),r=Ke(t.Vs),a=t.$i.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>r.te(c,e).next(h=>h?h.target:null))}function Wh(n,e){const t=Ke(n),r=t.Li.get(e)||wt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Ui.getAllFromCollectionGroup(a,e,CE(r,-1),Number.MAX_SAFE_INTEGER)).then(a=>(WC(t,e,a),a))}function WC(n,e,t){let r=wt.min();t.forEach((a,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),n.Li.set(e,r)}function Oy(){return(Oy=(0,_e.Z)(function*(n,e,t,r){const a=Ke(n);let c=Ut(),h=ms();for(const D of t){const x=e.Wi(D.metadata.name);D.document&&(c=c.add(x));const P=e.zi(D);P.setReadTime(e.Hi(D.metadata.readTime)),h=h.insert(x,P)}const y=a.Ui.newChangeBuffer({trackRemovals:!0}),b=yield Gh(a,(D=r,Ki(bh(nn.fromString(`__bundle__/docs/${D}`)))));var D;return a.persistence.runTransaction("Apply bundle documents","readwrite",D=>AS(D,y,h).next(x=>(y.apply(D),x)).next(x=>a.Vs.removeMatchingKeysForTargetId(D,b.targetId).next(()=>a.Vs.addMatchingKeys(D,c,b.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(D,x.Gi,x.Qi)).next(()=>x.Gi)))})).apply(this,arguments)}function lg(n,e){return zC.apply(this,arguments)}function zC(){return(zC=(0,_e.Z)(function*(n,e,t=Ut()){const r=yield Gh(n,Ki(iw(e.bundledQuery))),a=Ke(n);return a.persistence.runTransaction("Save named query","readwrite",c=>{const h=ti(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return a.Ds.saveNamedQuery(c,e);const y=r.withResumeToken(Or.EMPTY_BYTE_STRING,h);return a.$i=a.$i.insert(y.targetId,y),a.Vs.updateTargetData(c,y).next(()=>a.Vs.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>a.Vs.addMatchingKeys(c,t,r.targetId)).next(()=>a.Ds.saveNamedQuery(c,e))})})).apply(this,arguments)}function Ew(n,e){return`firestore_clients_${n}_${e}`}function ZC(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ww(n,e){return`firestore_targets_${n}_${e}`}class Py{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Ji(e,t,r){const a=JSON.parse(r);let c,h="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(c=new xe(a.error.code,a.error.message))),h?new Py(e,t,a.state,c):(Rr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let a,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(a=new xe(r.error.code,r.error.message))),c?new dg(e,r.state,a):(Rr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ky{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let a="object"==typeof r&&r.activeTargetIds instanceof Array,c=ly();for(let h=0;a&&h<r.activeTargetIds.length;++h)a=WI(r.activeTargetIds[h]),c=c.add(r.activeTargetIds[h]);return a?new ky(e,c):(Rr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Fy{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Fy(t.clientId,t.onlineState):(Rr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class bw{constructor(){this.activeTargetIds=ly()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Iw{constructor(e,t,r,a,c){this.window=e,this.js=t,this.persistenceKey=r,this.tr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new dr(Ot),this.started=!1,this.ir=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.rr=Ew(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new bw),this.cr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Ri();for(const a of t){if(a===e.tr)continue;const c=e.getItem(Ew(e.persistenceKey,a));if(c){const h=ky.Ji(a,c);h&&(e.sr=e.sr.insert(h.clientId,h))}}e._r();const r=e.storage.getItem(e.lr);if(r){const a=e.wr(r);a&&e.mr(a)}for(const a of e.ir)e.nr(a);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ww(this.persistenceKey,e));if(r){const a=dg.Ji(e,r);a&&(t=a.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ww(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.pr(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Rr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const a=t.Rr(r.key);return t.br(a,null)}{const a=t.Pr(r.key,r.newValue);if(a)return t.br(a.clientId,a)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const a=t.vr(r.key,r.newValue);if(a)return t.Vr(a)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const a=t.Sr(r.key,r.newValue);if(a)return t.Dr(a)}}else if(r.key===t.lr){if(null!==r.newValue){const a=t.wr(r.newValue);if(a)return t.mr(a)}}else if(r.key===t.ur){const a=function(c){let h=ps.ot;if(null!=c)try{const y=JSON.parse(c);It("number"==typeof y),h=y}catch(y){Rr("SharedClientState","Failed to read sequence number from WebStorage",y)}return h}(r.newValue);a!==ps.ot&&t.sequenceNumberHandler(a)}else if(r.key===t.dr){const a=t.Cr(r.newValue);yield Promise.all(a.map(c=>t.syncEngine.Nr(c)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const a=new Py(this.currentUser,e,t,r),c=ZC(this.persistenceKey,this.currentUser,e);this.setItem(c,a.Yi())}pr(e){const t=ZC(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const a=ww(this.persistenceKey,e),c=new dg(e,t,r);this.setItem(a,c.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return ky.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),a=Number(r[1]);return Py.Ji(new Br(void 0!==r[2]?r[2]:null),a,t)}Sr(e,t){const r=this.hr.exec(e),a=Number(r[1]);return dg.Ji(a,t)}wr(e){return Fy.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),a=this.gr(this.sr),c=this.gr(r),h=[],y=[];return c.forEach(b=>{a.has(b)||h.push(b)}),a.forEach(b=>{c.has(b)||y.push(b)}),this.syncEngine.Mr(h,y).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=ly();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class RS{constructor(){this.Fr=new bw,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new bw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uM{Br(e){}shutdown(){}}class MS{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Cw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class NS{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class OS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,a,c){const h=this.oo(e,t);ke("RestConnection","Sending: ",h,r);const y={};return this.uo(y,a,c),this.co(e,h,y,r).then(b=>(ke("RestConnection","Received: ",b),b),b=>{throw ph("RestConnection",`${e} failed with error: `,b,"url: ",h,"request:",r),b})}ao(e,t,r,a,c,h){return this.ro(e,t,r,a,c)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+wc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),r&&r.headers.forEach((a,c)=>e[c]=a)}oo(e,t){return`${this.so}/v1/${t}:${Cw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,a){return new Promise((c,h)=>{const y=new MI;y.listenOnce(vE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case xp.NO_ERROR:const D=y.getResponseJson();ke("Connection","XHR received:",JSON.stringify(D)),c(D);break;case xp.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),h(new xe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case xp.HTTP_ERROR:const x=y.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',x,"response text:",y.getResponseText()),x>0){const P=y.getResponseJson().error;if(P&&P.status&&P.message){const z=function(ee){const ye=ee.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(ye)>=0?ye:fe.UNKNOWN}(P.status);h(new xe(z,P.message))}else h(new xe(fe.UNKNOWN,"Server responded with status "+y.getStatus()))}else h(new xe(fe.UNAVAILABLE,"Connection failed."));break;default:Je()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const b=JSON.stringify(a);y.send(t,"POST",b,r,15)})}ho(e,t,r){const a=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=_E(),h=RA(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(y.xmlHttpFactory=new NA({})),this.uo(y.initMessageHeaders,t,r),(0,$t.uI)()||(0,$t.b$)()||(0,$t.d)()||(0,$t.w1)()||(0,$t.Mn)()||(0,$t.ru)()||(y.httpHeadersOverwriteParam="$httpHeaders");const b=a.join("");ke("Connection","Creating WebChannel: "+b,y);const D=c.createWebChannel(b,y);let x=!1,P=!1;const z=new NS({jr:ye=>{P?ke("Connection","Not sending because WebChannel is closed:",ye):(x||(ke("Connection","Opening WebChannel transport."),D.open(),x=!0),ke("Connection","WebChannel sending:",ye),D.send(ye))},Wr:()=>D.close()}),ee=(ye,Le,$e)=>{ye.listen(Le,xt=>{try{$e(xt)}catch(kt){setTimeout(()=>{throw kt},0)}})};return ee(D,Rp.EventType.OPEN,()=>{P||ke("Connection","WebChannel transport opened.")}),ee(D,Rp.EventType.CLOSE,()=>{P||(P=!0,ke("Connection","WebChannel transport closed"),z.eo())}),ee(D,Rp.EventType.ERROR,ye=>{P||(P=!0,ph("Connection","WebChannel transport errored:",ye),z.eo(new xe(fe.UNAVAILABLE,"The operation could not be completed")))}),ee(D,Rp.EventType.MESSAGE,ye=>{var Le;if(!P){const $e=ye.data[0];It(!!$e);const xt=$e,kt=xt.error||(null===(Le=xt[0])||void 0===Le?void 0:Le.error);if(kt){ke("Connection","WebChannel received error:",kt);const Lt=kt.status;let Rt=function(In){const vs=fr[In];if(void 0!==vs)return qE(vs)}(Lt),en=kt.message;void 0===Rt&&(Rt=fe.INTERNAL,en="Unknown error status: "+Lt+" with message "+kt.message),P=!0,z.eo(new xe(Rt,en)),D.close()}else ke("Connection","WebChannel received:",$e),z.no($e)}}),ee(h,RI.STAT_EVENT,ye=>{ye.stat===MA.PROXY?ke("Connection","Detected buffering proxy"):ye.stat===MA.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{z.Zr()},0),z}}function KC(){return"undefined"!=typeof window?window:null}function Ly(){return"undefined"!=typeof document?document:null}function hg(n){return new KE(n,!0)}class Dw{constructor(e,t,r=1e3,a=1.5,c=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=a,this._o=c,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),a=Math.max(0,t-r);a>0&&ke("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,a,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Tw{constructor(e,t,r,a,c,h,y,b){this.js=e,this.Ao=r,this.Ro=a,this.bo=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=y,this.listener=b,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Dw(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,_e.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,_e.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Rr(t.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.Po===t&&this.Uo(r,a)},r=>{e(()=>{const a=new xe(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(a)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(a=>{r(()=>this.qo(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}xo(){var e=this;this.state=5,this.So.Io((0,_e.Z)(function*(){e.state=0,e.start()}))}qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Aw extends Tw{constructor(e,t,r,a,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,h),this.wt=c}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(b=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===b?1:"REMOVE"===b?2:"CURRENT"===b?3:"RESET"===b?4:Je(),a=e.targetChange.targetIds||[],c=function(b,D){return b.dt?(It(void 0===D||"string"==typeof D),Or.fromBase64String(D||"")):(It(void 0===D||D instanceof Uint8Array),Or.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,y=h&&function(b){const D=void 0===b.code?fe.UNKNOWN:qE(b.code);return new xe(D,b.message||"")}(h);t=new zE(r,a,c,y||null)}else if("documentChange"in e){const r=e.documentChange,a=Ho(n,r.document.name),c=ti(r.document.updateTime),h=new ir({mapValue:{fields:r.document.fields}}),y=Vn.newFoundDocument(a,c,h);t=new dy(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,a=Ho(n,r.document),c=r.readTime?ti(r.readTime):wt.min(),h=Vn.newNoDocument(a,c);t=new dy([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,a=Ho(n,r.document);t=new dy([],r.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Je();{const r=e.filter,c=new YA(r.count||0);t=new dC(r.targetId,c)}}var b;return t}(this.wt,e),r=function(a){if(!("targetChange"in a))return wt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?wt.min():c.readTime?ti(c.readTime):wt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=Xp(this.wt),t.addTarget=function(a,c){let h;const y=c.target;return h=Gp(y)?{documents:yC(a,y)}:{query:Go(a,y)},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?h.resumeToken=gC(a,c.resumeToken):c.snapshotVersion.compareTo(wt.min())>0&&(h.readTime=Jp(a,c.snapshotVersion.toTimestamp())),h}(this.wt,e);const r=function(n,e){const t=function(r,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Je()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=Xp(this.wt),t.removeTarget=e,this.Mo(t)}}class PS extends Tw{constructor(e,t,r,a,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,h),this.wt=c,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(r,a){let c=ti(r.updateTime?r.updateTime:a);return c.isEqual(wt.min())&&(c=ti(a)),new Kp(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ti(e.commitTime);return this.listener.Jo(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Xp(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ca(this.wt,r))};this.Mo(t)}}class zh extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=a,this.Zo=!1}tu(){if(this.Zo)throw new xe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.bo.ro(e,t,r,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new xe(fe.UNKNOWN,a.toString())})}ao(e,t,r,a){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.bo.ao(e,t,r,c,h,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(fe.UNKNOWN,c.toString())})}terminate(){this.Zo=!0}}class Oi{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Rr(t),this.su=!1):ke("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class YC{constructor(e,t,r,a,c){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=c,this.du.Br(y=>{r.enqueueAndForget((0,_e.Z)(function*(){var b;Lc(h)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(b=(0,_e.Z)(function*(D){const x=Ke(D);x.lu.add(4),yield Zh(x),x._u.set("Unknown"),x.lu.delete(4),yield Qi(x)}),function(D){return b.apply(this,arguments)})(h))}))}),this._u=new Oi(r,a)}}function Qi(n){return fg.apply(this,arguments)}function fg(){return(fg=(0,_e.Z)(function*(n){if(Lc(n))for(const e of n.fu)yield e(!0)})).apply(this,arguments)}function Zh(n){return Vy.apply(this,arguments)}function Vy(){return(Vy=(0,_e.Z)(function*(n){for(const e of n.fu)yield e(!1)})).apply(this,arguments)}function pg(n,e){const t=Ke(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),Uy(t)?xw(t):Qh(t).Co()&&Sw(t,e))}function Kh(n,e){const t=Ke(n),r=Qh(t);t.hu.delete(e),r.Co()&&QC(t,e),0===t.hu.size&&(r.Co()?r.ko():Lc(t)&&t._u.set("Unknown"))}function Sw(n,e){n.wu.Nt(e.targetId),Qh(n).Qo(e)}function QC(n,e){n.wu.Nt(e),Qh(n).jo(e)}function xw(n){n.wu=new tS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Qh(n).start(),n._u.iu()}function Uy(n){return Lc(n)&&!Qh(n).Do()&&n.hu.size>0}function Lc(n){return 0===Ke(n).lu.size}function kS(n){n.wu=void 0}function FS(n){return Rw.apply(this,arguments)}function Rw(){return(Rw=(0,_e.Z)(function*(n){n.hu.forEach((e,t)=>{Sw(n,e)})})).apply(this,arguments)}function Yh(n,e){return JC.apply(this,arguments)}function JC(){return(JC=(0,_e.Z)(function*(n,e){kS(n),Uy(n)?(n._u.uu(e),xw(n)):n._u.set("Unknown")})).apply(this,arguments)}function XC(n,e,t){return Mw.apply(this,arguments)}function Mw(){return(Mw=(0,_e.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof zE&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(a,c){const h=c.cause;for(const y of c.targetIds)a.hu.has(y)&&(yield a.remoteSyncer.rejectListen(y,h),a.hu.delete(y),a.wu.removeTarget(y))}),function(a,c){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Nw(n,r)}else if(e instanceof dy?n.wu.Ut(e):e instanceof dC?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(wt.min()))try{const r=yield My(n.localStore);t.compareTo(r)>=0&&(yield function(a,c){const h=a.wu.Yt(c);return h.targetChanges.forEach((y,b)=>{if(y.resumeToken.approximateByteSize()>0){const D=a.hu.get(b);D&&a.hu.set(b,D.withResumeToken(y.resumeToken,c))}}),h.targetMismatches.forEach(y=>{const b=a.hu.get(y);if(!b)return;a.hu.set(y,b.withResumeToken(Or.EMPTY_BYTE_STRING,b.snapshotVersion)),QC(a,y);const D=new xc(b.target,y,1,b.sequenceNumber);Sw(a,D)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield Nw(n,r)}var r})).apply(this,arguments)}function Nw(n,e,t){return By.apply(this,arguments)}function By(){return(By=(0,_e.Z)(function*(n,e,t){if(!Ic(e))throw e;n.lu.add(1),yield Zh(n),n._u.set("Offline"),t||(t=()=>My(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Qi(n)}))})).apply(this,arguments)}function eD(n,e){return e().catch(t=>Nw(n,t,e))}function Vc(n){return jy.apply(this,arguments)}function jy(){return(jy=(0,_e.Z)(function*(n){const e=Ke(n),t=Uc(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;LS(e);)try{const a=yield SS(e.localStore,r);if(null===a){0===e.au.length&&t.ko();break}r=a.batchId,VS(e,a)}catch(a){yield Nw(e,a)}tD(e)&&nD(e)})).apply(this,arguments)}function LS(n){return Lc(n)&&n.au.length<10}function VS(n,e){n.au.push(e);const t=Uc(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function tD(n){return Lc(n)&&!Uc(n).Do()&&n.au.length>0}function nD(n){Uc(n).start()}function US(n){return Ow.apply(this,arguments)}function Ow(){return(Ow=(0,_e.Z)(function*(n){Uc(n).Xo()})).apply(this,arguments)}function BS(n){return Pw.apply(this,arguments)}function Pw(){return(Pw=(0,_e.Z)(function*(n){const e=Uc(n);for(const t of n.au)e.Ho(t.mutations)})).apply(this,arguments)}function jS(n,e,t){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,_e.Z)(function*(n,e,t){const r=n.au.shift(),a=rw.from(r,e,t);yield eD(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield Vc(n)})).apply(this,arguments)}function rD(n,e){return $y.apply(this,arguments)}function $y(){return($y=(0,_e.Z)(function*(n,e){var t;e&&Uc(n).zo&&(yield(t=(0,_e.Z)(function*(r,a){if(GE(c=a.code)&&c!==fe.ABORTED){const h=r.au.shift();Uc(r).No(),yield eD(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,a)),yield Vc(r)}var c}),function(r,a){return t.apply(this,arguments)})(n,e)),tD(n)&&nD(n)})).apply(this,arguments)}function kw(n,e){return Hy.apply(this,arguments)}function Hy(){return(Hy=(0,_e.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Lc(t);t.lu.add(3),yield Zh(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Qi(t)})).apply(this,arguments)}function Gy(n,e){return Fw.apply(this,arguments)}function Fw(){return(Fw=(0,_e.Z)(function*(n,e){const t=Ke(n);e?(t.lu.delete(2),yield Qi(t)):e||(t.lu.add(2),yield Zh(t),t._u.set("Unknown"))})).apply(this,arguments)}function Qh(n){return n.mu||(n.mu=function(e,t,r){const a=Ke(e);return a.tu(),new Aw(t,a.bo,a.authCredentials,a.appCheckCredentials,a.wt,r)}(n.datastore,n.asyncQueue,{zr:FS.bind(null,n),Jr:Yh.bind(null,n),Go:XC.bind(null,n)}),n.fu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.mu.No(),Uy(n)?xw(n):n._u.set("Unknown")):(yield n.mu.stop(),kS(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Uc(n){return n.gu||(n.gu=function(e,t,r){const a=Ke(e);return a.tu(),new PS(t,a.bo,a.authCredentials,a.appCheckCredentials,a.wt,r)}(n.datastore,n.asyncQueue,{zr:US.bind(null,n),Jr:rD.bind(null,n),Yo:BS.bind(null,n),Jo:jS.bind(null,n)}),n.fu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.gu.No(),yield Vc(n)):(yield n.gu.stop(),n.au.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class Lw{constructor(e,t,r,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=c,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,a,c){const h=Date.now()+r,y=new Lw(e,t,h,a,c);return y.start(r),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jh(n,e){if(Rr("AsyncQueue",`${e}: ${n}`),Ic(n))return new xe(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Xh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=Yp(),this.sortedSet=new dr(this.comparator)}static emptySet(e){return new Xh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Xh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class iD{constructor(){this.yu=new dr(qe.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Je():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Aa{constructor(e,t,r,a,c,h,y,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=y,this.excludesMetadataChanges=b}static fromInitialDocuments(e,t,r,a){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new Aa(e,t,Xh.emptySet(t),c,r,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class gg{constructor(){this.Iu=void 0,this.listeners=[]}}class $S{constructor(){this.queries=new Sc(e=>VE(e),Ch),this.onlineState="Unknown",this.Tu=new Set}}function mg(n,e){return fo.apply(this,arguments)}function fo(){return(fo=(0,_e.Z)(function*(n,e){const t=Ke(n),r=e.query;let a=!1,c=t.queries.get(r);if(c||(a=!0,c=new gg),a)try{c.Iu=yield t.onListen(r)}catch(h){const y=Jh(h,`Initialization of query '${UE(e.query)}' failed`);return void e.onError(y)}t.queries.set(r,c),c.listeners.push(e),e.Eu(t.onlineState),c.Iu&&e.Au(c.Iu)&&sD(t)})).apply(this,arguments)}function Vw(n,e){return ef.apply(this,arguments)}function ef(){return(ef=(0,_e.Z)(function*(n,e){const t=Ke(n),r=e.query;let a=!1;const c=t.queries.get(r);if(c){const h=c.listeners.indexOf(e);h>=0&&(c.listeners.splice(h,1),a=0===c.listeners.length)}if(a)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function HS(n,e){const t=Ke(n);let r=!1;for(const a of e){const h=t.queries.get(a.query);if(h){for(const y of h.listeners)y.Au(a)&&(r=!0);h.Iu=a}}r&&sD(t)}function GS(n,e,t){const r=Ke(n),a=r.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);r.queries.delete(e)}function sD(n){n.Tu.forEach(e=>{e.next()})}class yg{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)3!==a.type&&r.push(a);e=new Aa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class Uw{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Bw{constructor(e){this.wt=e}Wi(e){return Ho(this.wt,e)}zi(e){return e.metadata.exists?gy(this.wt,e.document,!1):Vn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return ti(e)}}class jw{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=qy(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=nn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new Bw(this.wt);for(const a of e)if(a.metadata.queries){const c=r.Wi(a.metadata.name);for(const h of a.metadata.queries){const y=(t.get(h)||Ut()).add(c);t.set(h,y)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function(n,e,t,r){return Oy.apply(this,arguments)}(e.localStore,new Bw(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const a of e.queries)yield lg(e.localStore,a,r.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function qy(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class oD{constructor(e){this.key=e}}class aD{constructor(e){this.key=e}}class uD{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Ut(),this.mutatedKeys=Ut(),this.Lu=tC(e),this.Uu=new Xh(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new iD,a=t?t.Uu:this.Uu;let c=t?t.mutatedKeys:this.mutatedKeys,h=a,y=!1;const b="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,D="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((x,P)=>{const z=a.get(x),ee=Hl(this.query,P)?P:null,ye=!!z&&this.mutatedKeys.has(z.key),Le=!!ee&&(ee.hasLocalMutations||this.mutatedKeys.has(ee.key)&&ee.hasCommittedMutations);let $e=!1;z&&ee?z.data.isEqual(ee.data)?ye!==Le&&(r.track({type:3,doc:ee}),$e=!0):this.Qu(z,ee)||(r.track({type:2,doc:ee}),$e=!0,(b&&this.Lu(ee,b)>0||D&&this.Lu(ee,D)<0)&&(y=!0)):!z&&ee?(r.track({type:0,doc:ee}),$e=!0):z&&!ee&&(r.track({type:1,doc:z}),$e=!0,(b||D)&&(y=!0)),$e&&(ee?(h=h.add(ee),c=Le?c.add(x):c.delete(x)):(h=h.delete(x),c=c.delete(x)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const x="F"===this.query.limitType?h.last():h.first();h=h.delete(x.key),c=c.delete(x.key),r.track({type:1,doc:x})}return{Uu:h,Gu:r,Oi:y,mutatedKeys:c}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const a=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const c=e.Gu.pu();c.sort((D,x)=>function(P,z){const ee=ye=>{switch(ye){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je()}};return ee(P)-ee(z)}(D.type,x.type)||this.Lu(D.doc,x.doc)),this.ju(r);const h=t?this.Wu():[],y=0===this.Bu.size&&this.current?1:0,b=y!==this.$u;return this.$u=y,0!==c.length||b?{snapshot:new Aa(this.query,e.Uu,a,c,e.mutatedKeys,0===y,b,!1),zu:h}:{zu:h}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new iD,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Ut(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new aD(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new oD(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Ut();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Aa.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class qS{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class cD{constructor(e){this.key=e,this.Xu=!1}}class $w{constructor(e,t,r,a,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Zu={},this.tc=new Sc(y=>VE(y),Ch),this.ec=new Map,this.nc=new Set,this.sc=new dr(qe.comparator),this.ic=new Map,this.rc=new Ct,this.oc={},this.uc=new Map,this.cc=Oc.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function lD(n,e){return Hw.apply(this,arguments)}function Hw(){return(Hw=(0,_e.Z)(function*(n,e){const t=e_(n);let r,a;const c=t.tc.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),a=c.view.Yu();else{const h=yield Gh(t.localStore,Ki(e));t.isPrimaryClient&&pg(t.remoteStore,h);const y=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,a=yield Wy(t,e,r,"current"===y)}return a})).apply(this,arguments)}function Wy(n,e,t,r){return zy.apply(this,arguments)}function zy(){return(zy=(0,_e.Z)(function*(n,e,t,r){n.hc=(x,P,z)=>{return(ee=(0,_e.Z)(function*(ye,Le,$e,xt){let kt=Le.view.Ku($e);kt.Oi&&(kt=yield Ny(ye.localStore,Le.query,!1).then(({documents:en})=>Le.view.Ku(en,kt)));const Lt=xt&&xt.targetChanges.get(Le.targetId),Rt=Le.view.applyChanges(kt,ye.isPrimaryClient,Lt);return vg(ye,Le.targetId,Rt.zu),Rt.snapshot}),function(ye,Le,$e,xt){return ee.apply(this,arguments)})(n,x,P,z);var ee};const a=yield Ny(n.localStore,e,!0),c=new uD(e,a.ji),h=c.Ku(a.documents),y=Nh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),b=c.applyChanges(h,n.isPrimaryClient,y);vg(n,t,b.zu);const D=new qS(e,t,c);return n.tc.set(e,D),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),b.snapshot})).apply(this,arguments)}function WS(n,e){return Zy.apply(this,arguments)}function Zy(){return(Zy=(0,_e.Z)(function*(n,e){const t=Ke(n),r=t.tc.get(e),a=t.ec.get(r.targetId);if(a.length>1)return t.ec.set(r.targetId,a.filter(c=>!Ch(c,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield qh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Kh(t.remoteStore,r.targetId),tf(t,r.targetId)}).catch(bc))):(tf(t,r.targetId),yield qh(t.localStore,r.targetId,!0))})).apply(this,arguments)}function Gw(){return(Gw=(0,_e.Z)(function*(n,e,t){const r=t0(n);try{const a=yield function(c,h){const y=Ke(c),b=$n.now(),D=h.reduce((z,ee)=>z.add(ee.key),Ut());let x,P;return y.persistence.runTransaction("Locally write mutations","readwrite",z=>{let ee=ms(),ye=Ut();return y.Ui.getEntries(z,D).next(Le=>{ee=Le,ee.forEach(($e,xt)=>{xt.isValidDocument()||(ye=ye.add($e))})}).next(()=>y.localDocuments.getOverlayedDocuments(z,ee)).next(Le=>{x=Le;const $e=[];for(const xt of h){const kt=KA(xt,x.get(xt.key).overlayedDocument);null!=kt&&$e.push(new vu(xt.key,kt,YI(kt.value.mapValue),sr.exists(!0)))}return y.mutationQueue.addMutationBatch(z,b,$e,h)}).next(Le=>{P=Le;const $e=Le.applyToLocalDocumentSet(x,ye);return y.documentOverlayCache.saveOverlays(z,Le.batchId,$e)})}).then(()=>({batchId:P.batchId,changes:WE(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,h,y){let b=c.oc[c.currentUser.toKey()];b||(b=new dr(Ot)),b=b.insert(h,y),c.oc[c.currentUser.toKey()]=b}(r,a.batchId,t),yield po(r,a.changes),yield Vc(r.remoteStore)}catch(a){const c=Jh(a,"Failed to persist write");t.reject(c)}})).apply(this,arguments)}function qw(n,e){return Ww.apply(this,arguments)}function Ww(){return(Ww=(0,_e.Z)(function*(n,e){const t=Ke(n);try{const r=yield TS(t.localStore,e);e.targetChanges.forEach((a,c)=>{const h=t.ic.get(c);h&&(It(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.Xu=!0:a.modifiedDocuments.size>0?It(h.Xu):a.removedDocuments.size>0&&(It(h.Xu),h.Xu=!1))}),yield po(t,r,e)}catch(r){yield bc(r)}})).apply(this,arguments)}function zS(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const a=[];r.tc.forEach((c,h)=>{const y=h.view.Eu(e);y.snapshot&&a.push(y.snapshot)}),function(c,h){const y=Ke(c);y.onlineState=h;let b=!1;y.queries.forEach((D,x)=>{for(const P of x.listeners)P.Eu(h)&&(b=!0)}),b&&sD(y)}(r.eventManager,e),a.length&&r.Zu.Go(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ji(n,e,t){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,_e.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.ic.get(e),c=a&&a.key;if(c){let h=new dr(qe.comparator);h=h.insert(c,Vn.newNoDocument(c,wt.min()));const y=Ut().add(c),b=new Mh(wt.min(),new Map,new En(Ot),h,y);yield qw(r,b),r.sc=r.sc.remove(c),r.ic.delete(e),Yy(r)}else yield qh(r.localStore,e,!1).then(()=>tf(r,e,t)).catch(bc)})).apply(this,arguments)}function ZS(n,e){return zw.apply(this,arguments)}function zw(){return(zw=(0,_e.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const a=yield GC(t.localStore,e);Ky(t,r,null),Zw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield po(t,a)}catch(a){yield bc(a)}})).apply(this,arguments)}function cM(n,e,t){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,_e.Z)(function*(n,e,t){const r=Ke(n);try{const a=yield function(c,h){const y=Ke(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",b=>{let D;return y.mutationQueue.lookupMutationBatch(b,h).next(x=>(It(null!==x),D=x.keys(),y.mutationQueue.removeMutationBatch(b,x))).next(()=>y.mutationQueue.performConsistencyCheck(b)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(b,D,h)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,D)).next(()=>y.localDocuments.getDocuments(b,D))})}(r.localStore,e);Ky(r,e,t),Zw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield po(r,a)}catch(a){yield bc(a)}})).apply(this,arguments)}function _g(){return(_g=(0,_e.Z)(function*(n,e){const t=Ke(n);Lc(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const h=Ke(c);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>h.mutationQueue.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===r)return void e.resolve();const a=t.uc.get(r)||[];a.push(e),t.uc.set(r,a)}catch(r){const a=Jh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}})).apply(this,arguments)}function Zw(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function Ky(n,e,t){const r=Ke(n);let a=r.oc[r.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),r.oc[r.currentUser.toKey()]=a}}function tf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||hD(n,r)})}function hD(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(Kh(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),Yy(n))}function vg(n,e,t){for(const r of t)r instanceof oD?(n.rc.addReference(r.key,e),fD(n,r)):r instanceof aD?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||hD(n,r.key)):Je()}function fD(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.nc.add(r),Yy(n))}function Yy(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new qe(nn.fromString(e)),r=n.cc.next();n.ic.set(r,new cD(t)),n.sc=n.sc.insert(t,r),pg(n.remoteStore,new xc(Ki(bh(t.path)),r,2,ps.ot))}}function po(n,e,t){return Eg.apply(this,arguments)}function Eg(){return(Eg=(0,_e.Z)(function*(n,e,t){const r=Ke(n),a=[],c=[],h=[];var y;r.tc.isEmpty()||(r.tc.forEach((y,b)=>{h.push(r.hc(b,e,t).then(D=>{if(D){r.isPrimaryClient&&r.sharedClientState.updateQueryState(b.targetId,D.fromCache?"not-current":"current"),a.push(D);const x=yw.Vi(b.targetId,D);c.push(x)}}))}),yield Promise.all(h),r.Zu.Go(a),yield(y=(0,_e.Z)(function*(b,D){const x=Ke(b);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>ae.forEach(D,z=>ae.forEach(z.Pi,ee=>x.persistence.referenceDelegate.addReference(P,z.targetId,ee)).next(()=>ae.forEach(z.vi,ee=>x.persistence.referenceDelegate.removeReference(P,z.targetId,ee)))))}catch(P){if(!Ic(P))throw P;ke("LocalStore","Failed to update sequence numbers: "+P)}for(const P of D){const z=P.targetId;if(!P.fromCache){const ee=x.$i.get(z),Le=ee.withLastLimboFreeSnapshotVersion(ee.snapshotVersion);x.$i=x.$i.insert(z,Le)}}}),function(b,D){return y.apply(this,arguments)})(r.localStore,c))})).apply(this,arguments)}function lM(n,e){return Qy.apply(this,arguments)}function Qy(){return(Qy=(0,_e.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield HC(t.localStore,e);t.currentUser=e,(a=t).uc.forEach(h=>{h.forEach(y=>{y.reject(new xe(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield po(t,r.Ki)}var a})).apply(this,arguments)}function YS(n,e){const t=Ke(n),r=t.ic.get(e);if(r&&r.Xu)return Ut().add(r.key);{let a=Ut();const c=t.ec.get(e);if(!c)return a;for(const h of c){const y=t.tc.get(h);a=a.unionWith(y.view.qu)}return a}}function pD(n,e){return nf.apply(this,arguments)}function nf(){return(nf=(0,_e.Z)(function*(n,e){const t=Ke(n),r=yield Ny(t.localStore,e.query,!0),a=e.view.Ju(r);return t.isPrimaryClient&&vg(t,e.targetId,a.zu),a})).apply(this,arguments)}function gD(n,e){return Kw.apply(this,arguments)}function Kw(){return(Kw=(0,_e.Z)(function*(n,e){const t=Ke(n);return Wh(t.localStore,e).then(r=>po(t,r))})).apply(this,arguments)}function Yw(n,e,t,r){return wg.apply(this,arguments)}function wg(){return(wg=(0,_e.Z)(function*(n,e,t,r){const a=Ke(n),c=yield function(h,y){const b=Ke(h),D=Ke(b.mutationQueue);return b.persistence.runTransaction("Lookup mutation documents","readonly",x=>D.yn(x,y).next(P=>P?b.localDocuments.getDocuments(x,P):ae.resolve(null)))}(a.localStore,e);var y;null!==c?("pending"===t?yield Vc(a.remoteStore):"acknowledged"===t||"rejected"===t?(Ky(a,e,r||null),Zw(a,e),y=e,Ke(Ke(a.localStore).mutationQueue).In(y)):Je(),yield po(a,c)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function Qw(){return(Qw=(0,_e.Z)(function*(n,e){const t=Ke(n);if(e_(t),t0(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),a=yield Jw(t,r.toArray());t.ac=!0,yield Gy(t.remoteStore,!0);for(const c of a)pg(t.remoteStore,c)}else if(!1===e&&!1!==t.ac){const r=[];let a=Promise.resolve();t.ec.forEach((c,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):a=a.then(()=>(tf(t,h),qh(t.localStore,h,!0))),Kh(t.remoteStore,h)}),yield a,yield Jw(t,r),function(c){const h=Ke(c);h.ic.forEach((y,b)=>{Kh(h.remoteStore,b)}),h.rc.cs(),h.ic=new Map,h.sc=new dr(qe.comparator)}(t),t.ac=!1,yield Gy(t.remoteStore,!1)}})).apply(this,arguments)}function Jw(n,e,t){return Jy.apply(this,arguments)}function Jy(){return(Jy=(0,_e.Z)(function*(n,e,t){const r=Ke(n),a=[],c=[];for(const h of e){let y;const b=r.ec.get(h);if(b&&0!==b.length){y=yield Gh(r.localStore,Ki(b[0]));for(const D of b){const x=r.tc.get(D),P=yield pD(r,x);P.snapshot&&c.push(P.snapshot)}}else{const D=yield qC(r.localStore,h);y=yield Gh(r.localStore,D),yield Wy(r,Xw(D),h,!1)}a.push(y)}return r.Zu.Go(c),a})).apply(this,arguments)}function Xw(n){return eC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function JS(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).Ri()}function mD(n,e,t,r){return Xy.apply(this,arguments)}function Xy(){return(Xy=(0,_e.Z)(function*(n,e,t,r){const a=Ke(n);if(a.ac)return void ke("SyncEngine","Ignoring unexpected query state notification.");const c=a.ec.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const h=yield Wh(a.localStore,Dh(c[0])),y=Mh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield po(a,h,y);break}case"rejected":yield qh(a.localStore,e,!0),tf(a,e,r);break;default:Je()}})).apply(this,arguments)}function XS(n,e,t){return e0.apply(this,arguments)}function e0(){return(e0=(0,_e.Z)(function*(n,e,t){const r=e_(n);if(r.ac){for(const a of e){if(r.ec.has(a)){ke("SyncEngine","Adding an already active target "+a);continue}const c=yield qC(r.localStore,a),h=yield Gh(r.localStore,c);yield Wy(r,Xw(c),h.targetId,!1),pg(r.remoteStore,h)}for(const a of t)r.ec.has(a)&&(yield qh(r.localStore,a,!1).then(()=>{Kh(r.remoteStore,a),tf(r,a)}).catch(bc))}})).apply(this,arguments)}function e_(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ji.bind(null,e),e.Zu.Go=HS.bind(null,e.eventManager),e.Zu.lc=GS.bind(null,e.eventManager),e}function t0(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cM.bind(null,e),e}class n0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.wt=hg(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return Ry(this.persistence,new $C,e.initialUser,this.wt)}_c(e){return new CS(Sy.Ms,this.wt)}dc(e){return new RS}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class r0 extends n0{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield t0(r.yc.syncEngine),yield Vc(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return Ry(this.persistence,new $C,e.initialUser,this.wt)}mc(e,t){return new VC(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new $I(t,this.persistence);return new VA(e.asyncQueue,r)}_c(e){const t=mw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Fs.withCacheSize(this.cacheSizeBytes):Fs.DEFAULT;return new ug(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,KC(),Ly(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new RS}}class _D extends r0{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const a=r.yc.syncEngine;r.sharedClientState instanceof Iw&&(r.sharedClientState.syncEngine={kr:Yw.bind(null,a),Or:mD.bind(null,a),Mr:XS.bind(null,a),Ri:JS.bind(null,a),Nr:gD.bind(null,a)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var c=(0,_e.Z)(function*(h){yield function(n,e){return Qw.apply(this,arguments)}(r.yc.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start():h||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(h&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():h||r.indexBackfillerScheduler.stop())});return function(h){return c.apply(this,arguments)}}())})()}dc(e){const t=KC();if(!Iw.V(t))throw new xe(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=mw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Iw(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class s0{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=a=>zS(r.syncEngine,a,1),r.remoteStore.remoteSyncer.handleCredentialChange=lM.bind(null,r.syncEngine),yield Gy(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new $S}createDatastore(e){const t=hg(e.databaseInfo.databaseId),r=new OS(e.databaseInfo);return new zh(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,a=e.asyncQueue,c=y=>zS(this.syncEngine,y,0),h=MS.V()?new MS:new uM,new YC(t,r,a,c,h);var t,r,a,c,h}createSyncEngine(e,t){return function(r,a,c,h,y,b,D){const x=new $w(r,a,c,h,y,b);return D&&(x.ac=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=Ke(t);ke("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Zh(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function vD(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class t_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ED{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Mr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),a=Number(r);isNaN(a)&&e.Pc(`length string (${r}) is not valid number`);const c=yield e.vc(a);return new Uw(JSON.parse(c),t.length+a)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,_e.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class dM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(a=(0,_e.Z)(function*(c,h){const y=Ke(c),b=Xp(y.wt)+"/documents",D={documents:h.map(ee=>Oh(y.wt,ee))},x=yield y.ao("BatchGetDocuments",b,D,h.length),P=new Map;x.forEach(ee=>{const ye=function(n,e){return"found"in e?function(t,r){It(!!r.found);const a=Ho(t,r.found.name),c=ti(r.found.updateTime),h=new ir({mapValue:{fields:r.found.fields}});return Vn.newFoundDocument(a,c,h)}(n,e):"missing"in e?function(t,r){It(!!r.missing),It(!!r.readTime);const a=Ho(t,r.missing),c=ti(r.readTime);return Vn.newNoDocument(a,c)}(n,e):Je()}(y.wt,ee);P.set(ye.key.toString(),ye)});const z=[];return h.forEach(ee=>{const ye=P.get(ee.toString());It(!!ye),z.push(ye)}),z}),function(c,h){return a.apply(this,arguments)})(t.datastore,e);var a;return r.forEach(a=>t.recordVersion(a)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const c=qe.fromPath(a);e.mutations.push(new uy(c,e.precondition(c)))}),yield(r=(0,_e.Z)(function*(a,c){const h=Ke(a),y=Xp(h.wt)+"/documents",b={writes:c.map(D=>Ca(h.wt,D))};yield h.ro("Commit",y,b)}),function(a,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Je();t=wt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?sr.updateTime(t):sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wt.min()))throw new xe(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sr.updateTime(t)}return sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hM{constructor(e,t,r,a,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=c,this.Dc=r.maxAttempts,this.So=new Dw(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,_e.Z)(function*(){const t=new dM(e.datastore),r=e.xc(t);r&&r.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Nc(c)}))}).catch(a=>{e.Nc(a)})}))}xc(e){try{const t=this.updateFunction(e);return!Bp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!GE(t)}return!1}}class fM{constructor(e,t,r,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=Br.UNAUTHENTICATED,this.clientId=UI.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,_e.Z)(function*(y){ke("FirestoreClient","Received user=",y.uid),yield c.authCredentialListener(y),c.user=y});return function(y){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(ke("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=Jh(r,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function ex(n,e){return wD.apply(this,arguments)}function wD(){return(wD=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,_e.Z)(function*(c){r.isEqual(c)||(yield HC(e.localStore,c),r=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function tx(n,e){return bD.apply(this,arguments)}function bD(){return(bD=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ID(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(a=>kw(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,c)=>kw(e.remoteStore,c)),n.onlineComponents=e})).apply(this,arguments)}function ID(n){return CD.apply(this,arguments)}function CD(){return(CD=(0,_e.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield ex(n,new n0)),n.offlineComponents})).apply(this,arguments)}function o0(n){return DD.apply(this,arguments)}function DD(){return(DD=(0,_e.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield tx(n,new s0)),n.onlineComponents})).apply(this,arguments)}function nx(n){return ID(n).then(e=>e.persistence)}function TD(n){return ID(n).then(e=>e.localStore)}function rx(n){return o0(n).then(e=>e.remoteStore)}function AD(n){return o0(n).then(e=>e.syncEngine)}function bg(n){return SD.apply(this,arguments)}function SD(){return(SD=(0,_e.Z)(function*(n){const e=yield o0(n),t=e.eventManager;return t.onListen=lD.bind(null,e.syncEngine),t.onUnlisten=WS.bind(null,e.syncEngine),t})).apply(this,arguments)}function ax(n,e,t={}){const r=new Mr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(a,c,h,y,b){const D=new t_({next:P=>{c.enqueueAndForget(()=>Vw(a,x));const z=P.docs.has(h);!z&&P.fromCache?b.reject(new xe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&P.fromCache&&y&&"server"===y.source?b.reject(new xe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(P)},error:P=>b.reject(P)}),x=new yg(bh(h.path),D,{includeMetadataChanges:!0,Du:!0});return mg(a,x)}(yield bg(n),n.asyncQueue,e,t,r)})),r.promise}function ux(n,e,t={}){const r=new Mr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(a,c,h,y,b){const D=new t_({next:P=>{c.enqueueAndForget(()=>Vw(a,x)),P.fromCache&&"server"===y.source?b.reject(new xe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(P)},error:P=>b.reject(P)}),x=new yg(h,D,{includeMetadataChanges:!0,Du:!0});return mg(a,x)}(yield bg(n),n.asyncQueue,e,t,r)})),r.promise}const hx=new Map;function xD(n,e,t){if(!t)throw new xe(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fx(n,e,t,r){if(!0===e&&!0===r)throw new xe(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function RD(n){if(!qe.isDocumentKey(n))throw new xe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function px(n){if(qe.isDocumentKey(n))throw new xe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function n_(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Je()}function Qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=n_(n);throw new xe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Jl(n,e){if(e<=0)throw new xe(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class a0{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,fx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ig{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new a0({}),this._settingsFrozen=!1,e instanceof yu?this._databaseId=e:(this._app=e,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new xe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(a.options.projectId)}(e))}get app(){if(!this._app)throw new xe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new a0(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new OI;switch(t.type){case"gapi":const r=t.client;return It(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new LI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=hx.get(e);t&&(ke("ComponentProvider","Removing Datastore"),hx.delete(e),t.terminate())}(this),Promise.resolve()}}class Nn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nn(this.firestore,e,this._key)}}class yi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yi(this.firestore,e,this._query)}}class zo extends yi{constructor(e,t,r){super(e,t,bh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nn(this.firestore,null,new qe(e))}withConverter(e){return new zo(this.firestore,e,this._path)}}function u0(n,e,...t){if(n=(0,$t.m9)(n),xD("collection","path",e),n instanceof Ig){const r=nn.fromString(e,...t);return px(r),new zo(n,null,r)}{if(!(n instanceof Nn||n instanceof zo))throw new xe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return px(r),new zo(n.firestore,null,r)}}function Cg(n,e,...t){if(n=(0,$t.m9)(n),1===arguments.length&&(e=UI.I()),xD("doc","path",e),n instanceof Ig){const r=nn.fromString(e,...t);return RD(r),new Nn(n,null,new qe(r))}{if(!(n instanceof Nn||n instanceof zo))throw new xe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return RD(r),new Nn(n.firestore,n instanceof zo?n.converter:null,new qe(r))}}function Dg(n,e){return n=(0,$t.m9)(n),e=(0,$t.m9)(e),(n instanceof Nn||n instanceof zo)&&(e instanceof Nn||e instanceof zo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function c0(n,e){return n=(0,$t.m9)(n),e=(0,$t.m9)(e),n instanceof yi&&e instanceof yi&&n.firestore===e.firestore&&Ch(n._query,e._query)&&n.converter===e.converter}class yM{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Dw(this,"async_queue_retry"),this.Kc=()=>{const t=Ly();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Ly();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=Ly();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Mr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Ic(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Rr("INTERNAL UNHANDLED ERROR: ",function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),h}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const a=Lw.createAndSchedule(this,e,t,r,c=>this.Wc(c));return this.$c.push(a),a}Gc(){this.Bc&&Je()}verifyOperationInProgress(){}zc(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function MD(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(n)}class _M{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class or extends Ig{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new yM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||yx(this),this._firestoreClient.terminate()}}function jr(n){return n._firestoreClient||yx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function yx(n){var e;const t=n._freezeSettings(),r=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new UA(n._databaseId,c,n._persistenceKey,(y=t).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var c,y;n._firestoreClient=new fM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function vx(n,e,t){const r=new Mr;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield ex(n,t),yield tx(n,e),r.resolve()}catch(a){const c=a;if(!("FirebaseError"===(h=c).name?h.code===fe.FAILED_PRECONDITION||h.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw c;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+c),r.reject(c)}var h})).then(()=>r.promise)}function OD(n){if(n._initialized||n._terminated)throw new xe(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ls{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sa(Or.fromBase64String(e))}catch(t){throw new xe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Sa(Or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xl{constructor(e){this._methodName=e}}class rf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ot(this._lat,e._lat)||Ot(this._long,e._long)}}const wx=/^__.*__$/;class Vs{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new vu(e,this.data,this.fieldMask,t,this.fieldTransforms):new $o(e,this.data,t,this.fieldTransforms)}}class PD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function r_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je()}}class i_{constructor(e,t,r,a,c,h){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=a,void 0===c&&this.Xc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new i_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ta({path:r,na:!1});return a.sa(e),a}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ta({path:r,na:!1});return a.Xc(),a}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return a_(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(r_(this.Zc)&&wx.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class bx{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||hg(e)}aa(e,t,r,a=!1){return new i_({Zc:e,methodName:t,ca:r,path:lr.emptyPath(),na:!1,ua:a},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function wu(n){const e=n._freezeSettings(),t=hg(n._databaseId);return new bx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Tg(n,e,t,r,a,c={}){const h=n.aa(c.merge||c.mergeFields?2:0,e,t,a);f0("Data must be an object, but it was:",h,r);const y=LD(r,h);let b,D;if(c.merge)b=new gs(h.fieldMask),D=h.fieldTransforms;else if(c.mergeFields){const x=[];for(const P of c.mergeFields){const z=VD(e,P,t);if(!h.contains(z))throw new xe(fe.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);UD(x,z)||x.push(z)}b=new gs(x),D=h.fieldTransforms.filter(P=>b.covers(P.field))}else b=null,D=h.fieldTransforms;return new Vs(new ir(y),b,D)}class sf extends Xl{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sf}}function kD(n,e,t){return new i_({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class s_ extends Xl{_toFieldTransform(e){return new Zp(e.path,new Th)}isEqual(e){return e instanceof s_}}class FD extends Xl{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=kD(this,e,!0),r=this.ha.map(c=>bu(c,t)),a=new Ah(r);return new Zp(e.path,a)}isEqual(e){return this===e}}class Ix extends Xl{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=kD(this,e,!0),r=this.ha.map(c=>bu(c,t)),a=new Sh(r);return new Zp(e.path,a)}isEqual(e){return this===e}}class Cx extends Xl{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Gl(e.wt,jE(e.wt,this.la));return new Zp(e.path,t)}isEqual(e){return this===e}}function Ag(n,e,t,r){const a=n.aa(1,e,t);f0("Data must be an object, but it was:",a,r);const c=[],h=ir.empty();Cc(r,(b,D)=>{const x=p0(e,b,t);D=(0,$t.m9)(D);const P=a.ia(x);if(D instanceof sf)c.push(x);else{const z=bu(D,P);null!=z&&(c.push(x),h.set(x,z))}});const y=new gs(c);return new PD(h,y,a.fieldTransforms)}function o_(n,e,t,r,a,c){const h=n.aa(1,e,t),y=[VD(e,r,t)],b=[a];if(c.length%2!=0)throw new xe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<c.length;z+=2)y.push(VD(e,c[z])),b.push(c[z+1]);const D=[],x=ir.empty();for(let z=y.length-1;z>=0;--z)if(!UD(D,y[z])){const ee=y[z];let ye=b[z];ye=(0,$t.m9)(ye);const Le=h.ia(ee);if(ye instanceof sf)D.push(ee);else{const $e=bu(ye,Le);null!=$e&&(D.push(ee),x.set(ee,$e))}}const P=new gs(D);return new PD(x,P,h.fieldTransforms)}function h0(n,e,t,r=!1){return bu(t,n.aa(r?4:3,e))}function bu(n,e){if(go(n=(0,$t.m9)(n)))return f0("Unsupported field value:",e,n),LD(n,e);if(n instanceof Xl)return function(t,r){if(!r_(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const a=[];let c=0;for(const h of t){let y=bu(h,r.ra(c));null==y&&(y={nullValue:"NULL_VALUE"}),a.push(y),c++}return{arrayValue:{values:a}}}(n,e)}return function(t,r){if(null===(t=(0,$t.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return jE(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=$n.fromDate(t);return{timestampValue:Jp(r.wt,a)}}if(t instanceof $n){const a=new $n(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Jp(r.wt,a)}}if(t instanceof rf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Sa)return{bytesValue:gC(r.wt,t._byteString)};if(t instanceof Nn){const a=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw r.oa(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:fy(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${n_(t)}`)}(n,e)}function LD(n,e){const t={};return Lp(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cc(n,(r,a)=>{const c=bu(a,e.ea(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function go(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof $n||n instanceof rf||n instanceof Sa||n instanceof Nn||n instanceof Xl)}function f0(n,e,t){if(!go(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=n_(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function VD(n,e,t){if((e=(0,$t.m9)(e))instanceof Ls)return e._internalPath;if("string"==typeof e)return p0(n,e);throw a_("Field path arguments must be of type string or ",n,!1,void 0,t)}const Dx=new RegExp("[~\\*/\\[\\]]");function p0(n,e,t){if(e.search(Dx)>=0)throw a_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ls(...e.split("."))._internalPath}catch(r){throw a_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function a_(n,e,t,r,a){const c=r&&!r.isEmpty(),h=void 0!==a;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let b="";return(c||h)&&(b+=" (found",c&&(b+=` in field ${r}`),h&&(b+=` in document ${a}`),b+=")"),new xe(fe.INVALID_ARGUMENT,y+n+b)}function UD(n,e){return n.some(t=>t.isEqual(e))}class Sg{constructor(e,t,r,a,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new TM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(u_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class TM extends Sg{data(){return super.data()}}function u_(n,e){return"string"==typeof e?p0(n,e):e instanceof Ls?e._internalPath:e._delegate._internalPath}class jc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Iu extends Sg{constructor(e,t,r,a,c,h){super(e,t,r,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(u_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class xg extends Iu{data(e={}){return super.data(e)}}class Cu{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new jc(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new xg(this._firestore,this._userDataWriter,r.key,r,new jc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new xg(r._firestore,r._userDataWriter,h.doc.key,h.doc,new jc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||3!==h.type).map(h=>{const y=new xg(r._firestore,r._userDataWriter,h.doc.key,h.doc,new jc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let b=-1,D=-1;return 0!==h.type&&(b=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),1!==h.type&&(c=c.add(h.doc),D=c.indexOf(h.doc.key)),{type:Tx(h.type),doc:y,oldIndex:b,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Tx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je()}}function Ax(n,e){return n instanceof Iu&&e instanceof Iu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Cu&&e instanceof Cu&&n._firestore===e._firestore&&c0(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function g0(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class of{}function $c(n,...e){for(const t of e)n=t._apply(n);return n}class Sx extends of{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=wu(e.firestore),r=function(a,c,h,y,b,D,x){let P;if(b.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new xe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){GD(x,D);const ee=[];for(const ye of x)ee.push(HD(y,a,ye));P={arrayValue:{values:ee}}}else P=HD(y,a,x)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||GD(x,D),P=h0(h,"where",x,"in"===D||"not-in"===D);const z=pi.create(b,D,P);return function(ee,ye){if(ye.ht()){const $e=kE(ee);if(null!==$e&&!$e.isEqual(ye.field))throw new xe(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${$e.toString()}' and '${ye.field.toString()}'`);const xt=$l(ee);null!==xt&&v0(0,ye.field,xt)}const Le=function($e,xt){for(const kt of $e.filters)if(xt.indexOf(kt.op)>=0)return kt.op;return null}(ee,function($e){switch($e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ye.op));if(null!==Le)throw new xe(fe.INVALID_ARGUMENT,Le===ye.op?`Invalid query. You cannot use more than one '${ye.op.toString()}' filter.`:`Invalid query. You cannot use '${ye.op.toString()}' filters with '${Le.toString()}' filters.`)}(a,z),z}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new yi(e.firestore,e.converter,function(a,c){const h=a.filters.concat([c]);return new ba(a.path,a.collectionGroup,a.explicitOrderBy.slice(),h,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}class Rg extends of{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,a,c){if(null!==r.startAt)throw new xe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new wh(a,c);return function(y,b){if(null===$l(y)){const D=kE(y);null!==D&&v0(0,D,b.field)}}(r,h),h}(e._query,this.fa,this.wa);return new yi(e.firestore,e.converter,function(r,a){const c=r.explicitOrderBy.concat([a]);return new ba(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class y0 extends of{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new yi(e.firestore,e.converter,LE(e._query,this.ma,this.ga))}}class Mx extends of{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=$D(e,this.type,this.ya,this.pa);return new yi(e.firestore,e.converter,(a=t,new ba((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt)));var r,a}}class _0 extends of{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=$D(e,this.type,this.ya,this.pa);return new yi(e.firestore,e.converter,(a=t,new ba((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,a)));var r,a}}function $D(n,e,t,r){if(t[0]=(0,$t.m9)(t[0]),t[0]instanceof Sg)return function(a,c,h,y,b){if(!y)throw new xe(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const D=[];for(const x of Ih(a))if(x.field.isKeyField())D.push(jl(c,y.key));else{const P=y.data.field(x.field);if(TE(P))throw new xe(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===P){const z=x.field.canonicalString();throw new xe(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${z}' (used as the orderBy) does not exist.`)}D.push(P)}return new wa(D,b)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=wu(n.firestore);return function(c,h,y,b,D,x){const P=c.explicitOrderBy;if(D.length>P.length)throw new xe(fe.INVALID_ARGUMENT,`Too many arguments provided to ${b}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const z=[];for(let ee=0;ee<D.length;ee++){const ye=D[ee];if(P[ee].field.isKeyField()){if("string"!=typeof ye)throw new xe(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${b}(), but got a ${typeof ye}`);if(!FE(c)&&-1!==ye.indexOf("/"))throw new xe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${b}() must be a plain document ID, but '${ye}' contains a slash.`);const Le=c.path.child(nn.fromString(ye));if(!qe.isDocumentKey(Le))throw new xe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${b}() must result in a valid document path, but '${Le}' is not because it contains an odd number of segments.`);const $e=new qe(Le);z.push(jl(h,$e))}else{const Le=h0(y,b,ye);z.push(Le)}}return new wa(z,x)}(n._query,n.firestore._databaseId,a,e,t,r)}}function HD(n,e,t){if("string"==typeof(t=(0,$t.m9)(t))){if(""===t)throw new xe(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FE(e)&&-1!==t.indexOf("/"))throw new xe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nn.fromString(t));if(!qe.isDocumentKey(r))throw new xe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jl(n,new qe(r))}if(t instanceof Nn)return jl(n,t._key);throw new xe(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${n_(t)}.`)}function GD(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function v0(n,e,t){if(!t.isEqual(e))throw new xe(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const xM={maxAttempts:5};class qD{convertValue(e,t="none"){switch(Bl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Je()}}convertObject(e,t){const r={};return Cc(e.fields,(a,c)=>{r[a]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new rf(rr(e.latitude),rr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=qI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Up(e));default:return null}}convertTimestamp(e){const t=mu(e);return new $n(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nn.fromString(e);It(ew(r));const a=new yu(r.get(1),r.get(3)),c=new qe(r.popFirst(5));return a.isEqual(t)||Rr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function c_(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class E0 extends qD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}}class $r{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wu(e)}set(e,t,r){this._verifyNotCommitted();const a=ed(e,this._firestore),c=c_(a.converter,t,r),h=Tg(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,r);return this._mutations.push(h.toMutation(a._key,sr.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const c=ed(e,this._firestore);let h;return h="string"==typeof(t=(0,$t.m9)(t))||t instanceof Ls?o_(this._dataReader,"WriteBatch.update",c._key,t,r,a):Ag(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(h.toMutation(c._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ed(e,this._firestore);return this._mutations=this._mutations.concat(new Rh(t._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ed(n,e){if((n=(0,$t.m9)(n)).firestore!==e)throw new xe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Hc extends qD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}}function Gc(n,e,t){n=Qt(n,Nn);const r=Qt(n.firestore,or),a=c_(n.converter,e,t);return af(r,[Tg(wu(r),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,sr.none())])}function w0(n,e,t,...r){n=Qt(n,Nn);const a=Qt(n.firestore,or),c=wu(a);let h;return h="string"==typeof(e=(0,$t.m9)(e))||e instanceof Ls?o_(c,"updateDoc",n._key,e,t,r):Ag(c,"updateDoc",n._key,e),af(a,[h.toMutation(n._key,sr.exists(!0))])}function ZD(n,...e){var t,r,a;n=(0,$t.m9)(n);let c={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||MD(e[h])||(c=e[h],h++);const y={includeMetadataChanges:c.includeMetadataChanges};if(MD(e[h])){const P=e[h];e[h]=null===(t=P.next)||void 0===t?void 0:t.bind(P),e[h+1]=null===(r=P.error)||void 0===r?void 0:r.bind(P),e[h+2]=null===(a=P.complete)||void 0===a?void 0:a.bind(P)}let b,D,x;if(n instanceof Nn)D=Qt(n.firestore,or),x=bh(n._key.path),b={next:P=>{e[h]&&e[h](Mg(D,n,P))},error:e[h+1],complete:e[h+2]};else{const P=Qt(n,yi);D=Qt(P.firestore,or),x=P._query;const z=new Hc(D);b={next:ee=>{e[h]&&e[h](new Cu(D,z,P,ee))},error:e[h+1],complete:e[h+2]},g0(n._query)}return function(P,z,ee,ye){const Le=new t_(ye),$e=new yg(z,Le,ee);return P.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return mg(yield bg(P),$e)})),()=>{Le.Tc(),P.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Vw(yield bg(P),$e)}))}}(jr(D),x,y,b)}function af(n,e){return function(t,r){const a=new Mr;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(n,e,t){return Gw.apply(this,arguments)}(yield AD(t),r,a)})),a.promise}(jr(n),e)}function Mg(n,e,t){const r=t.docs.get(e._key),a=new Hc(n);return new Iu(n,a,e._key,r,new jc(t.hasPendingWrites,t.fromCache),e.converter)}class KD extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wu(e)}get(e){const t=ed(e,this._firestore),r=new E0(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Je();const c=a[0];if(c.isFoundDocument())return new Sg(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new Sg(this._firestore,r,t._key,null,t.converter);throw Je()})}set(e,t,r){const a=ed(e,this._firestore),c=c_(a.converter,t,r),h=Tg(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,r);return this._transaction.set(a._key,h),this}update(e,t,r,...a){const c=ed(e,this._firestore);let h;return h="string"==typeof(t=(0,$t.m9)(t))||t instanceof Ls?o_(this._dataReader,"Transaction.update",c._key,t,r,a):Ag(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,h),this}delete(e){const t=ed(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ed(e,this._firestore),r=new Hc(this._firestore);return super.get(e).then(a=>new Iu(this._firestore,r,t._key,a._document,new jc(!1,!1),t.converter))}}function C0(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function YD(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function QD(){if("undefined"==typeof atob)throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){wc=Ti.SDK_VERSION,(0,Ti._registerComponent)(new Bd.wA("firestore",(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),c=new or(a,new kI(t.getProvider("auth-internal")),new VI(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),c._setSettings(r),c},"PUBLIC")),(0,Ti.registerVersion)(NI,"3.4.11",n),(0,Ti.registerVersion)(NI,"3.4.11","esm2017")}();class Ng{constructor(e){this._delegate=e}static fromBase64String(e){return QD(),new Ng(Sa.fromBase64String(e))}static fromUint8Array(e){return YD(),new Ng(Sa.fromUint8Array(e))}toBase64(){return QD(),this._delegate.toBase64()}toUint8Array(){return YD(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function JD(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class jx{enableIndexedDbPersistence(e,t){return function(n,e){OD(n=Qt(n,or));const t=jr(n),r=n._freezeSettings(),a=new s0;return vx(t,a,new r0(a,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){OD(n=Qt(n,or));const e=jr(n),t=n._freezeSettings(),r=new s0;return vx(e,r,new _D(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new xe(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Mr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!ho.V())return Promise.resolve();const a=r+"main";yield ho.delete(a)}),function(r){return t.apply(this,arguments)})(mw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class XD{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof yu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ph("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var a;const c=(n=Qt(n,Ig))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&ph("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,y;if("string"==typeof r.mockUserToken)h=r.mockUserToken,y=Br.MOCK_USER;else{h=(0,$t.Sg)(r.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new xe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Br(b)}n._authCredentials=new PI(new wE(h,y))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield nx(n),t=yield rx(n);return e.setNetworkEnabled(!0),function(r){const a=Ke(r);return a.lu.delete(0),Qi(a)}(t)}))}(jr(n=Qt(n,or)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield nx(n),t=yield rx(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(a){const c=Ke(a);c.lu.add(0),yield Zh(c),c._u.set("Offline")}),function(a){return r.apply(this,arguments)})(t);var r}))}(jr(n=Qt(n,or)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,fx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Mr;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(n,e){return _g.apply(this,arguments)}(yield AD(e),t)})),t.promise}(jr(n=Qt(n,or)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new t_(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield bg(n),a=t,Ke(r).Tu.add(a),void a.next();var r,a})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield bg(n),a=t,void Ke(r).Tu.delete(a);var r,a}))}}(jr(n=Qt(n,or)),MD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new uf(this,u0(this._delegate,e))}catch(t){throw Xi(t,"collection()","Firestore.collection()")}}doc(e){try{return new mo(this,Cg(this._delegate,e))}catch(t){throw Xi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new es(this,function(n,e){if(n=Qt(n,Ig),xD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new yi(n,null,(t=e,new ba(nn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Xi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e,t){n=Qt(n,or);const r=Object.assign(Object.assign({},xM),t);return function(a){if(a.maxAttempts<1)throw new xe(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(n,e,t){const r=new Mr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const a=yield(c=n,o0(c).then(h=>h.datastore));var c;new hM(n.asyncQueue,a,t,e,r).run()})),r.promise}(jr(n),a=>e(new KD(n,a)),r)}(this._delegate,t=>e(new eT(this,t)))}batch(){return jr(this._delegate),new tT(new $r(this._delegate,e=>af(this._delegate,e)))}loadBundle(e){return function(n,e){const t=jr(n=Qt(n,or)),r=new _M;return function(n,e,t,r){const a=function(c,h){let y;return y="string"==typeof c?(new TextEncoder).encode(c):c,b=function(b,D){if(b instanceof Uint8Array)return vD(b,D);if(b instanceof ArrayBuffer)return vD(new Uint8Array(b),D);if(b instanceof ReadableStream)return b.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new ED(b,h);var b}(t,hg(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function(n,e,t){const r=Ke(n);var a;(a=(0,_e.Z)(function*(c,h,y){try{const b=yield h.getMetadata();if(yield function(z,ee){const ye=Ke(z),Le=ti(ee.createTime);return ye.persistence.runTransaction("hasNewerBundle","readonly",$e=>ye.Ds.getBundleMetadata($e,ee.id)).then($e=>!!$e&&$e.createTime.compareTo(Le)>=0)}(c.localStore,b))return yield h.close(),y._completeWith({taskState:"Success",documentsLoaded:(z=b).totalDocuments,bytesLoaded:z.totalBytes,totalDocuments:z.totalDocuments,totalBytes:z.totalBytes}),Promise.resolve(new Set);y._updateProgress(qy(b));const D=new jw(b,c.localStore,h.wt);let x=yield h.fc();for(;x;){const z=yield D.Nu(x);z&&y._updateProgress(z),x=yield h.fc()}const P=yield D.complete();return yield po(c,P.Mu,void 0),yield function(z,ee){const ye=Ke(z);return ye.persistence.runTransaction("Save bundle","readwrite",Le=>ye.Ds.saveBundleMetadata(Le,ee))}(c.localStore,b),y._completeWith(P.progress),Promise.resolve(P.Ou)}catch(b){return ph("SyncEngine",`Loading bundle failed with ${b}`),y._failWith(b),Promise.resolve(new Set)}var z}),function(c,h,y){return a.apply(this,arguments)})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}(yield AD(n),a,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const a=Ke(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.Ds.getNamedQuery(c,r))}(yield TD(n),e)}))}(jr(n=Qt(n,or)),e).then(t=>t?new yi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new es(this,t):null)}}class D0 extends qD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ng(new Sa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return mo.forKey(t,this.firestore,null)}}class eT{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new D0(e)}get(e){const t=nd(e);return this._delegate.get(t).then(r=>new Og(this._firestore,new Iu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=nd(e);return r?(C0("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=nd(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=nd(e);return this._delegate.delete(t),this}}class tT{constructor(e){this._delegate=e}set(e,t,r){const a=nd(e);return r?(C0("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=nd(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=nd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class td{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new xg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Pg(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=td.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let c=a.get(t);return c||(c=new td(e,new D0(e),t),a.set(t,c)),c}}td.INSTANCES=new WeakMap;class mo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new D0(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new mo(t,new Nn(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new mo(t,new Nn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new uf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new uf(this.firestore,u0(this._delegate,e))}catch(t){throw Xi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,$t.m9)(e))instanceof Nn&&Dg(this._delegate,e)}set(e,t){t=C0("DocumentReference.set",t);try{return t?Gc(this._delegate,e,t):Gc(this._delegate,e)}catch(r){throw Xi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?w0(this._delegate,e):w0(this._delegate,e,t,...r)}catch(a){throw Xi(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return af(Qt(n.firestore,or),[new Rh(n._key,sr.none())])}(this._delegate)}onSnapshot(...e){const t=yo(e),r=nT(e,a=>new Og(this.firestore,new Iu(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return ZD(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Qt(n,Nn);const e=Qt(n.firestore,or),t=jr(e),r=new Hc(e);return function(n,e){const t=new Mr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(a,c,h){try{const y=yield function(b,D){const x=Ke(b);return x.persistence.runTransaction("read document","readonly",P=>x.localDocuments.getDocument(P,D))}(a,c);y.isFoundDocument()?h.resolve(y):y.isNoDocument()?h.resolve(null):h.reject(new xe(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const b=Jh(y,`Failed to get document '${c} from cache`);h.reject(b)}}),function(a,c,h){return r.apply(this,arguments)})(yield TD(n),e,t);var r})),t.promise}(t,n._key).then(a=>new Iu(e,r,n._key,a,new jc(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Qt(n,Nn);const e=Qt(n.firestore,or);return ax(jr(e),n._key,{source:"server"}).then(t=>Mg(e,n,t))}(this._delegate):function(n){n=Qt(n,Nn);const e=Qt(n.firestore,or);return ax(jr(e),n._key).then(t=>Mg(e,n,t))}(this._delegate),t.then(r=>new Og(this.firestore,new Iu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new mo(this.firestore,this._delegate.withConverter(e?td.getInstance(this.firestore,e):null))}}function Xi(n,e,t){return n.message=n.message.replace(e,t),n}function yo(n){for(const e of n)if("object"==typeof e&&!JD(e))return e;return{}}function nT(n,e){var t,r;let a;return a=JD(n[0])?n[0]:JD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}class Og{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new mo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Ax(this._delegate,e._delegate)}}class Pg extends Og{data(e){const t=this._delegate.data(e);return function(n,e){n||Je()}(void 0!==t),t}}class es{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new D0(e)}where(e,t,r){try{return new es(this.firestore,$c(this._delegate,function(n,e,t){const r=e,a=u_("where",n);return new Sx(a,r,t)}(e,t,r)))}catch(a){throw Xi(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new es(this.firestore,$c(this._delegate,function(n,e="asc"){const t=e,r=u_("orderBy",n);return new Rg(r,t)}(e,t)))}catch(r){throw Xi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new es(this.firestore,$c(this._delegate,function(n){return Jl("limit",n),new y0("limit",n,"F")}(e)))}catch(t){throw Xi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new es(this.firestore,$c(this._delegate,function(n){return Jl("limitToLast",n),new y0("limitToLast",n,"L")}(e)))}catch(t){throw Xi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new es(this.firestore,$c(this._delegate,function(...n){return new Mx("startAt",n,!0)}(...e)))}catch(t){throw Xi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new es(this.firestore,$c(this._delegate,function(...n){return new Mx("startAfter",n,!1)}(...e)))}catch(t){throw Xi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new es(this.firestore,$c(this._delegate,function(...n){return new _0("endBefore",n,!1)}(...e)))}catch(t){throw Xi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new es(this.firestore,$c(this._delegate,function(...n){return new _0("endAt",n,!0)}(...e)))}catch(t){throw Xi(t,"endAt()","Query.endAt()")}}isEqual(e){return c0(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Qt(n,yi);const e=Qt(n.firestore,or),t=jr(e),r=new Hc(e);return function(n,e){const t=new Mr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(a,c,h){try{const y=yield Ny(a,c,!0),b=new uD(c,y.ji),D=b.Ku(y.documents),x=b.applyChanges(D,!1);h.resolve(x.snapshot)}catch(y){const b=Jh(y,`Failed to execute query '${c} against cache`);h.reject(b)}}),function(a,c,h){return r.apply(this,arguments)})(yield TD(n),e,t);var r})),t.promise}(t,n._query).then(a=>new Cu(e,r,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Qt(n,yi);const e=Qt(n.firestore,or),t=jr(e),r=new Hc(e);return ux(t,n._query,{source:"server"}).then(a=>new Cu(e,r,n,a))}(this._delegate):function(n){n=Qt(n,yi);const e=Qt(n.firestore,or),t=jr(e),r=new Hc(e);return g0(n._query),ux(t,n._query).then(a=>new Cu(e,r,n,a))}(this._delegate),t.then(r=>new T0(this.firestore,new Cu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=yo(e),r=nT(e,a=>new T0(this.firestore,new Cu(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return ZD(this._delegate,t,r)}withConverter(e){return new es(this.firestore,this._delegate.withConverter(e?td.getInstance(this.firestore,e):null))}}class kM{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Pg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class T0{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new es(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Pg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new kM(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Pg(this._firestore,r))})}isEqual(e){return Ax(this._delegate,e._delegate)}}class uf extends es{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new mo(this.firestore,e):null}doc(e){try{return new mo(this.firestore,void 0===e?Cg(this._delegate):Cg(this._delegate,e))}catch(t){throw Xi(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Qt(n.firestore,or),r=Cg(n),a=c_(n.converter,e);return af(t,[Tg(wu(n.firestore),"addDoc",r._key,a,null!==n.converter,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new mo(this.firestore,t))}isEqual(e){return Dg(this._delegate,e._delegate)}withConverter(e){return new uf(this.firestore,this._delegate.withConverter(e?td.getInstance(this.firestore,e):null))}}function nd(n){return Qt(n,Nn)}class rd{constructor(...e){this._delegate=new Ls(...e)}static documentId(){return new rd(lr.keyField().canonicalString())}isEqual(e){return(e=(0,$t.m9)(e))instanceof Ls&&this._delegate._internalPath.isEqual(e._internalPath)}}class qc{constructor(e){this._delegate=e}static serverTimestamp(){const e=new s_("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new qc(e)}static delete(){const e=new sf("deleteField");return e._methodName="FieldValue.delete",new qc(e)}static arrayUnion(...e){const t=function(...n){return new FD("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new qc(t)}static arrayRemove(...e){const t=function(...n){return new Ix("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new qc(t)}static increment(e){const t=function(n){return new Cx("increment",n)}(e);return t._methodName="FieldValue.increment",new qc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const FM={Firestore:XD,GeoPoint:rf,Timestamp:$n,Blob:Ng,Transaction:eT,WriteBatch:tT,DocumentReference:mo,DocumentSnapshot:Og,Query:es,QueryDocumentSnapshot:Pg,QuerySnapshot:T0,CollectionReference:uf,FieldPath:rd,FieldValue:qc,setLogLevel:function(n){!function(n){pu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Hx(n,e){return function(n,e=oA.z){return new ln.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function S0(n,e){return Hx(n,e).pipe((0,pt.U)(t=>({payload:t,type:"query"})))}function f_(n,e){return S0(n,e).pipe(bm(void 0),Tl(),(0,pt.U)(([t,r])=>{const a=r.payload.docChanges(),c=a.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,y)=>{const b=a.find(x=>x.doc.ref.isEqual(h.ref)),D=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(h.ref));b&&JSON.stringify(b.doc.metadata)===JSON.stringify(h.metadata)||!b&&D&&JSON.stringify(D.metadata)===JSON.stringify(h.metadata)||c.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:h}})}),c}))}function rT(n,e,t){return f_(n,t).pipe(_a((r,a)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return x0(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return x0(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return x0(n,e.oldIndex,1)}return n}(n,r))}),n}(r,a.map(c=>c.payload),e),[]),t=>t.lift(new Lb(void 0,void 0)),(0,pt.U)(r=>r.map(a=>({type:a.type,payload:a}))))}function x0(n,e,t,...r){const a=n.slice();return a.splice(e,t,...r),a}function iT(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,e){n.INTERNAL.registerComponent(new Bd.wA("firestore-compat",t=>((e,t)=>new XD(e,t,new jx))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},FM)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.20")}(wv.Z);class _o{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=f_(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pt.U)(r=>r.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(bm(void 0),Tl(),qi(([r,a])=>a.length>0||!r),(0,pt.U)(([r,a])=>a),Qr.iC)}auditTrail(e){return this.stateChanges(e).pipe(_a((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=iT(e);return rT(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qr.iC)}valueChanges(e={}){return S0(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Qr.iC)}get(e){return(0,Fn.D)(this.query.get(e)).pipe(Qr.iC)}add(e){return this.ref.add(e)}doc(e){return new qx(this.ref.doc(e),this.afs)}}class qx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:a,query:c}=p_(r,t);return new _o(a,c,this.afs)}snapshotChanges(){return function(n,e){return Hx(n,e).pipe(bm(void 0),Tl(),(0,pt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Qr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Fn.D)(this.ref.get(e)).pipe(Qr.iC)}}class sT{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?f_(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),qi(t=>t.length>0),Qr.iC):f_(this.query,this.afs.schedulers.outsideAngular).pipe(Qr.iC)}auditTrail(e){return this.stateChanges(e).pipe(_a((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=iT(e);return rT(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qr.iC)}valueChanges(e={}){return S0(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(r=>r.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),Qr.iC)}get(e){return(0,Fn.D)(this.query.get(e)).pipe(Qr.iC)}}const oT=new f.OlP("angularfire2.enableFirestorePersistence"),R0=new f.OlP("angularfire2.firestore.persistenceSettings"),aT=new f.OlP("angularfire2.firestore.settings"),uT=new f.OlP("angularfire2.firestore.use-emulator");function p_(n,e=(t=>t)){return{query:e(n),ref:n}}let g_=(()=>{class n{constructor(t,r,a,c,h,y,b,D,x,P,z,ee,ye,Le,$e,xt,kt){this.schedulers=b;const Lt=(0,Di.on)(t,y,r),Rt=x;P&&uu(Lt,y,z,ye,Le,$e,ee,xt),[this.firestore,this.persistenceEnabled$]=(0,Di.cc)(`${Lt.name}.firestore`,"AngularFirestore",Lt.name,()=>{const en=y.runOutsideAngular(()=>Lt.firestore());if(c&&en.settings(c),Rt&&en.useEmulator(...Rt),a&&!Jo(h)){const In=()=>{try{return(0,Fn.D)(en.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(vs){return"undefined"!=typeof console&&console.warn(vs),(0,lt.of)(!1)}};return[en,y.runOutsideAngular(In)]}return[en,(0,lt.of)(!1)]},[c,Rt,a])}collection(t,r){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:h}=p_(a,r),y=this.schedulers.ngZone.run(()=>c);return new _o(y,h,this)}collectionGroup(t,r){const a=r||(h=>h),c=this.firestore.collectionGroup(t);return new sT(a(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>r);return new qx(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Di.Dh),f.LFG(Di.xv,8),f.LFG(oT,8),f.LFG(aT,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Qr.HU),f.LFG(R0,8),f.LFG(uT,8),f.LFG(ap,8),f.LFG(Pb,8),f.LFG(_v,8),f.LFG(Em,8),f.LFG(vv,8),f.LFG(wm,8),f.LFG(kb,8),f.LFG(Ob,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),M0=(()=>{class n{constructor(){au.Z.registerVersion("angularfire",Qr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:oT,useValue:!0},{provide:R0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[g_]}),n})();class ys extends di.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Yr.N;return this._value}next(e){super.next(this._value=e)}}class m_ extends io.L{notifyNext(e,t,r,a,c){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class cT extends io.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var lT=F(7444);function Wx(n,e,t,r,a=new cT(n,t,r)){if(!a.closed)return e instanceof ln.y?e.subscribe(a):(0,lT.s)(e)(a)}var zx=F(6693);const N0={};class Kx{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Yx(e,this.resultSelector))}}class Yx extends m_{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(N0),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(Wx(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const a=this.values,h=this.toRespond?a[r]===N0?--this.toRespond:this.toRespond:0;a[r]=t,0===h&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}function cf(n){return new ln.y(e=>{let t;try{t=n()}catch(a){return void e.error(a)}return(t?(0,Fn.D)(t):(0,lc.c)()).subscribe(e)})}var Qx=F(2441);function Er(n){return function(t){const r=new kg(n),a=t.lift(r);return r.caught=a}}class kg{constructor(e){this.selector=e}call(e,t){return t.subscribe(new y_(e,this.selector,this.caught))}}class y_ extends iu.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const r=new iu.IY(this);this.add(r);const a=(0,iu.ft)(t,r);a!==r&&this.add(a)}}}var Pi=F(9773);function Wc(n,e){return(0,Pi.zg)(n,e,1)}function Fg(n){return function(t){return 0===n?(0,lc.c)():t.lift(new dT(n))}}class dT{constructor(e){if(this.total=e,this.total<0)throw new W_}call(e,t){return t.subscribe(new __(e,this.total))}}class __ extends io.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,a=this.count++;t.length<r?t.push(e):t[a%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,a=this.ring;for(let c=0;c<r;c++){const h=t++%r;e.next(a[h])}}e.complete()}}var _s=F(8307),Xx=F(1307);class hT{constructor(e){this.callback=e}call(e,t){return t.subscribe(new tR(e,this.callback))}}class tR extends io.L{constructor(e,t){super(e),this.add(new ma.w(t))}}class Du{constructor(e,t){this.id=e,this.url=t}}class O0 extends Du{constructor(e,t,r="imperative",a=null){super(e,t),this.navigationTrigger=r,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vo extends Du{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class lf extends Du{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class P0 extends Du{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nR extends Du{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rR extends Du{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iR extends Du{constructor(e,t,r,a,c){super(e,t),this.urlAfterRedirects=r,this.state=a,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class k0 extends Du{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sR extends Du{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class F0{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class L0{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class oR{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aR{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uR{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tu{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class df{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pt="primary";class v_{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Zo(n){return new v_(n)}const fT="ngNavigationCancelingError";function V0(n){const e=Error("NavigationCancelingError: "+n);return e[fT]=!0,e}function pT(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const a={};for(let c=0;c<r.length;c++){const h=r[c],y=n[c];if(h.startsWith(":"))a[h.substring(1)]=y;else if(h!==y.path)return null}return{consumed:n.slice(0,r.length),posParams:a}}function Ko(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let a;for(let c=0;c<t.length;c++)if(a=t[c],!U0(n[a],e[a]))return!1;return!0}function U0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((a,c)=>r[c]===a)}return n===e}function E_(n){return Array.prototype.concat.apply([],n)}function mT(n){return n.length>0?n[n.length-1]:null}function si(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ki(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,Fn.D)(Promise.resolve(n)):(0,lt.of)(n)}const lR={exact:function hR(n,e,t){if(!ff(n.segments,e.segments)||!j0(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!hR(n.children[r],e.children[r],t))return!1;return!0},subset:_T},yT={exact:function(n,e){return Ko(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>U0(n[t],e[t]))},ignored:()=>!0};function dR(n,e,t){return lR[t.paths](n.root,e.root,t.matrixParams)&&yT[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function _T(n,e,t){return vT(n,e,e.segments,t)}function vT(n,e,t,r){if(n.segments.length>t.length){const a=n.segments.slice(0,t.length);return!(!ff(a,t)||e.hasChildren()||!j0(a,t,r))}if(n.segments.length===t.length){if(!ff(n.segments,t)||!j0(n.segments,t,r))return!1;for(const a in e.children)if(!n.children[a]||!_T(n.children[a],e.children[a],r))return!1;return!0}{const a=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(ff(n.segments,a)&&j0(n.segments,a,r)&&n.children[Pt])&&vT(n.children[Pt],e,c,r)}}function j0(n,e,t){return e.every((r,a)=>yT[t](n[a].parameters,r.parameters))}class hf{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zo(this.queryParams)),this._queryParamMap}toString(){return i.serialize(this)}}class rn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,si(t,(r,a)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return s(this)}}class w_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Zo(this.parameters)),this._parameterMap}toString(){return C(this)}}function ff(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class ET{}class pR{parse(e){const t=new Ee(e);return new hf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){return`${`/${o(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(a=>`${l(t)}=${l(a)}`).join("&"):`${l(t)}=${l(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${function(n){return encodeURI(n)}(e.fragment)}`:""}`}}const i=new pR;function s(n){return n.segments.map(e=>C(e)).join("/")}function o(n,e){if(!n.hasChildren())return s(n);if(e){const t=n.children[Pt]?o(n.children[Pt],!1):"",r=[];return si(n.children,(a,c)=>{c!==Pt&&r.push(`${c}:${o(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return si(n.children,(r,a)=>{a===Pt&&(t=t.concat(e(r,a)))}),si(n.children,(r,a)=>{a!==Pt&&(t=t.concat(e(r,a)))}),t}(n,(r,a)=>a===Pt?[o(n.children[Pt],!1)]:[`${a}:${o(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Pt]?`${s(n)}/${t[0]}`:`${s(n)}/(${t.join("//")})`}}function u(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function l(n){return u(n).replace(/%3B/gi,";")}function g(n){return u(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _(n){return decodeURIComponent(n)}function w(n){return _(n.replace(/\+/g,"%20"))}function C(n){return`${g(n.path)}${function(n){return Object.keys(n).map(e=>`;${g(e)}=${g(n[e])}`).join("")}(n.parameters)}`}const k=/^[^\/()?;=#]+/;function H(n){const e=n.match(k);return e?e[0]:""}const Y=/^[^=?&#]+/,ie=/^[^?&#]+/;class Ee{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Pt]=new rn(e,t)),r}parseSegment(){const e=H(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new w_(_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=H(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=H(this.remaining);a&&(r=a,this.capture(r))}e[_(t)]=_(r)}parseQueryParam(e){const t=function(n){const e=n.match(Y);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function(n){const e=n.match(ie);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const a=w(t),c=w(r);if(e.hasOwnProperty(a)){let h=e[a];Array.isArray(h)||(h=[h],e[a]=h),h.push(c)}else e[a]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=H(this.remaining),a=this.remaining[r.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let c;r.indexOf(":")>-1?(c=r.substr(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=Pt);const h=this.parseChildren();t[c]=1===Object.keys(h).length?h[Pt]:new rn([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ot{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=vt(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=vt(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Gt(e,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==e)}pathFromRoot(e){return Gt(e,this._root).map(t=>t.value)}}function vt(n,e){if(n===e.value)return e;for(const t of e.children){const r=vt(n,t);if(r)return r}return null}function Gt(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Gt(n,t);if(r.length)return r.unshift(e),r}return[]}class On{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Fi(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class pf extends ot{constructor(e,t){super(e),this.snapshot=t,Lg(this,e)}toString(){return this.snapshot.toString()}}function id(n,e){const t=function(n,e){const h=new mf([],{},{},"",{},Pt,e,null,n.root,-1,{});return new I_("",new On(h,[]))}(n,e),r=new ys([new w_("",{})]),a=new ys({}),c=new ys({}),h=new ys({}),y=new ys(""),b=new Yo(r,a,h,y,c,Pt,e,t.root);return b.snapshot=t.root,new pf(new On(b,[]),t)}class Yo{constructor(e,t,r,a,c,h,y,b){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=c,this.outlet=h,this.component=y,this._futureSnapshot=b}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(e=>Zo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(e=>Zo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function b_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const a=t[r],c=t[r-1];if(a.routeConfig&&""===a.routeConfig.path)r--;else{if(c.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class mf{constructor(e,t,r,a,c,h,y,b,D,x,P){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=c,this.outlet=h,this.component=y,this.routeConfig=b,this._urlSegment=D,this._lastPathIndex=x,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class I_ extends ot{constructor(e,t){super(t),this.url=e,Lg(this,t)}toString(){return GM(this._root)}}function Lg(n,e){e.value._routerState=n,e.children.forEach(t=>Lg(n,t))}function GM(n){const e=n.children.length>0?` { ${n.children.map(GM).join(", ")} } `:"";return`${n.value}${e}`}function gR(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ko(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ko(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ko(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ko(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function mR(n,e){return Ko(n.params,e.params)&&function(n,e){return ff(n,e)&&n.every((t,r)=>Ko(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||mR(n.parent,e.parent))}function wT(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const a=function(n,e,t){return e.children.map(r=>{for(const a of t.children)if(n.shouldReuseRoute(r.value,a.value.snapshot))return wT(n,r,a);return wT(n,r)})}(n,e,t);return new On(r,a)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const h=c.route;return qM(e,h),h}}const r=function(n){return new Yo(new ys(n.url),new ys(n.params),new ys(n.queryParams),new ys(n.fragment),new ys(n.data),n.outlet,n.component,n)}(e.value),a=e.children.map(c=>wT(n,c));return new On(r,a)}}function qM(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)qM(n.children[t],e.children[t])}function bT(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function H0(n){return"object"==typeof n&&null!=n&&n.outlets}function yR(n,e,t,r,a){let c={};return r&&si(r,(h,y)=>{c[y]=Array.isArray(h)?h.map(b=>`${b}`):`${h}`}),new hf(t.root===n?e:WM(t.root,n,e),c,a)}function WM(n,e,t){const r={};return si(n.children,(a,c)=>{r[c]=a===e?t:WM(a,e,t)}),new rn(n.segments,r)}class zM{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&bT(r[0]))throw new Error("Root segment cannot have matrix parameters");const a=r.find(H0);if(a&&a!==mT(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class _R{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ZM(n,e,t){if(n||(n=new rn([],{})),0===n.segments.length&&n.hasChildren())return IT(n,e,t);const r=function(n,e,t){let r=0,a=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(r>=t.length)return c;const h=n.segments[a],y=t[r];if(H0(y))break;const b=`${y}`,D=r<t.length-1?t[r+1]:null;if(a>0&&void 0===b)break;if(b&&D&&"object"==typeof D&&void 0===D.outlets){if(!YM(b,D,h))return c;r+=2}else{if(!YM(b,{},h))return c;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(n,e,t),a=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new rn(n.segments.slice(0,r.pathIndex),{});return c.children[Pt]=new rn(n.segments.slice(r.pathIndex),n.children),IT(c,0,a)}return r.match&&0===a.length?new rn(n.segments,{}):r.match&&!n.hasChildren()?vR(n,e,t):r.match?IT(n,0,a):vR(n,e,t)}function IT(n,e,t){if(0===t.length)return new rn(n.segments,{});{const r=function(n){return H0(n[0])?n[0].outlets:{[Pt]:n}}(t),a={};return si(r,(c,h)=>{"string"==typeof c&&(c=[c]),null!==c&&(a[h]=ZM(n.children[h],e,c))}),si(n.children,(c,h)=>{void 0===r[h]&&(a[h]=c)}),new rn(n.segments,a)}}function vR(n,e,t){const r=n.segments.slice(0,e);let a=0;for(;a<t.length;){const c=t[a];if(H0(c)){const b=tO(c.outlets);return new rn(r,b)}if(0===a&&bT(t[0])){r.push(new w_(n.segments[e].path,KM(t[0]))),a++;continue}const h=H0(c)?c.outlets[Pt]:`${c}`,y=a<t.length-1?t[a+1]:null;h&&y&&bT(y)?(r.push(new w_(h,KM(y))),a+=2):(r.push(new w_(h,{})),a++)}return new rn(r,{})}function tO(n){const e={};return si(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=vR(new rn([],{}),0,t))}),e}function KM(n){const e={};return si(n,(t,r)=>e[r]=`${t}`),e}function YM(n,e,t){return n==t.path&&Ko(e,t.parameters)}class rO{constructor(e,t,r,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),gR(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const a=Fi(t);e.children.forEach(c=>{const h=c.value.outlet;this.deactivateRoutes(c,a[h],r),delete a[h]}),si(a,(c,h)=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const a=e.value,c=t?t.value:null;if(a===c)if(a.component){const h=r.getContext(a.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),a=r&&e.value.component?r.children:t,c=Fi(e);for(const h of Object.keys(c))this.deactivateRouteAndItsChildren(c[h],a);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const a=Fi(t);e.children.forEach(c=>{this.activateRoutes(c,a[c.value.outlet],r),this.forwardEvent(new Tu(c.value.snapshot))}),e.children.length&&this.forwardEvent(new aR(e.value.snapshot))}activateRoutes(e,t,r){const a=e.value,c=t?t.value:null;if(gR(a),a===c)if(a.component){const h=r.getOrCreateContext(a.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(a.component){const h=r.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const y=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),h.children.onOutletReAttached(y.contexts),h.attachRef=y.componentRef,h.route=y.route.value,h.outlet&&h.outlet.attach(y.componentRef,y.route.value),QM(y.route)}else{const y=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(a.snapshot),b=y?y.module.componentFactoryResolver:null;h.attachRef=null,h.route=a,h.resolver=b,h.outlet&&h.outlet.activateWith(a,b),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}function QM(n){gR(n.value),n.children.forEach(QM)}class ER{constructor(e,t){this.routes=e,this.module=t}}function yf(n){return"function"==typeof n}function Vg(n){return n instanceof hf}const G0=Symbol("INITIAL_VALUE");function q0(){return nr(n=>function(...n){let e,t;return(0,Fb.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Xs.k)(n[0])&&(n=n[0]),(0,zx.n)(n,t).lift(new Kx(e))}(n.map(e=>e.pipe(su(1),bm(G0)))).pipe(_a((e,t)=>{let r=!1;return t.reduce((a,c,h)=>a!==G0?a:(c===G0&&(r=!0),r||!1!==c&&h!==t.length-1&&!Vg(c)?a:c),e)},G0),qi(e=>e!==G0),(0,pt.U)(e=>Vg(e)?e:!0===e),su(1)))}let JM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:function(){return[DR]},encapsulation:2}),n})();function XM(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];lO(r,dO(e,r))}}function lO(n,e){n.children&&XM(n.children,e)}function dO(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function wR(n){const e=n.children&&n.children.map(wR),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pt&&(t.component=JM),t}function xa(n){return n.outlet||Pt}function eN(n,e){const t=n.filter(r=>xa(r)===e);return t.push(...n.filter(r=>xa(r)!==e)),t}const tN={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function CT(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},tN):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(e.matcher||pT)(t,n,e);if(!c)return Object.assign({},tN);const h={};si(c.posParams,(b,D)=>{h[D]=b.path});const y=c.consumed.length>0?Object.assign(Object.assign({},h),c.consumed[c.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:y,positionalParamSegments:null!==(r=c.posParams)&&void 0!==r?r:{}}}function DT(n,e,t,r,a="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>TT(n,e,r)&&xa(r)!==Pt)}(n,t,r)){const h=new rn(e,function(n,e,t,r){const a={};a[Pt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&xa(c)!==Pt){const h=new rn([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,a[xa(c)]=h}return a}(n,e,r,new rn(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>TT(n,e,r))}(n,t,r)){const h=new rn(n.segments,function(n,e,t,r,a,c){const h={};for(const y of r)if(TT(n,t,y)&&!a[xa(y)]){const b=new rn([],{});b._sourceSegment=n,b._segmentIndexShift="legacy"===c?n.segments.length:e.length,h[xa(y)]=b}return Object.assign(Object.assign({},a),h)}(n,e,t,r,n.children,a));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const c=new rn(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function TT(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function nN(n,e,t,r){return!!(xa(n)===r||r!==Pt&&TT(e,t,n))&&("**"===n.path||CT(e,n,t).matched)}function rN(n,e,t){return 0===e.length&&!n.children[t]}class W0{constructor(e){this.segmentGroup=e||null}}class iN{constructor(e){this.urlTree=e}}function AT(n){return new ln.y(e=>e.error(new W0(n)))}function sN(n){return new ln.y(e=>e.error(new iN(n)))}function mO(n){return new ln.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class vO{constructor(e,t,r,a,c){this.configLoader=t,this.urlSerializer=r,this.urlTree=a,this.config=c,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=DT(this.urlTree.root,[],[],this.config).segmentGroup,t=new rn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Pt).pipe((0,pt.U)(c=>this.createUrlTree(bR(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Er(c=>{if(c instanceof iN)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof W0?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Pt).pipe((0,pt.U)(a=>this.createUrlTree(bR(a),e.queryParams,e.fragment))).pipe(Er(a=>{throw a instanceof W0?this.noMatchError(a):a}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const a=e.segments.length>0?new rn([],{[Pt]:e}):e;return new hf(a,t,r)}expandSegmentGroup(e,t,r,a){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,pt.U)(c=>new rn([],c))):this.expandSegment(e,r,t,r.segments,a,!0)}expandChildren(e,t,r){const a=[];for(const c of Object.keys(r.children))"primary"===c?a.unshift(c):a.push(c);return(0,Fn.D)(a).pipe(Wc(c=>{const h=r.children[c],y=eN(t,c);return this.expandSegmentGroup(e,y,h,c).pipe((0,pt.U)(b=>({segment:b,outlet:c})))}),_a((c,h)=>(c[h.outlet]=h.segment,c),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?qi((a,c)=>n(a,c,r)):db.y,Fg(1),t?im(e):FT(()=>new rm))}())}expandSegment(e,t,r,a,c,h){return(0,Fn.D)(r).pipe(Wc(y=>this.expandSegmentAgainstRoute(e,t,r,y,a,c,h).pipe(Er(D=>{if(D instanceof W0)return(0,lt.of)(null);throw D}))),so(y=>!!y),Er((y,b)=>{if(y instanceof rm||"EmptyError"===y.name){if(rN(t,a,c))return(0,lt.of)(new rn([],{}));throw new W0(t)}throw y}))}expandSegmentAgainstRoute(e,t,r,a,c,h,y){return nN(a,t,c,h)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(e,t,a,c,h):y&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h):AT(t):AT(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,a,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,a){const c=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?sN(c):this.lineralizeSegments(r,c).pipe((0,Pi.zg)(h=>{const y=new rn(h,{});return this.expandSegment(e,y,t,h,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h){const{matched:y,consumedSegments:b,lastChild:D,positionalParamSegments:x}=CT(t,a,c);if(!y)return AT(t);const P=this.applyRedirectCommands(b,a.redirectTo,x);return a.redirectTo.startsWith("/")?sN(P):this.lineralizeSegments(a,P).pipe((0,Pi.zg)(z=>this.expandSegment(e,t,r,z.concat(c.slice(D)),h,!1)))}matchSegmentAgainstRoute(e,t,r,a,c){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,lt.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,pt.U)(z=>(r._loadedConfig=z,new rn(a,{})))):(0,lt.of)(new rn(a,{}));const{matched:h,consumedSegments:y,lastChild:b}=CT(t,r,a);if(!h)return AT(t);const D=a.slice(b);return this.getChildConfig(e,r,a).pipe((0,Pi.zg)(P=>{const z=P.module,ee=P.routes,{segmentGroup:ye,slicedSegments:Le}=DT(t,y,D,ee),$e=new rn(ye.segments,ye.children);if(0===Le.length&&$e.hasChildren())return this.expandChildren(z,ee,$e).pipe((0,pt.U)(Rt=>new rn(y,Rt)));if(0===ee.length&&0===Le.length)return(0,lt.of)(new rn(y,{}));const xt=xa(r)===c;return this.expandSegment(z,$e,ee,Le,xt?Pt:c,!0).pipe((0,pt.U)(Lt=>new rn(y.concat(Lt.segments),Lt.children)))}))}getChildConfig(e,t,r){return t.children?(0,lt.of)(new ER(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,lt.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Pi.zg)(a=>a?this.configLoader.load(e.injector,t).pipe((0,pt.U)(c=>(t._loadedConfig=c,c))):function(n){return new ln.y(e=>e.error(V0(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):(0,lt.of)(new ER([],e))}runCanLoadGuards(e,t,r){const a=t.canLoad;if(!a||0===a.length)return(0,lt.of)(!0);const c=a.map(h=>{const y=e.get(h);let b;if(function(n){return n&&yf(n.canLoad)}(y))b=y.canLoad(t,r);else{if(!yf(y))throw new Error("Invalid CanLoad guard");b=y(t,r)}return ki(b)});return(0,lt.of)(c).pipe(q0(),(0,_s.b)(h=>{if(!Vg(h))return;const y=V0(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw y.url=h,y}),(0,pt.U)(h=>!0===h))}lineralizeSegments(e,t){let r=[],a=t.root;for(;;){if(r=r.concat(a.segments),0===a.numberOfChildren)return(0,lt.of)(r);if(a.numberOfChildren>1||!a.children[Pt])return mO(e.redirectTo);a=a.children[Pt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,a){const c=this.createSegmentGroup(e,t.root,r,a);return new hf(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return si(e,(a,c)=>{if("string"==typeof a&&a.startsWith(":")){const y=a.substring(1);r[c]=t[y]}else r[c]=a}),r}createSegmentGroup(e,t,r,a){const c=this.createSegments(e,t.segments,r,a);let h={};return si(t.children,(y,b)=>{h[b]=this.createSegmentGroup(e,y,r,a)}),new rn(c,h)}createSegments(e,t,r,a){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,a):this.findOrReturn(c,r))}findPosParam(e,t,r){const a=r[t.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return a}findOrReturn(e,t){let r=0;for(const a of t){if(a.path===e.path)return t.splice(r),a;r++}return e}}function bR(n){const e={};for(const r of Object.keys(n.children)){const c=bR(n.children[r]);(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function(n){if(1===n.numberOfChildren&&n.children[Pt]){const e=n.children[Pt];return new rn(n.segments.concat(e.segments),e.children)}return n}(new rn(n.segments,e))}class oN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ST{constructor(e,t){this.component=e,this.route=t}}function bO(n,e,t){const r=n._root;return z0(r,e?e._root:null,t,[r.value])}function xT(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function z0(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=Fi(e);return n.children.forEach(h=>{(function(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,h=e?e.value:null,y=t?t.getContext(n.value.outlet):null;if(h&&c.routeConfig===h.routeConfig){const b=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ff(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ff(n.url,e.url)||!Ko(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mR(n,e)||!Ko(n.queryParams,e.queryParams);case"paramsChange":default:return!mR(n,e)}}(h,c,c.routeConfig.runGuardsAndResolvers);b?a.canActivateChecks.push(new oN(r)):(c.data=h.data,c._resolvedData=h._resolvedData),z0(n,e,c.component?y?y.children:null:t,r,a),b&&y&&y.outlet&&y.outlet.isActivated&&a.canDeactivateChecks.push(new ST(y.outlet.component,h))}else h&&Z0(e,y,a),a.canActivateChecks.push(new oN(r)),z0(n,null,c.component?y?y.children:null:t,r,a)})(h,c[h.value.outlet],t,r.concat([h.value]),a),delete c[h.value.outlet]}),si(c,(h,y)=>Z0(h,t.getContext(y),a)),a}function Z0(n,e,t){const r=Fi(n),a=n.value;si(r,(c,h)=>{Z0(c,a.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new ST(a.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,a))}class kO{}function aN(n){return new ln.y(e=>e.error(n))}class LO{constructor(e,t,r,a,c,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h}recognize(){const e=DT(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Pt);if(null===t)return null;const r=new mf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pt,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new On(r,t),c=new I_(this.url,a);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(e){const t=e.value,r=b_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const c of Object.keys(t.children)){const h=t.children[c],y=eN(e,c),b=this.processSegmentGroup(y,h,c);if(null===b)return null;r.push(...b)}const a=uN(r);return function(n){n.sort((e,t)=>e.value.outlet===Pt?-1:t.value.outlet===Pt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}processSegment(e,t,r,a){for(const c of e){const h=this.processSegmentAgainstRoute(c,t,r,a);if(null!==h)return h}return rN(t,r,a)?[]:null}processSegmentAgainstRoute(e,t,r,a){if(e.redirectTo||!nN(e,t,r,a))return null;let c,h=[],y=[];if("**"===e.path){const ee=r.length>0?mT(r).parameters:{};c=new mf(r,ee,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dN(e),xa(e),e.component,e,cN(t),lN(t)+r.length,hN(e))}else{const ee=CT(t,e,r);if(!ee.matched)return null;h=ee.consumedSegments,y=r.slice(ee.lastChild),c=new mf(h,ee.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dN(e),xa(e),e.component,e,cN(t),lN(t)+h.length,hN(e))}const b=function(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:D,slicedSegments:x}=DT(t,h,y,b.filter(ee=>void 0===ee.redirectTo),this.relativeLinkResolution);if(0===x.length&&D.hasChildren()){const ee=this.processChildren(b,D);return null===ee?null:[new On(c,ee)]}if(0===b.length&&0===x.length)return[new On(c,[])];const P=xa(e)===a,z=this.processSegment(b,D,x,P?Pt:a);return null===z?null:[new On(c,z)]}}function BO(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function uN(n){const e=[],t=new Set;for(const r of n){if(!BO(r)){e.push(r);continue}const a=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==a?(a.children.push(...r.children),t.add(a)):e.push(r)}for(const r of t){const a=uN(r.children);e.push(new On(r.value,a))}return e.filter(r=>!t.has(r))}function cN(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function lN(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function dN(n){return n.data||{}}function hN(n){return n.resolve||{}}function IR(n){return nr(e=>{const t=n(e);return t?(0,Fn.D)(t).pipe((0,pt.U)(()=>e)):(0,lt.of)(e)})}class ZO extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const CR=new f.OlP("ROUTES");class fN{constructor(e,t,r,a){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=a}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const a=this.loadModuleFactory(t.loadChildren).pipe((0,pt.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=c.create(e);return new ER(E_(h.injector.get(CR,void 0,f.XFs.Self|f.XFs.Optional)).map(wR),h)}),Er(c=>{throw t._loader$=void 0,c}));return t._loader$=new Qx.c(a,()=>new di.xQ).pipe((0,Xx.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Fn.D)(this.loader.load(e)):ki(e()).pipe((0,Pi.zg)(t=>t instanceof f.YKP?(0,lt.of)(t):(0,Fn.D)(this.compiler.compileModuleAsync(t))))}}class KO{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new C_,this.attachRef=null}}class C_{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new KO,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class QO{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function JO(n){throw n}function XO(n,e,t){return e.parse("/")}function pN(n,e){return(0,lt.of)(null)}const e1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},t1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ts=(()=>{class n{constructor(t,r,a,c,h,y,b,D){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=a,this.location=c,this.config=D,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new di.xQ,this.errorHandler=JO,this.malformedUriErrorHandler=XO,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:pN,afterPreactivation:pN},this.urlHandlingStrategy=new QO,this.routeReuseStrategy=new ZO,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(f.h0i),this.console=h.get(f.c2e);const z=h.get(f.R0b);this.isNgZoneEnabled=z instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(D),this.currentUrlTree=new hf(new rn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new fN(y,b,ee=>this.triggerEvent(new F0(ee)),ee=>this.triggerEvent(new L0(ee))),this.routerState=id(this.currentUrlTree,this.rootComponentType),this.transitions=new ys({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(qi(a=>0!==a.id),(0,pt.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),nr(a=>{let c=!1,h=!1;return(0,lt.of)(a).pipe((0,_s.b)(y=>{this.currentNavigation={id:y.id,initialUrl:y.currentRawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),nr(y=>{const b=this.browserUrlTree.toString(),D=!this.navigated||y.extractedUrl.toString()!==b||b!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(y.rawUrl))return RT(y.source)&&(this.browserUrlTree=y.extractedUrl),(0,lt.of)(y).pipe(nr(P=>{const z=this.transitions.getValue();return r.next(new O0(P.id,this.serializeUrl(P.extractedUrl),P.source,P.restoredState)),z!==this.transitions.getValue()?lc.E:Promise.resolve(P)}),function(n,e,t,r){return nr(a=>function(n,e,t,r,a){return new vO(n,e,t,r,a).apply()}(n,e,t,a.extractedUrl,r).pipe((0,pt.U)(c=>Object.assign(Object.assign({},a),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,_s.b)(P=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:P.urlAfterRedirects})}),function(n,e,t,r,a){return(0,Pi.zg)(c=>function(n,e,t,r,a="emptyOnly",c="legacy"){try{const h=new LO(n,e,t,r,a,c).recognize();return null===h?aN(new kO):(0,lt.of)(h)}catch(h){return aN(h)}}(n,e,c.urlAfterRedirects,t(c.urlAfterRedirects),r,a).pipe((0,pt.U)(h=>Object.assign(Object.assign({},c),{targetSnapshot:h}))))}(this.rootComponentType,this.config,P=>this.serializeUrl(P),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,_s.b)(P=>{"eager"===this.urlUpdateStrategy&&(P.extras.skipLocationChange||this.setBrowserUrl(P.urlAfterRedirects,P),this.browserUrlTree=P.urlAfterRedirects);const z=new nR(P.id,this.serializeUrl(P.extractedUrl),this.serializeUrl(P.urlAfterRedirects),P.targetSnapshot);r.next(z)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:z,extractedUrl:ee,source:ye,restoredState:Le,extras:$e}=y,xt=new O0(z,this.serializeUrl(ee),ye,Le);r.next(xt);const kt=id(ee,this.rootComponentType).snapshot;return(0,lt.of)(Object.assign(Object.assign({},y),{targetSnapshot:kt,urlAfterRedirects:ee,extras:Object.assign(Object.assign({},$e),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=y.rawUrl,this.browserUrlTree=y.urlAfterRedirects,y.resolve(null),lc.E}),IR(y=>{const{targetSnapshot:b,id:D,extractedUrl:x,rawUrl:P,extras:{skipLocationChange:z,replaceUrl:ee}}=y;return this.hooks.beforePreactivation(b,{navigationId:D,appliedUrlTree:x,rawUrlTree:P,skipLocationChange:!!z,replaceUrl:!!ee})}),(0,_s.b)(y=>{const b=new rR(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),(0,pt.U)(y=>Object.assign(Object.assign({},y),{guards:bO(y.targetSnapshot,y.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Pi.zg)(t=>{const{targetSnapshot:r,currentSnapshot:a,guards:{canActivateChecks:c,canDeactivateChecks:h}}=t;return 0===h.length&&0===c.length?(0,lt.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,Fn.D)(n).pipe((0,Pi.zg)(a=>function(n,e,t,r,a){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!c||0===c.length)return(0,lt.of)(!0);const h=c.map(y=>{const b=xT(y,e,a);let D;if(function(n){return n&&yf(n.canDeactivate)}(b))D=ki(b.canDeactivate(n,e,t,r));else{if(!yf(b))throw new Error("Invalid CanDeactivate guard");D=ki(b(n,e,t,r))}return D.pipe(so())});return(0,lt.of)(h).pipe(q0())}(a.component,a.route,t,e,r)),so(a=>!0!==a,!0))}(h,r,a,n).pipe((0,Pi.zg)(y=>y&&function(n){return"boolean"==typeof n}(y)?function(n,e,t,r){return(0,Fn.D)(e).pipe(Wc(a=>up(function(n,e){return null!==n&&e&&e(new oR(n)),(0,lt.of)(!0)}(a.route.parent,r),function(n,e){return null!==n&&e&&e(new uR(n)),(0,lt.of)(!0)}(a.route,r),function(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(h=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>cf(()=>{const y=h.guards.map(b=>{const D=xT(b,h.node,t);let x;if(function(n){return n&&yf(n.canActivateChild)}(D))x=ki(D.canActivateChild(r,n));else{if(!yf(D))throw new Error("Invalid CanActivateChild guard");x=ki(D(r,n))}return x.pipe(so())});return(0,lt.of)(y).pipe(q0())}));return(0,lt.of)(c).pipe(q0())}(n,a.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,lt.of)(!0);const a=r.map(c=>cf(()=>{const h=xT(c,e,t);let y;if(function(n){return n&&yf(n.canActivate)}(h))y=ki(h.canActivate(e,n));else{if(!yf(h))throw new Error("Invalid CanActivate guard");y=ki(h(e,n))}return y.pipe(so())}));return(0,lt.of)(a).pipe(q0())}(n,a.route,t))),so(a=>!0!==a,!0))}(r,c,n,e):(0,lt.of)(y)),(0,pt.U)(y=>Object.assign(Object.assign({},t),{guardsResult:y})))})}(this.ngModule.injector,y=>this.triggerEvent(y)),(0,_s.b)(y=>{if(Vg(y.guardsResult)){const D=V0(`Redirecting to "${this.serializeUrl(y.guardsResult)}"`);throw D.url=y.guardsResult,D}const b=new iR(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.triggerEvent(b)}),qi(y=>!!y.guardsResult||(this.restoreHistory(y),this.cancelNavigationTransition(y,""),!1)),IR(y=>{if(y.guards.canActivateChecks.length)return(0,lt.of)(y).pipe((0,_s.b)(b=>{const D=new k0(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(D)}),nr(b=>{let D=!1;return(0,lt.of)(b).pipe(function(n,e){return(0,Pi.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:a}}=t;if(!a.length)return(0,lt.of)(t);let c=0;return(0,Fn.D)(a).pipe(Wc(h=>function(n,e,t,r){return function(n,e,t,r){const a=Object.keys(n);if(0===a.length)return(0,lt.of)({});const c={};return(0,Fn.D)(a).pipe((0,Pi.zg)(h=>function(n,e,t,r){const a=xT(n,e,r);return ki(a.resolve?a.resolve(e,t):a(e,t))}(n[h],e,t,r).pipe((0,_s.b)(y=>{c[h]=y}))),Fg(1),(0,Pi.zg)(()=>Object.keys(c).length===a.length?(0,lt.of)(c):lc.E))}(n._resolve,n,e,r).pipe((0,pt.U)(c=>(n._resolvedData=c,n.data=Object.assign(Object.assign({},n.data),b_(n,t).resolve),null)))}(h.route,r,n,e)),(0,_s.b)(()=>c++),Fg(1),(0,Pi.zg)(h=>c===a.length?(0,lt.of)(t):lc.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,_s.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(b),this.cancelNavigationTransition(b,"At least one route resolver didn't emit any value."))}}))}),(0,_s.b)(b=>{const D=new sR(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(D)}))}),IR(y=>{const{targetSnapshot:b,id:D,extractedUrl:x,rawUrl:P,extras:{skipLocationChange:z,replaceUrl:ee}}=y;return this.hooks.afterPreactivation(b,{navigationId:D,appliedUrlTree:x,rawUrlTree:P,skipLocationChange:!!z,replaceUrl:!!ee})}),(0,pt.U)(y=>{const b=function(n,e,t){const r=wT(n,e._root,t?t._root:void 0);return new pf(r,e)}(this.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return Object.assign(Object.assign({},y),{targetRouterState:b})}),(0,_s.b)(y=>{this.currentUrlTree=y.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(y.urlAfterRedirects,y.rawUrl),this.routerState=y.targetRouterState,"deferred"===this.urlUpdateStrategy&&(y.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,y),this.browserUrlTree=y.urlAfterRedirects)}),((n,e,t)=>(0,pt.U)(r=>(new rO(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,y=>this.triggerEvent(y)),(0,_s.b)({next(){c=!0},complete(){c=!0}}),function(n){return e=>e.lift(new hT(n))}(()=>{var y;if(!c&&!h){const b=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,b)):this.cancelNavigationTransition(a,b)}(null===(y=this.currentNavigation)||void 0===y?void 0:y.id)===a.id&&(this.currentNavigation=null)}),Er(y=>{if(h=!0,function(n){return n&&n[fT]}(y)){const b=Vg(y.url);b||(this.navigated=!0,this.restoreHistory(a,!0));const D=new lf(a.id,this.serializeUrl(a.extractedUrl),y.message);r.next(D),b?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(y.url,this.rawUrlTree),P={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||RT(a.source)};this.scheduleNavigation(x,"imperative",null,P,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const b=new P0(a.id,this.serializeUrl(a.extractedUrl),y);r.next(b);try{a.resolve(this.errorHandler(y))}catch(D){a.reject(D)}}return lc.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:a,state:c,urlTree:h}=r,y={replaceUrl:!0};if(c){const b=Object.assign({},c);delete b.navigationId,delete b.\u0275routerPageId,0!==Object.keys(b).length&&(y.state=b)}this.scheduleNavigation(h,a,c,y)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const a=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!a||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){XM(t),this.config=t.map(wR),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:a,queryParams:c,fragment:h,queryParamsHandling:y,preserveFragment:b}=r,D=a||this.routerState.root,x=b?this.currentUrlTree.fragment:h;let P=null;switch(y){case"merge":P=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":P=this.currentUrlTree.queryParams;break;default:P=c||null}return null!==P&&(P=this.removeEmptyProps(P)),function(n,e,t,r,a){if(0===t.length)return yR(e.root,e.root,e,r,a);const c=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new zM(!0,0,n);let e=0,t=!1;const r=n.reduce((a,c,h)=>{if("object"==typeof c&&null!=c){if(c.outlets){const y={};return si(c.outlets,(b,D)=>{y[D]="string"==typeof b?b.split("/"):b}),[...a,{outlets:y}]}if(c.segmentPath)return[...a,c.segmentPath]}return"string"!=typeof c?[...a,c]:0===h?(c.split("/").forEach((y,b)=>{0==b&&"."===y||(0==b&&""===y?t=!0:".."===y?e++:""!=y&&a.push(y))}),a):[...a,c]},[]);return new zM(t,e,r)}(t);if(c.toRoot())return yR(e.root,new rn([],{}),e,r,a);const h=function(n,e,t){if(n.isAbsolute)return new _R(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const c=t.snapshot._urlSegment;return new _R(c,c===e.root,0)}const r=bT(n.commands[0])?0:1;return function(n,e,t){let r=n,a=e,c=t;for(;c>a;){if(c-=a,r=r.parent,!r)throw new Error("Invalid number of '../'");a=r.segments.length}return new _R(r,!1,a-c)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(c,e,n),y=h.processChildren?IT(h.segmentGroup,h.index,c.commands):ZM(h.segmentGroup,h.index,c.commands);return yR(h.segmentGroup,y,e,r,a)}(D,this.currentUrlTree,t,P,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const a=Vg(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(a){r=this.malformedUriErrorHandler(a,this.urlSerializer,t)}return r}isActive(t,r){let a;if(a=!0===r?Object.assign({},e1):!1===r?Object.assign({},t1):r,Vg(t))return dR(this.currentUrlTree,t,a);const c=this.parseUrl(t);return dR(this.currentUrlTree,c,a)}removeEmptyProps(t){return Object.keys(t).reduce((r,a)=>{const c=t[a];return null!=c&&(r[a]=c),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new vo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,a,c,h){var y,b;if(this.disposed)return Promise.resolve(!1);const D=this.getTransition(),x=RT(r)&&D&&!RT(D.source),ee=(this.lastSuccessfulId===D.id||this.currentNavigation?D.rawUrl:D.urlAfterRedirects).toString()===t.toString();if(x&&ee)return Promise.resolve(!0);let ye,Le,$e;h?(ye=h.resolve,Le=h.reject,$e=h.promise):$e=new Promise((Lt,Rt)=>{ye=Lt,Le=Rt});const xt=++this.navigationId;let kt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),kt=a&&a.\u0275routerPageId?a.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(y=this.browserPageId)&&void 0!==y?y:0:(null!==(b=this.browserPageId)&&void 0!==b?b:0)+1):kt=0,this.setTransition({id:xt,targetPageId:kt,source:r,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:ye,reject:Le,promise:$e,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),$e.catch(Lt=>Promise.reject(Lt))}setBrowserUrl(t,r){const a=this.urlSerializer.serialize(t),c=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(a)||r.extras.replaceUrl?this.location.replaceState(a,"",c):this.location.go(a,"",c)}restoreHistory(t,r=!1){var a,c;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===h?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const a=new lf(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.DyG),f.LFG(ET),f.LFG(C_),f.LFG(Qe),f.LFG(f.zs3),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(void 0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function RT(n){return"imperative"!==n}let K0=(()=>{class n{constructor(t,r,a,c,h){this.router=t,this.route=r,this.commands=[],this.onChanges=new di.xQ,null==a&&c.setAttribute(h.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:D_(this.skipLocationChange),replaceUrl:D_(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:D_(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ts),f.Y36(Yo),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[f.TTD]}),n})(),MT=(()=>{class n{constructor(t,r,a){this.router=t,this.route=r,this.locationStrategy=a,this.commands=[],this.onChanges=new di.xQ,this.subscription=t.events.subscribe(c=>{c instanceof vo&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,a,c,h){if(0!==t||r||a||c||h||"string"==typeof this.target&&"_self"!=this.target)return!0;const y={skipLocationChange:D_(this.skipLocationChange),replaceUrl:D_(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,y),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:D_(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ts),f.Y36(Yo),f.Y36(Ue))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(c){return r.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&t&&(f.Ikx("href",r.href,f.LSH),f.uIk("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[f.TTD]}),n})();function D_(n){return""===n||!!n}let gN=(()=>{class n{constructor(t,r,a,c,h,y){this.router=t,this.element=r,this.renderer=a,this.cdr=c,this.link=h,this.linkWithHref=y,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(b=>{b instanceof vo&&this.update()})}ngAfterContentInit(){(0,lt.of)(this.links.changes,this.linksWithHrefs.changes,(0,lt.of)(null)).pipe((0,Wd.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(a=>!!a).map(a=>a.onChanges);this.linkInputChangesSubscription=(0,Fn.D)(r).pipe((0,Wd.J)()).subscribe(a=>{this.isActive!==this.isLinkActive(this.router)(a)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(a=>!!a)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}))})}isLinkActive(t){const r=function(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return a=>t.isActive(a.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ts),f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(f.sBO),f.Y36(K0,8),f.Y36(MT,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,a){if(1&t&&(f.Suo(a,K0,5),f.Suo(a,MT,5)),2&t){let c;f.iGM(c=f.CRH())&&(r.links=c),f.iGM(c=f.CRH())&&(r.linksWithHrefs=c)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[f.TTD]}),n})(),DR=(()=>{class n{constructor(t,r,a,c,h){this.parentContexts=t,this.location=r,this.resolver=a,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.name=c||Pt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),y=this.parentContexts.getOrCreateContext(this.name).children,b=new i1(t,y,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,b),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(C_),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class i1{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Yo?this.route:e===C_?this.childContexts:this.parent.get(e,t)}}class mN{}class yN{preload(e,t){return(0,lt.of)(null)}}let _N=(()=>{class n{constructor(t,r,a,c,h){this.router=t,this.injector=c,this.preloadingStrategy=h,this.loader=new fN(r,a,D=>t.triggerEvent(new F0(D)),D=>t.triggerEvent(new L0(D)))}setUpPreloading(){this.subscription=this.router.events.pipe(qi(t=>t instanceof vo),Wc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const a=[];for(const c of r)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const h=c._loadedConfig;a.push(this.processRoutes(h.module,h.routes))}else c.loadChildren&&!c.canLoad?a.push(this.preloadConfig(t,c)):c.children&&a.push(this.processRoutes(t,c.children));return(0,Fn.D)(a).pipe((0,Wd.J)(),(0,pt.U)(c=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,lt.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Pi.zg)(c=>(r._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ts),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(mN))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),TR=(()=>{class n{constructor(t,r,a={}){this.router=t,this.viewportScroller=r,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof O0?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof vo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof df&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new df(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ts),f.LFG(qs),f.LFG(void 0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ug=new f.OlP("ROUTER_CONFIGURATION"),vN=new f.OlP("ROUTER_FORROOT_GUARD"),a1=[Qe,{provide:ET,useClass:pR},{provide:ts,useFactory:function(n,e,t,r,a,c,h,y={},b,D){const x=new ts(null,n,e,t,r,a,c,E_(h));return b&&(x.urlHandlingStrategy=b),D&&(x.routeReuseStrategy=D),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(y,x),y.enableTracing&&x.events.subscribe(P=>{var z,ee;null===(z=console.group)||void 0===z||z.call(console,`Router Event: ${P.constructor.name}`),console.log(P.toString()),console.log(P),null===(ee=console.groupEnd)||void 0===ee||ee.call(console)}),x},deps:[ET,C_,Qe,f.zs3,f.v3s,f.Sil,CR,Ug,[class{},new f.FiY],[class{},new f.FiY]]},C_,{provide:Yo,useFactory:function(n){return n.routerState.root},deps:[ts]},{provide:f.v3s,useClass:f.EAV},_N,yN,class{preload(e,t){return t().pipe(Er(()=>(0,lt.of)(null)))}},{provide:Ug,useValue:{enableTracing:!1}}];function u1(){return new f.PXZ("Router",ts)}let EN=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[a1,wN(t),{provide:vN,useFactory:d1,deps:[[ts,new f.FiY,new f.tp0]]},{provide:Ug,useValue:r||{}},{provide:Ue,useFactory:l1,deps:[se,[new f.tBr(Re),new f.FiY],Ug]},{provide:TR,useFactory:c1,deps:[ts,qs,Ug]},{provide:mN,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:yN},{provide:f.PXZ,multi:!0,useFactory:u1},[AR,{provide:f.ip1,multi:!0,useFactory:g1,deps:[AR]},{provide:bN,useFactory:m1,deps:[AR]},{provide:f.tb,multi:!0,useExisting:bN}]]}}static forChild(t){return{ngModule:n,providers:[wN(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vN,8),f.LFG(ts,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function c1(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new TR(n,e,t)}function l1(n,e,t={}){return t.useHash?new Ce(n,e):new Se(n,e)}function d1(n){return"guarded"}function wN(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:CR,multi:!0,useValue:n}]}let AR=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new di.xQ}appInitializer(){return this.injector.get(L,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const a=new Promise(y=>r=y),c=this.injector.get(ts),h=this.injector.get(Ug);return"disabled"===h.initialNavigation?(c.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?(0,lt.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),c.initialNavigation()):r(!0),a})}bootstrapListener(t){const r=this.injector.get(Ug),a=this.injector.get(_N),c=this.injector.get(TR),h=this.injector.get(ts),y=this.injector.get(f.z2F);t===y.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),a.setUpPreloading(),c.init(),h.resetRootComponentType(y.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function g1(n){return n.appInitializer.bind(n)}function m1(n){return n.bootstrapListener.bind(n)}const bN=new f.OlP("Router Initializer");var _1=F(4233);let _f=(()=>{class n{constructor(t,r,a,c){this.router=t,this.afs=r,this.afAuth=a,this.ngZone=c,this.errorCode="",this.errorMessage="",this.afAuth.authState.subscribe(h=>{h?(this.userState=h,this.router.navigate(["dashboard"]),localStorage.setItem("user",JSON.stringify(this.userState)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user",null),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){var a=this;return(0,_e.Z)(function*(){try{return a.afAuth.signInWithEmailAndPassword(t,r).then(c=>{c&&(a.userState=c,a.router.navigate(["dashboard"]))})}catch(c){window.alert(c.message)}})()}SignUp(t,r){var a=this;return(0,_e.Z)(function*(){try{const c=a.afAuth.createUserWithEmailAndPassword(t,r);a.SendVerificationMail(),a.SetUserData((yield c).user)}catch(c){window.alert(c.message)}})()}SendVerificationMail(){var t=this;return(0,_e.Z)(function*(){return t.afAuth.currentUser.then(r=>r.sendEmailVerification()).then(()=>{t.router.navigate(["email-verification"])})})()}GoogleAuth(){return this.AuthLogin(new _1.Q)}AuthLogin(t){var r=this;return(0,_e.Z)(function*(){return r.afAuth.signInWithPopup(t).then(a=>{r.ngZone.run(()=>{r.router.navigate(["dashboard"])}),r.SetUserData(a.user)}).catch(a=>{window.alert(a)})})()}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}ForgotPassword(t){var r=this;return(0,_e.Z)(function*(){return r.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(a=>{window.alert(a)})})()}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}SignOut(){var t=this;return(0,_e.Z)(function*(){yield t.afAuth.signOut().then(()=>{localStorage.removeItem("user"),window.location.reload(),t.router.navigate(["sign-in"])}).catch(r=>{alert(r.message)})})()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ts),f.LFG(g_),f.LFG(ap),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IN=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-spinner"]],decls:2,vars:0,consts:[[1,"d-flex","align-items-center",2,"justify-content","center","margin-top","auto","margin-bottom","auto"],["role","status","aria-hidden","true",1,"spinner-border","ml-auto"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f._UZ(1,"div",1),f.qZA())},styles:[""]}),n})();function v1(n,e){1&n&&(f.TgZ(0,"div"),f._UZ(1,"app-spinner"),f.qZA())}let E1=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isLoading=!1,this.errorMessage=""}ngOnInit(){}ngOnDestroy(){this.isLoading=!1}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_f),f.Y36(ts))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-login"]],decls:29,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["action","","role","form"],[1,"formGroup"],["type","text","ngModel","","name","username","placeholder","Username","required","",1,"form-control"],["userName",""],["type","password","ngModel","","name","password","placeholder","Password","required","",1,"form-control"],["password",""],["type","button",1,"btn","btn-primary","btn-block",3,"click"],["type","button",1,"btn","btn-danger","btn-block",3,"click"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/sign-up",1,"redirect"],[4,"ngIf"]],template:function(t,r){if(1&t){const a=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"h3"),f._uU(4,"Sign in"),f.qZA(),f.TgZ(5,"form",3),f.TgZ(6,"div",4),f._UZ(7,"input",5,6),f.qZA(),f.TgZ(9,"div",4),f.TgZ(10,"label"),f._uU(11,"Password"),f.qZA(),f._UZ(12,"input",7,8),f.qZA(),f.TgZ(14,"div",4),f.TgZ(15,"button",9),f.NdJ("click",function(){f.CHM(a);const h=f.MAs(8),y=f.MAs(13);return r.authService.SignIn(h.value,y.value)}),f._uU(16,"Submit"),f.qZA(),f.qZA(),f.TgZ(17,"div",4),f.TgZ(18,"button",10),f.NdJ("click",function(){return r.authService.GoogleAuth()}),f._uU(19," Log in with Google "),f.qZA(),f.qZA(),f.TgZ(20,"div",11),f.TgZ(21,"span",12),f._uU(22,"Forgot Password?"),f.qZA(),f.qZA(),f.TgZ(23,"div",13),f.TgZ(24,"span"),f._uU(25,"Not registered yet?"),f.TgZ(26,"span",14),f._uU(27," Register"),f.qZA(),f.qZA(),f.qZA(),f.YNc(28,v1,2,0,"div",15),f.qZA(),f.qZA(),f.qZA(),f.qZA()}2&t&&(f.xp6(28),f.Q6J("ngIf",r.isLoading))},directives:[Qg,ro,El,to,No,oc,Dl,K0,Kt,IN],styles:[""]}),n})(),w1=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-logout"]],decls:2,vars:0,template:function(t,r){1&t&&(f.TgZ(0,"p"),f._uU(1,"You have successfully logged out"),f.qZA())},styles:[""]}),n})(),b1=(()=>{class n{constructor(t){this.authService=t,this.isLoading=!1,this.errorMessage=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_f))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-register"]],decls:21,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["placeholder","Email","type","email","ngModel","","name","username","required","",1,"form-control"],["userEmail",""],["type","password","placeholder","Password","ngModel","","name","password","required","",1,"form-control"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btn-block","btn-primary",3,"click"],["type","button",1,"btn","btn-block","btn-danger",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const a=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"h3"),f._uU(4,"Register User"),f.qZA(),f.TgZ(5,"div",3),f._UZ(6,"input",4,5),f.qZA(),f.TgZ(8,"div",3),f._UZ(9,"input",6,7),f.qZA(),f.TgZ(11,"div",3),f.TgZ(12,"input",8),f.NdJ("click",function(){f.CHM(a);const h=f.MAs(7),y=f.MAs(10);return r.authService.SignUp(h.value,y.value)}),f.qZA(),f.qZA(),f.TgZ(13,"div",3),f.TgZ(14,"button",9),f.NdJ("click",function(){return r.authService.GoogleAuth()}),f._uU(15," Continue with Google "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(16,"div",10),f.TgZ(17,"span"),f._uU(18,"Already have an account? "),f.TgZ(19,"span",11),f._uU(20,"Log In"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}},directives:[to,No,oc,Dl,K0],styles:[""]}),n})();function I1(n,e){1&n&&(f.TgZ(0,"div"),f.TgZ(1,"div",2),f._UZ(2,"app-spinner"),f.qZA(),f.qZA())}let C1=(()=>{class n{constructor(t){this.authService=t,this.moviesLoaded=!1,this.placeholderArray=[],this.placeholderArray=Array(5).fill(1)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_f))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-dashboard"]],decls:2,vars:1,consts:[[1,"container",2,"margin-top","5em"],[4,"ngIf"],[1,"placeholder"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.YNc(1,I1,3,0,"div",1),f.qZA()),2&t&&(f.xp6(1),f.Q6J("ngIf",!r.moviesLoaded))},directives:[Kt,IN],styles:[".placeholder[_ngcontent-%COMP%]{width:12em;height:12em;background-color:#dce2e8;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:center}"]}),n})(),D1=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_f))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-forgot-password"]],decls:10,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","ngModel","","name","username","placeholder","Email Address","required","",1,"form-control"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btn-primary","btn-block",3,"click"]],template:function(t,r){if(1&t){const a=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"h3"),f._uU(4,"Forgot Password"),f.qZA(),f.TgZ(5,"div",3),f._UZ(6,"input",4,5),f.qZA(),f.TgZ(8,"div",3),f.TgZ(9,"input",6),f.NdJ("click",function(){f.CHM(a);const h=f.MAs(7);return r.authService.ForgotPassword(h.value)}),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}},directives:[to,No,oc,Dl],styles:[""]}),n})();function T1(n,e){if(1&n&&(f.TgZ(0,"div",4),f.TgZ(1,"p",6),f._uU(2,"Confirmation mail has been sent to "),f.TgZ(3,"strong"),f._uU(4),f.qZA(),f._uU(5,"."),f.qZA(),f.qZA()),2&n){const t=e.ngIf;f.xp6(4),f.Oqu(t.email)}}let A1=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_f))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-verify-email"]],decls:9,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btn-block","btn-success",3,"click"],[1,"text-center"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"h3"),f._uU(4,"Thank You for Signing up"),f.qZA(),f.YNc(5,T1,6,1,"div",3),f.TgZ(6,"div",4),f.TgZ(7,"button",5),f.NdJ("click",function(){return r.authService.SendVerificationMail()}),f._uU(8," Resend Verification Email "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(5),f.Q6J("ngIf",r.authService.userState))},directives:[Kt],styles:[""]}),n})();function x1(n,e){if(1&n&&(f.TgZ(0,"div",3),f.TgZ(1,"div",4),f._UZ(2,"img",5),f.TgZ(3,"div",6),f.TgZ(4,"h2"),f._uU(5,"Hi: "),f.TgZ(6,"strong"),f._uU(7),f.qZA(),f.qZA(),f.TgZ(8,"p"),f._uU(9,"User ID: "),f.TgZ(10,"strong"),f._uU(11),f.qZA(),f.qZA(),f.TgZ(12,"p"),f._uU(13,"Email: "),f.TgZ(14,"strong"),f._uU(15),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&n){const t=e.ngIf;f.xp6(2),f.s9C("src",t.photoURL?t.photoURL:"/assets/dummy.jpg",f.LSH),f.s9C("alt",t.displayName),f.xp6(5),f.Oqu(t.displayName?t.displayName:"User"),f.xp6(4),f.Oqu(t.uid),f.xp6(4),f.Oqu(t.email)}}const R1=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"dashboard",component:C1,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.userState?(console.log("User athenticated"),!0):(console.log("User unathenticated"),this.router.navigate(["sign-in"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_f),f.LFG(ts))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"sign-in",component:E1},{path:"sign-up",component:b1},{path:"profile",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_f))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-profile"]],decls:4,vars:1,consts:[[1,"container","mt-5",2,"max-width","600px"],["class","row",4,"ngIf"],[1,"btn","btn-block","btn-primary",3,"click"],[1,"row"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.YNc(1,x1,16,5,"div",1),f.TgZ(2,"a",2),f.NdJ("click",function(){return r.authService.SignOut()}),f._uU(3," Sign Out "),f.qZA(),f.qZA()),2&t&&(f.xp6(1),f.Q6J("ngIf",r.authService.userState))},directives:[Kt],styles:[""]}),n})()},{path:"logout",component:w1},{path:"forgot-password",component:D1},{path:"email-verification",component:A1}];let M1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[EN.forRoot(R1)],EN]}),n})();const N1=function(){return["/profile"]};function O1(n,e){1&n&&(f.TgZ(0,"div",9),f.TgZ(1,"button",10),f._uU(2," My Account "),f.qZA(),f.TgZ(3,"ul",11),f.TgZ(4,"li"),f.TgZ(5,"a",12),f._uU(6,"Profile"),f.qZA(),f.qZA(),f.TgZ(7,"li"),f.TgZ(8,"a",13),f._uU(9,"Logout"),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&n&&(f.xp6(5),f.Q6J("routerLink",f.DdM(1,N1)))}const P1=function(){return["/dashboard"]};let k1=(()=>{class n{constructor(t){this.authService=t,this.title="popmovies",this.isLoggedIn=!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_f))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:13,vars:3,consts:[[1,"container-fluid","displayTable"],[1,"navbar","bg-light","fixed-top"],[1,"container-fluid"],["routerLinkActive","active",1,"navbar-brand",3,"routerLink"],["src","/assets/icons/icon-72x72.png","alt","","width","30","height","24",1,"d-inline-block","align-text-top"],[1,"d-flex"],["class","dropdown  me-4",4,"ngIf"],[1,"navbar","fixed-bottom","navbar-light","bg-light"],["href","#",1,"navbar-brand"],[1,"dropdown","me-4"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","btn-outline-primary","dropdown-toggle"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],["routerLinkActive","active",1,"dropdown-item",3,"routerLink"],[1,"dropdown-item"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"nav",1),f.TgZ(2,"div",2),f.TgZ(3,"a",3),f._UZ(4,"img",4),f._uU(5," Popular Movies "),f.qZA(),f.TgZ(6,"div",5),f.YNc(7,O1,10,2,"div",6),f.qZA(),f.qZA(),f.qZA(),f._UZ(8,"router-outlet"),f.TgZ(9,"nav",7),f.TgZ(10,"div",2),f.TgZ(11,"a",8),f._uU(12,"Footer"),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(3),f.Q6J("routerLink",f.DdM(2,P1)),f.xp6(4),f.Q6J("ngIf",r.authService.userState))},directives:[MT,gN,Kt,DR],styles:[""]}),n})();var F1=F(205),L1=F(9105);function SR(n,e,t,r){return(0,L1.m)(t)&&(r=t,t=void 0),r?SR(n,e,t).pipe((0,pt.U)(a=>(0,Xs.k)(a)?r(...a):r(a))):new ln.y(a=>{CN(n,e,function(h){a.next(arguments.length>1?Array.prototype.slice.call(arguments):h)},a,t)})}function CN(n,e,t,r,a){let c;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const h=n;n.addEventListener(e,t,a),c=()=>h.removeEventListener(e,t,a)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const h=n;n.on(e,t),c=()=>h.off(e,t)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const h=n;n.addListener(e,t),c=()=>h.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let h=0,y=n.length;h<y;h++)CN(n[h],e,t,r,a)}r.add(c)}var j1=F(8640);const Bg=new ln.y(j1.Z);var DN=F(4458),TN=F(3098);class q1{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new xR(e,this.delay,this.scheduler))}}class xR extends io.L{constructor(e,t,r){super(e),this.delay=t,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,r=t.queue,a=e.scheduler,c=e.destination;for(;r.length>0&&r[0].time-a.now()<=0;)r.shift().notification.observe(c);if(r.length>0){const h=Math.max(0,r[0].time-a.now());this.schedule(e,h)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(xR.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,r=new W1(t.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(TN.P.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(TN.P.createComplete()),this.unsubscribe()}}class W1{constructor(e,t){this.time=e,this.notification=t}}const Y0="Service workers are disabled or not supported by this browser";class NT{constructor(e){if(this.serviceWorker=e,e){const r=SR(e,"controllerchange").pipe((0,pt.U)(()=>e.controller)),c=up(cf(()=>(0,lt.of)(e.controller)),r);this.worker=c.pipe(qi(x=>!!x)),this.registration=this.worker.pipe(nr(()=>e.getRegistration()));const D=SR(e,"message").pipe((0,pt.U)(x=>x.data)).pipe(qi(x=>x&&x.type)).pipe((0,DN.O)(new di.xQ));D.connect(),this.events=D}else this.worker=this.events=this.registration=cf(()=>(0,F1._)(new Error("Service workers are disabled or not supported by this browser")))}postMessage(e,t){return this.worker.pipe(su(1),(0,_s.b)(r=>{r.postMessage(Object.assign({action:e},t))})).toPromise().then(()=>{})}postMessageWithStatus(e,t,r){const a=this.waitForStatus(r),c=this.postMessage(e,t);return Promise.all([a,c]).then(()=>{})}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){return this.events.pipe(qi(r=>r.type===e))}nextEventOfType(e){return this.eventsOfType(e).pipe(su(1))}waitForStatus(e){return this.eventsOfType("STATUS").pipe(qi(t=>t.nonce===e),su(1),(0,pt.U)(t=>{if(!t.status)throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Z1=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new di.xQ,!t.isEnabled)return this.messages=Bg,this.notificationClicks=Bg,void(this.subscription=Bg);this.messages=this.sw.eventsOfType("PUSH").pipe((0,pt.U)(a=>a.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,pt.U)(a=>a.data)),this.pushManager=this.sw.registration.pipe((0,pt.U)(a=>a.pushManager));const r=this.pushManager.pipe(nr(a=>a.getSubscription()));this.subscription=(0,Ud.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(Y0));const r={userVisibleOnly:!0};let a=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),c=new Uint8Array(new ArrayBuffer(a.length));for(let h=0;h<a.length;h++)c[h]=a.charCodeAt(h);return r.applicationServerKey=c,this.pushManager.pipe(nr(h=>h.subscribe(r)),su(1)).toPromise().then(h=>(this.subscriptionChanges.next(h),h))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(su(1),nr(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(a=>{if(!a)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Y0))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(NT))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),K1=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.available=Bg,this.activated=Bg,void(this.unrecoverable=Bg);this.available=this.sw.eventsOfType("UPDATE_AVAILABLE"),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Y0));const t=this.sw.generateNonce();return this.sw.postMessageWithStatus("CHECK_FOR_UPDATES",{statusNonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Y0));const t=this.sw.generateNonce();return this.sw.postMessageWithStatus("ACTIVATE_UPDATE",{statusNonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(NT))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class RR{}const AN=new f.OlP("NGSW_REGISTER_SCRIPT");function Y1(n,e,t,r){return()=>{if(!pd(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let c;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)c=t.registrationStrategy();else{const[y,...b]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(y){case"registerImmediately":c=(0,lt.of)(null);break;case"registerWithDelay":c=SN(+b[0]||0);break;case"registerWhenStable":c=b[0]?(0,Ud.T)(xN(n),SN(+b[0])):xN(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(f.R0b).runOutsideAngular(()=>c.pipe(su(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(y=>console.error("Service worker registration failed with:",y))))}}function SN(n){return(0,lt.of)(null).pipe(function(n,e=oA.P){const r=function(n){return n instanceof Date&&!isNaN(+n)}(n)?+n-e.now():Math.abs(n);return a=>a.lift(new q1(r,e))}(n))}function xN(n){return n.get(f.z2F).isStable.pipe(qi(t=>t))}function Q1(n,e){return new NT(pd(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let J1=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:AN,useValue:t},{provide:RR,useValue:r},{provide:NT,useFactory:Q1,deps:[RR,f.Lbi]},{provide:f.ip1,useFactory:Y1,deps:[f.zs3,AN,RR,f.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Z1,K1]}),n})();const MR_firebaseConfig={apiKey:"AIzaSyAv54h8EtcMzACF77yk2YpsA9th09Q_nXE",authDomain:"popmovies-fc69d.firebaseapp.com",projectId:"popmovies-fc69d",storageBucket:"popmovies-fc69d.appspot.com",messagingSenderId:"993149127523",appId:"1:993149127523:web:78f61846b56387fdc52156",measurementId:"G-PW8Z17YZKG"};let X1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[k1]}),n.\u0275inj=f.cJS({providers:[],imports:[[Mf,ct,tn,M1,J1.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"}),Di.hO.initializeApp(MR_firebaseConfig),sA,M0]]}),n})();(0,f.G48)(),Ei().bootstrapModule(X1).catch(n=>console.error(n))},3394:(Ze,me,F)=>{"use strict";F.d(me,{Z:()=>de});var f=F(3854),j=F(3910),O=F(8026),re=F(5422);class te{constructor(Ue,Ae){this._delegate=Ue,this.firebase=Ae,(0,O._addComponent)(Ue,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=Ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ue){this._delegate.automaticDataCollectionEnabled=Ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ue=>{this._delegate.checkDestroyed(),Ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Ue,Ae=O._DEFAULT_ENTRY_NAME){var Re;this._delegate.checkDestroyed();const Se=this._delegate.container.getProvider(Ue);return!Se.isInitialized()&&"EXPLICIT"===(null===(Re=Se.getComponent())||void 0===Re?void 0:Re.instantiationMode)&&Se.initialize(),Se.getImmediate({identifier:Ae})}_removeServiceInstance(Ue,Ae=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ue).clearInstance(Ae)}_addComponent(Ue){(0,O._addComponent)(this._delegate,Ue)}_addOrOverwriteComponent(Ue){(0,O._addOrOverwriteComponent)(this._delegate,Ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),L=function G(){const we=function(we){const Ue={},Ae={__esModule:!0,initializeApp:function(_t,Me={}){const Te=O.initializeApp(_t,Me);if((0,f.r3)(Ue,Te.name))return Ue[Te.name];const ze=new we(Te,Ae);return Ue[Te.name]=ze,ze},app:Se,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function(_t){const Me=_t.name,Te=Me.replace("-compat","");if(O._registerComponent(_t)&&"PUBLIC"===_t.type){const ze=(dt=Se())=>{if("function"!=typeof dt[Te])throw ce.create("invalid-app-argument",{appName:Me});return dt[Te]()};void 0!==_t.serviceProps&&(0,f.ZB)(ze,_t.serviceProps),Ae[Te]=ze,we.prototype[Te]=function(...dt){return this._getService.bind(this,Me).apply(this,_t.multipleInstances?dt:[])}}return"PUBLIC"===_t.type?Ae[Te]:null},removeApp:function(_t){delete Ue[_t]},useAsService:function(_t,Me){return"serverAuth"===Me?null:Me},modularAPIs:O}};function Se(_t){if(!(0,f.r3)(Ue,_t=_t||O._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:_t});return Ue[_t]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function(){return Object.keys(Ue).map(_t=>Ue[_t])}}),Se.App=we,Ae}(te);return we.INTERNAL=Object.assign(Object.assign({},we.INTERNAL),{createFirebaseNamespace:G,extendNamespace:function(Ae){(0,f.ZB)(we,Ae)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),we}(),V=new re.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){V.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const we=self.firebase.SDK_VERSION;we&&we.indexOf("LITE")>=0&&V.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const de=L;(0,O.registerVersion)("@firebase/app-compat","0.1.28",undefined)},8026:(Ze,me,F)=>{"use strict";F.r(me),F.d(me,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>Wr,_DEFAULT_ENTRY_NAME:()=>Gr,_addComponent:()=>An,_addOrOverwriteComponent:()=>qt,_apps:()=>oi,_clearComponents:()=>dn,_components:()=>qr,_getProvider:()=>Us,_registerComponent:()=>pr,_removeServiceInstance:()=>Hn,deleteApp:()=>Un,getApp:()=>Ne,getApps:()=>Gn,initializeApp:()=>Li,onLog:()=>wn,registerVersion:()=>Zt,setLogLevel:()=>Xe});var f=F(8239),j=F(3910),O=F(5422),re=F(3854),te=F(7449);class oe{constructor(B){this.container=B}getPlatformInfoString(){return this.container.getProviders().map(ve=>{if(function(W){const B=W.getComponent();return"VERSION"===(null==B?void 0:B.type)}(ve)){const Ve=ve.getImmediate();return`${Ve.library}/${Ve.version}`}return null}).filter(ve=>ve).join(" ")}}const se="@firebase/app",G="0.7.27",L=new O.Yd("@firebase/app"),Gr="[DEFAULT]",ns={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},oi=new Map,qr=new Map;function An(W,B){try{W.container.addComponent(B)}catch(ve){L.debug(`Component ${B.name} failed to register with FirebaseApp ${W.name}`,ve)}}function qt(W,B){W.container.addOrOverwriteComponent(B)}function pr(W){const B=W.name;if(qr.has(B))return L.debug(`There were multiple attempts to register component ${B}.`),!1;qr.set(B,W);for(const ve of oi.values())An(ve,W);return!0}function Us(W,B){const ve=W.container.getProvider("heartbeat").getImmediate({optional:!0});return ve&&ve.triggerHeartbeat(),W.container.getProvider(B)}function Hn(W,B,ve=Gr){Us(W,B).clearInstance(ve)}function dn(){qr.clear()}const Jt=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class br{constructor(B,ve,Ve){this._isDeleted=!1,this._options=Object.assign({},B),this._config=Object.assign({},ve),this._name=ve.name,this._automaticDataCollectionEnabled=ve.automaticDataCollectionEnabled,this._container=Ve,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(B){this.checkDestroyed(),this._automaticDataCollectionEnabled=B}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(B){this._isDeleted=B}checkDestroyed(){if(this.isDeleted)throw Jt.create("app-deleted",{appName:this._name})}}const Wr="9.8.4";function Li(W,B={}){"object"!=typeof B&&(B={name:B});const ve=Object.assign({name:Gr,automaticDataCollectionEnabled:!1},B),Ve=ve.name;if("string"!=typeof Ve||!Ve)throw Jt.create("bad-app-name",{appName:String(Ve)});const rt=oi.get(Ve);if(rt){if((0,re.vZ)(W,rt.options)&&(0,re.vZ)(ve,rt.config))return rt;throw Jt.create("duplicate-app",{appName:Ve})}const Dt=new j.H0(Ve);for(const an of qr.values())Dt.addComponent(an);const Nt=new br(W,ve,Dt);return oi.set(Ve,Nt),Nt}function Ne(W=Gr){const B=oi.get(W);if(!B)throw Jt.create("no-app",{appName:W});return B}function Gn(){return Array.from(oi.values())}function Un(W){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,f.Z)(function*(W){const B=W.name;oi.has(B)&&(oi.delete(B),yield Promise.all(W.container.getProviders().map(ve=>ve.delete())),W.isDeleted=!0)})).apply(this,arguments)}function Zt(W,B,ve){var Ve;let rt=null!==(Ve=ns[W])&&void 0!==Ve?Ve:W;ve&&(rt+=`-${ve}`);const Dt=rt.match(/\s|\//),Nt=B.match(/\s|\//);if(Dt||Nt){const an=[`Unable to register library "${rt}" with version "${B}":`];return Dt&&an.push(`library name "${rt}" contains illegal characters (whitespace or "/")`),Dt&&Nt&&an.push("and"),Nt&&an.push(`version name "${B}" contains illegal characters (whitespace or "/")`),void L.warn(an.join(" "))}pr(new j.wA(`${rt}-version`,()=>({library:rt,version:B}),"VERSION"))}function wn(W,B){if(null!==W&&"function"!=typeof W)throw Jt.create("invalid-log-argument");(0,O.Am)(W,B)}function Xe(W){(0,O.Ub)(W)}const Pn="firebase-heartbeat-store";let gr=null;function Qo(){return gr||(gr=(0,te.X3)("firebase-heartbeat-database",1,{upgrade:(W,B)=>{switch(B){case 0:W.createObjectStore(Pn)}}}).catch(W=>{throw Jt.create("storage-open",{originalErrorMessage:W.message})})),gr}function Ye(){return(Ye=(0,f.Z)(function*(W){var B;try{return(yield Qo()).transaction(Pn).objectStore(Pn).get(sn(W))}catch(ve){throw Jt.create("storage-get",{originalErrorMessage:null===(B=ve)||void 0===B?void 0:B.message})}})).apply(this,arguments)}function it(W,B){return ws.apply(this,arguments)}function ws(){return(ws=(0,f.Z)(function*(W,B){var ve;try{const rt=(yield Qo()).transaction(Pn,"readwrite");return yield rt.objectStore(Pn).put(B,sn(W)),rt.done}catch(Ve){throw Jt.create("storage-set",{originalErrorMessage:null===(ve=Ve)||void 0===ve?void 0:ve.message})}})).apply(this,arguments)}function sn(W){return`${W.name}!${W.options.appId}`}class Kn{constructor(B){this.container=B,this._heartbeatsCache=null;const ve=this.container.getProvider("app").getImmediate();this._storage=new Q(ve),this._heartbeatsCachePromise=this._storage.read().then(Ve=>(this._heartbeatsCache=Ve,Ve))}triggerHeartbeat(){var B=this;return(0,f.Z)(function*(){const Ve=B.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),rt=Bn();if(null===B._heartbeatsCache&&(B._heartbeatsCache=yield B._heartbeatsCachePromise),B._heartbeatsCache.lastSentHeartbeatDate!==rt&&!B._heartbeatsCache.heartbeats.some(Dt=>Dt.date===rt))return B._heartbeatsCache.heartbeats.push({date:rt,agent:Ve}),B._heartbeatsCache.heartbeats=B._heartbeatsCache.heartbeats.filter(Dt=>{const Nt=new Date(Dt.date).valueOf();return Date.now()-Nt<=2592e6}),B._storage.overwrite(B._heartbeatsCache)})()}getHeartbeatsHeader(){var B=this;return(0,f.Z)(function*(){if(null===B._heartbeatsCache&&(yield B._heartbeatsCachePromise),null===B._heartbeatsCache||0===B._heartbeatsCache.heartbeats.length)return"";const ve=Bn(),{heartbeatsToSend:Ve,unsentEntries:rt}=function(W,B=1024){const ve=[];let Ve=W.slice();for(const rt of W){const Dt=ve.find(Nt=>Nt.agent===rt.agent);if(Dt){if(Dt.dates.push(rt.date),$(ve)>B){Dt.dates.pop();break}}else if(ve.push({agent:rt.agent,dates:[rt.date]}),$(ve)>B){ve.pop();break}Ve=Ve.slice(1)}return{heartbeatsToSend:ve,unsentEntries:Ve}}(B._heartbeatsCache.heartbeats),Dt=(0,re.L)(JSON.stringify({version:2,heartbeats:Ve}));return B._heartbeatsCache.lastSentHeartbeatDate=ve,rt.length>0?(B._heartbeatsCache.heartbeats=rt,yield B._storage.overwrite(B._heartbeatsCache)):(B._heartbeatsCache.heartbeats=[],B._storage.overwrite(B._heartbeatsCache)),Dt})()}}function Bn(){return(new Date).toISOString().substring(0,10)}class Q{constructor(B){this.app=B,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var B=this;return(0,f.Z)(function*(){return(yield B._canUseIndexedDBPromise)&&(yield function(W){return Ye.apply(this,arguments)}(B.app))||{heartbeats:[]}})()}overwrite(B){var ve=this;return(0,f.Z)(function*(){var Ve;if(yield ve._canUseIndexedDBPromise){const Dt=yield ve.read();return it(ve.app,{lastSentHeartbeatDate:null!==(Ve=B.lastSentHeartbeatDate)&&void 0!==Ve?Ve:Dt.lastSentHeartbeatDate,heartbeats:B.heartbeats})}})()}add(B){var ve=this;return(0,f.Z)(function*(){var Ve;if(yield ve._canUseIndexedDBPromise){const Dt=yield ve.read();return it(ve.app,{lastSentHeartbeatDate:null!==(Ve=B.lastSentHeartbeatDate)&&void 0!==Ve?Ve:Dt.lastSentHeartbeatDate,heartbeats:[...Dt.heartbeats,...B.heartbeats]})}})()}}function $(W){return(0,re.L)(JSON.stringify({version:2,heartbeats:W})).length}pr(new j.wA("platform-logger",B=>new oe(B),"PRIVATE")),pr(new j.wA("heartbeat",B=>new Kn(B),"PRIVATE")),Zt(se,G,""),Zt(se,G,"esm2017"),Zt("fire-js","")},3910:(Ze,me,F)=>{"use strict";F.d(me,{wA:()=>O,H0:()=>se});var f=F(8239),j=F(3854);class O{constructor(L,V,ne){this.name=L,this.instanceFactory=V,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(L){return this.instantiationMode=L,this}setMultipleInstances(L){return this.multipleInstances=L,this}setServiceProps(L){return this.serviceProps=L,this}setInstanceCreatedCallback(L){return this.onInstanceCreated=L,this}}const re="[DEFAULT]";class te{constructor(L,V){this.name=L,this.container=V,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(L){const V=this.normalizeInstanceIdentifier(L);if(!this.instancesDeferred.has(V)){const ne=new j.BH;if(this.instancesDeferred.set(V,ne),this.isInitialized(V)||this.shouldAutoInitialize())try{const pe=this.getOrInitializeService({instanceIdentifier:V});pe&&ne.resolve(pe)}catch(pe){}}return this.instancesDeferred.get(V).promise}getImmediate(L){var V;const ne=this.normalizeInstanceIdentifier(null==L?void 0:L.identifier),pe=null!==(V=null==L?void 0:L.optional)&&void 0!==V&&V;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(pe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Pe){if(pe)return null;throw Pe}}getComponent(){return this.component}setComponent(L){if(L.name!==this.name)throw Error(`Mismatching Component ${L.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=L,this.shouldAutoInitialize()){if("EAGER"===L.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:re})}catch(V){}for(const[V,ne]of this.instancesDeferred.entries()){const pe=this.normalizeInstanceIdentifier(V);try{const Pe=this.getOrInitializeService({instanceIdentifier:pe});ne.resolve(Pe)}catch(Pe){}}}}clearInstance(L=re){this.instancesDeferred.delete(L),this.instancesOptions.delete(L),this.instances.delete(L)}delete(){var L=this;return(0,f.Z)(function*(){const V=Array.from(L.instances.values());yield Promise.all([...V.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...V.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(L=re){return this.instances.has(L)}getOptions(L=re){return this.instancesOptions.get(L)||{}}initialize(L={}){const{options:V={}}=L,ne=this.normalizeInstanceIdentifier(L.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const pe=this.getOrInitializeService({instanceIdentifier:ne,options:V});for(const[Pe,de]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Pe)&&de.resolve(pe);return pe}onInit(L,V){var ne;const pe=this.normalizeInstanceIdentifier(V),Pe=null!==(ne=this.onInitCallbacks.get(pe))&&void 0!==ne?ne:new Set;Pe.add(L),this.onInitCallbacks.set(pe,Pe);const de=this.instances.get(pe);return de&&L(de,pe),()=>{Pe.delete(L)}}invokeOnInitCallbacks(L,V){const ne=this.onInitCallbacks.get(V);if(ne)for(const pe of ne)try{pe(L,V)}catch(Pe){}}getOrInitializeService({instanceIdentifier:L,options:V={}}){let ne=this.instances.get(L);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(G=L,G===re?void 0:G),options:V}),this.instances.set(L,ne),this.instancesOptions.set(L,V),this.invokeOnInitCallbacks(ne,L),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,L,ne)}catch(pe){}var G;return ne||null}normalizeInstanceIdentifier(L=re){return this.component?this.component.multipleInstances?L:re:L}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor(L){this.name=L,this.providers=new Map}addComponent(L){const V=this.getProvider(L.name);if(V.isComponentSet())throw new Error(`Component ${L.name} has already been registered with ${this.name}`);V.setComponent(L)}addOrOverwriteComponent(L){this.getProvider(L.name).isComponentSet()&&this.providers.delete(L.name),this.addComponent(L)}getProvider(L){if(this.providers.has(L))return this.providers.get(L);const V=new te(L,this);return this.providers.set(L,V),V}getProviders(){return Array.from(this.providers.values())}}},5422:(Ze,me,F)=>{"use strict";F.d(me,{in:()=>j,Yd:()=>ce,Ub:()=>se,Am:()=>G});const f=[];var j=(()=>{return(L=j||(j={}))[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT",j;var L})();const O={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},re=j.INFO,te={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},oe=(L,V,...ne)=>{if(V<L.logLevel)return;const pe=(new Date).toISOString(),Pe=te[V];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${V})`);console[Pe](`[${pe}]  ${L.name}:`,...ne)};class ce{constructor(V){this.name=V,this._logLevel=re,this._logHandler=oe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(V){if(!(V in j))throw new TypeError(`Invalid value "${V}" assigned to \`logLevel\``);this._logLevel=V}setLogLevel(V){this._logLevel="string"==typeof V?O[V]:V}get logHandler(){return this._logHandler}set logHandler(V){if("function"!=typeof V)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=V}get userLogHandler(){return this._userLogHandler}set userLogHandler(V){this._userLogHandler=V}debug(...V){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...V),this._logHandler(this,j.DEBUG,...V)}log(...V){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...V),this._logHandler(this,j.VERBOSE,...V)}info(...V){this._userLogHandler&&this._userLogHandler(this,j.INFO,...V),this._logHandler(this,j.INFO,...V)}warn(...V){this._userLogHandler&&this._userLogHandler(this,j.WARN,...V),this._logHandler(this,j.WARN,...V)}error(...V){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...V),this._logHandler(this,j.ERROR,...V)}}function se(L){f.forEach(V=>{V.setLogLevel(L)})}function G(L,V){for(const ne of f){let pe=null;V&&V.level&&(pe=O[V.level]),ne.userLogHandler=null===L?null:(Pe,de,...we)=>{const Ue=we.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch(Re){return null}}).filter(Ae=>Ae).join(" ");de>=(null!=pe?pe:Pe.logLevel)&&L({level:j[de].toLowerCase(),message:Ue,args:we,type:Pe.name})}}}},7449:(Ze,me,F)=>{"use strict";F.d(me,{Lj:()=>Ce,X3:()=>Se});var f=F(8239);let O,re;const ce=new WeakMap,se=new WeakMap,G=new WeakMap,L=new WeakMap,V=new WeakMap;let Pe={get(Me,Te,ze){if(Me instanceof IDBTransaction){if("done"===Te)return se.get(Me);if("objectStoreNames"===Te)return Me.objectStoreNames||G.get(Me);if("store"===Te)return ze.objectStoreNames[1]?void 0:ze.objectStore(ze.objectStoreNames[0])}return Ae(Me[Te])},set:(Me,Te,ze)=>(Me[Te]=ze,!0),has:(Me,Te)=>Me instanceof IDBTransaction&&("done"===Te||"store"===Te)||Te in Me};function Ue(Me){return"function"==typeof Me?function(Me){return Me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Me)?function(...Te){return Me.apply(Re(this),Te),Ae(ce.get(this))}:function(...Te){return Ae(Me.apply(Re(this),Te))}:function(Te,...ze){const dt=Me.call(Re(this),Te,...ze);return G.set(dt,Te.sort?Te.sort():[Te]),Ae(dt)}}(Me):(Me instanceof IDBTransaction&&function(Me){if(se.has(Me))return;const Te=new Promise((ze,dt)=>{const nt=()=>{Me.removeEventListener("complete",st),Me.removeEventListener("error",He),Me.removeEventListener("abort",He)},st=()=>{ze(),nt()},He=()=>{dt(Me.error||new DOMException("AbortError","AbortError")),nt()};Me.addEventListener("complete",st),Me.addEventListener("error",He),Me.addEventListener("abort",He)});se.set(Me,Te)}(Me),((Me,Te)=>Te.some(ze=>Me instanceof ze))(Me,O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Me,Pe):Me)}function Ae(Me){if(Me instanceof IDBRequest)return function(Me){const Te=new Promise((ze,dt)=>{const nt=()=>{Me.removeEventListener("success",st),Me.removeEventListener("error",He)},st=()=>{ze(Ae(Me.result)),nt()},He=()=>{dt(Me.error),nt()};Me.addEventListener("success",st),Me.addEventListener("error",He)});return Te.then(ze=>{ze instanceof IDBCursor&&ce.set(ze,Me)}).catch(()=>{}),V.set(Te,Me),Te}(Me);if(L.has(Me))return L.get(Me);const Te=Ue(Me);return Te!==Me&&(L.set(Me,Te),V.set(Te,Me)),Te}const Re=Me=>V.get(Me);function Se(Me,Te,{blocked:ze,upgrade:dt,blocking:nt,terminated:st}={}){const He=indexedDB.open(Me,Te),Hr=Ae(He);return dt&&He.addEventListener("upgradeneeded",wr=>{dt(Ae(He.result),wr.oldVersion,wr.newVersion,Ae(He.transaction))}),ze&&He.addEventListener("blocked",()=>ze()),Hr.then(wr=>{st&&wr.addEventListener("close",()=>st()),nt&&wr.addEventListener("versionchange",()=>nt())}).catch(()=>{}),Hr}function Ce(Me,{blocked:Te}={}){const ze=indexedDB.deleteDatabase(Me);return Te&&ze.addEventListener("blocked",()=>Te()),Ae(ze).then(()=>{})}const Qe=["get","getKey","getAll","getAllKeys","count"],zt=["put","add","delete","clear"],fn=new Map;function _t(Me,Te){if(!(Me instanceof IDBDatabase)||Te in Me||"string"!=typeof Te)return;if(fn.get(Te))return fn.get(Te);const ze=Te.replace(/FromIndex$/,""),dt=Te!==ze,nt=zt.includes(ze);if(!(ze in(dt?IDBIndex:IDBObjectStore).prototype)||!nt&&!Qe.includes(ze))return;const st=function(){var He=(0,f.Z)(function*(Hr,...wr){const Es=this.transaction(Hr,nt?"readwrite":"readonly");let Gr=Es.store;return dt&&(Gr=Gr.index(wr.shift())),(yield Promise.all([Gr[ze](...wr),nt&&Es.done]))[0]});return function(wr){return He.apply(this,arguments)}}();return fn.set(Te,st),st}var Me;Pe=ON(NN({},Me=Pe),{get:(Te,ze,dt)=>_t(Te,ze)||Me.get(Te,ze,dt),has:(Te,ze)=>!!_t(Te,ze)||Me.has(Te,ze)})},8239:(Ze,me,F)=>{"use strict";function f(O,re,te,oe,ce,se,G){try{var L=O[se](G),V=L.value}catch(ne){return void te(ne)}L.done?re(V):Promise.resolve(V).then(oe,ce)}function j(O){return function(){var re=this,te=arguments;return new Promise(function(oe,ce){var se=O.apply(re,te);function G(V){f(se,oe,ce,G,L,"next",V)}function L(V){f(se,oe,ce,G,L,"throw",V)}G(void 0)})}}F.d(me,{Z:()=>j})}},Ze=>{Ze(Ze.s=3687)}]);